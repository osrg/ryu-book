<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_TW">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>OpenFlow 交換器測試工具 &#8212; Ryubook 1.0 說明文件</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="index" title="索引" href="genindex.html" />
    <link rel="search" title="搜尋" href="search.html" />
    <link rel="top" title="Ryubook 1.0 說明文件" href="index.html" />
    <link rel="next" title="組織架構" href="arch.html" />
    <link rel="prev" title="路由器（ Router ）" href="rest_router.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>瀏覽</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="總索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="arch.html" title="組織架構"
             accesskey="N">下一頁</a> |</li>
        <li class="right" >
          <a href="rest_router.html" title="路由器（ Router ）"
             accesskey="P">上一頁</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Ryubook 1.0 說明文件</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="openflow">
<span id="ch-switch-test-tool"></span><h1>OpenFlow 交換器測試工具<a class="headerlink" href="#openflow" title="本標題的永久連結">¶</a></h1>
<p>本章將說明如何檢驗 OpenFlow 交換器對於 OpenFlow 規範的功能支援完整度，及測試工具的使用方法。</p>
<div class="section" id="id1">
<h2>測試工具概要<a class="headerlink" href="#id1" title="本標題的永久連結">¶</a></h2>
<p>本工具使用測試樣板檔案，對待測的 OpenFlow 交換器，進行 Flow Entry 和 Meter Entry 的新增以處理封包，並且將 OpenFlow 交換器所處理及轉送封包的結果與測試樣板檔案所描述的”預期處理結果”做比對。亦即檢驗 OpenFlow 交換器對於 OpenFlow 規格功能的支援狀態。</p>
<p>在測試工具中，已經有包含 OpenFlow 1.3 版本中的 FlowMod 訊息、MeterMod 訊息和 GroupMod 訊息的測試動作。</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">測試訊息種類</th>
<th class="head">相應的參數</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>OpenFlow1.3 FlowMod 訊息</td>
<td><p class="first">match (IN_PHY_PORT 除外)</p>
<p class="last">actions（ SET_QUEUE 除外 ）</p>
</td>
</tr>
<tr class="row-odd"><td>OpenFlow1.3 MeterMod 訊息</td>
<td>全部</td>
</tr>
<tr class="row-even"><td>OpenFlow1.3 GroupMod 訊息</td>
<td>全部</td>
</tr>
</tbody>
</table>
<p>若要了解關於封包產生及修改的詳細資料，請參考「 <a class="reference internal" href="packet_lib.html#ch-packet-lib"><span class="std std-ref">封包函式庫</span></a> 」。</p>
<div class="section" id="id2">
<h3>操作綱要<a class="headerlink" href="#id2" title="本標題的永久連結">¶</a></h3>
<div class="section" id="id3">
<h4>測試驗證環境示意圖<a class="headerlink" href="#id3" title="本標題的永久連結">¶</a></h4>
<p>測試工具實際執行時如下列示意圖。
測試樣板檔案中包含了 “待加入的 Flow Entry 和 Meter Entry“、”檢驗封包” 和 ”預期處理結果”。
為了執行測試執行所需的環境設定將在後面的 <a class="reference internal" href="#id7">執行測試的環境</a> 章節中描述。</p>
<a class="reference internal image-reference" href="_images/fig18.png"><img alt="_images/fig18.png" class="align-center" src="_images/fig18.png" style="width: 610.2px; height: 298.8px;" /></a>
</div>
<div class="section" id="id4">
<h4>輸出測試結果<a class="headerlink" href="#id4" title="本標題的永久連結">¶</a></h4>
<p>在指定了測試樣板檔案後，樣板中的測試案例會被依序執行，最後並顯示結果（ OK / ERROR ）。
在出現 ERROR 的測試結果時，錯誤訊息會同時一併出現在畫面上。
最後的測試結果會顯示 OK / ERROR 的數量及錯誤內容。</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="o">---</span> <span class="n">Test</span> <span class="n">start</span> <span class="o">---</span>

<span class="n">match</span><span class="p">:</span> <span class="mi">29</span><span class="n">_ICMPV6_TYPE</span>
    <span class="n">ethernet</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_type=128,actions=output:2&#39;</span>               <span class="n">OK</span>
    <span class="n">ethernet</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_type=128,actions=output:CONTROLLER&#39;</span>      <span class="n">OK</span>
    <span class="n">ethernet</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="mi">135</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_type=128,actions=output:2&#39;</span>               <span class="n">OK</span>
    <span class="n">ethernet</span><span class="o">/</span><span class="n">vlan</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_type=128,actions=output:2&#39;</span>          <span class="n">ERROR</span>
        <span class="n">Received</span> <span class="n">incorrect</span> <span class="n">packet</span><span class="o">-</span><span class="ow">in</span><span class="p">:</span> <span class="n">ethernet</span><span class="p">(</span><span class="n">ethertype</span><span class="o">=</span><span class="mi">34525</span><span class="p">)</span>
    <span class="n">ethernet</span><span class="o">/</span><span class="n">vlan</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_type=128,actions=output:CONTROLLER&#39;</span> <span class="n">ERROR</span>
        <span class="n">Received</span> <span class="n">incorrect</span> <span class="n">packet</span><span class="o">-</span><span class="ow">in</span><span class="p">:</span> <span class="n">ethernet</span><span class="p">(</span><span class="n">ethertype</span><span class="o">=</span><span class="mi">34525</span><span class="p">)</span>
<span class="n">match</span><span class="p">:</span> <span class="mi">30</span><span class="n">_ICMPV6_CODE</span>
    <span class="n">ethernet</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_code=0,actions=output:2&#39;</span>                   <span class="n">OK</span>
    <span class="n">ethernet</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_code=0,actions=output:CONTROLLER&#39;</span>          <span class="n">OK</span>
    <span class="n">ethernet</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_code=0,actions=output:2&#39;</span>                   <span class="n">OK</span>
    <span class="n">ethernet</span><span class="o">/</span><span class="n">vlan</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_code=0,actions=output:2&#39;</span>              <span class="n">ERROR</span>
        <span class="n">Received</span> <span class="n">incorrect</span> <span class="n">packet</span><span class="o">-</span><span class="ow">in</span><span class="p">:</span> <span class="n">ethernet</span><span class="p">(</span><span class="n">ethertype</span><span class="o">=</span><span class="mi">34525</span><span class="p">)</span>
    <span class="n">ethernet</span><span class="o">/</span><span class="n">vlan</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_code=0,actions=output:CONTROLLER&#39;</span>     <span class="n">ERROR</span>
        <span class="n">Received</span> <span class="n">incorrect</span> <span class="n">packet</span><span class="o">-</span><span class="ow">in</span><span class="p">:</span> <span class="n">ethernet</span><span class="p">(</span><span class="n">ethertype</span><span class="o">=</span><span class="mi">34525</span><span class="p">)</span>

<span class="o">---</span>  <span class="n">Test</span> <span class="n">end</span>  <span class="o">---</span>

<span class="o">---</span> <span class="n">Test</span> <span class="n">report</span> <span class="o">---</span>
<span class="n">Received</span> <span class="n">incorrect</span> <span class="n">packet</span><span class="o">-</span><span class="ow">in</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
    <span class="n">match</span><span class="p">:</span> <span class="mi">29</span><span class="n">_ICMPV6_TYPE</span>                    <span class="n">ethernet</span><span class="o">/</span><span class="n">vlan</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_type=128,actions=output:2&#39;</span>
    <span class="n">match</span><span class="p">:</span> <span class="mi">29</span><span class="n">_ICMPV6_TYPE</span>                    <span class="n">ethernet</span><span class="o">/</span><span class="n">vlan</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="nb">type</span><span class="o">=</span><span class="mi">128</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_type=128,actions=output:CONTROLLER&#39;</span>
    <span class="n">match</span><span class="p">:</span> <span class="mi">30</span><span class="n">_ICMPV6_CODE</span>                    <span class="n">ethernet</span><span class="o">/</span><span class="n">vlan</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_code=0,actions=output:2&#39;</span>
    <span class="n">match</span><span class="p">:</span> <span class="mi">30</span><span class="n">_ICMPV6_CODE</span>                    <span class="n">ethernet</span><span class="o">/</span><span class="n">vlan</span><span class="o">/</span><span class="n">ipv6</span><span class="o">/</span><span class="n">icmpv6</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">--&gt;</span><span class="s1">&#39;icmpv6_code=0,actions=output:CONTROLLER&#39;</span>

<span class="n">OK</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span> <span class="o">/</span> <span class="n">ERROR</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id5">
<h2>使用方法<a class="headerlink" href="#id5" title="本標題的永久連結">¶</a></h2>
<p>下面說明如何使用測試工具。</p>
<div class="section" id="id6">
<h3>測試範本檔案<a class="headerlink" href="#id6" title="本標題的永久連結">¶</a></h3>
<p>你需要依照測試樣板的相關規則來建立一個測試樣板，以完成你想要的測試項目。</p>
<p>測試樣板的附檔名是「.json」，格式如下。</p>
<div class="sourcecode highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span>
    <span class="s2">&quot;xxxxxxxxxx&quot;</span><span class="p">,</span>                    <span class="c1"># 測試名稱</span>
    <span class="p">{</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;xxxxxxxxxx&quot;</span><span class="p">,</span> <span class="c1"># 測試內容的描述</span>
        <span class="s2">&quot;prerequisite&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;OFPFlowMod&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>  <span class="c1"># 所要新增的 flow entry、meter entry、group entry</span>
            <span class="p">},</span>                       <span class="c1"># ( Ryu 的 OFPFlowMod、OFPMeterMod、OFPGroupMod 使用 json 的形態描述 )</span>
            <span class="p">{</span>                        <span class="c1">#</span>
                <span class="s2">&quot;OFPMeterMod&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span> <span class="c1"># 要將 flow entry 處理的結果轉送出去的情況下</span>
            <span class="p">},</span>                       <span class="c1"># (actions=output)</span>
            <span class="p">{</span>                        <span class="c1"># 請指定輸出埠的編號為「2」</span>
                <span class="s2">&quot;OFPGroupMod&quot;</span><span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span> <span class="c1"># 若是封包轉送至 group entry 的情況</span>
            <span class="p">},</span>                       <span class="c1"># 請指定輸出埠號為「2」或「3」</span>
            <span class="p">{</span><span class="o">...</span><span class="p">}</span>                    <span class="c1">#</span>
        <span class="p">],</span>
        <span class="s2">&quot;tests&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="c1"># 產生封包</span>
                <span class="c1"># 單次產生封包或者一定時間內連續產生封包均可。</span>
                <span class="c1"># 封包的產生方法有 (A) (B) 兩種</span>
                <span class="c1">#  (A) 單次產生封包</span>
                <span class="s2">&quot;ingress&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="s2">&quot;ethernet(...)&quot;</span><span class="p">,</span> <span class="c1"># ( 在 Ryu 封包函式庫的建構子 ( Constructor ) 中描述 )</span>
                    <span class="s2">&quot;ipv4(...)&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tcp(...)&quot;</span>
                <span class="p">],</span>
                <span class="c1">#  (B) 一段時間內連續產生封包</span>
                <span class="s2">&quot;ingress&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;packets&quot;</span><span class="p">:{</span>
                        <span class="s2">&quot;data&quot;</span><span class="p">:[</span>
                            <span class="s2">&quot;ethernet(...)&quot;</span><span class="p">,</span> <span class="c1"># 與 (A) 相同</span>
                            <span class="s2">&quot;ipv4(...)&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;tcp(...)&quot;</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;pktps&quot;</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>       <span class="c1"># 每秒產生封包的數量 ( packet per second )</span>
                        <span class="s2">&quot;duration_time&quot;</span><span class="p">:</span> <span class="mi">30</span>  <span class="c1"># 連續產生封包的時間長度，以秒為單位。</span>
                    <span class="p">}</span>
                <span class="p">},</span>

                <span class="c1"># 預期處理的結果</span>
                <span class="c1"># 處理的結果有 (a) (b) (c) (d) 這幾種</span>
                <span class="c1">#  (a) 封包轉送 ( actions=output:X )</span>
                <span class="s2">&quot;egress&quot;</span><span class="p">:</span> <span class="p">[</span>          <span class="c1"># 預期轉送封包</span>
                    <span class="s2">&quot;ethernet(...)&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;ipv4(...)&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tcp(...)&quot;</span>
                <span class="p">]</span>
                <span class="c1">#  (b) Packet in ( actions=CONTROLLER )</span>
                <span class="s2">&quot;PACKET_IN&quot;</span><span class="p">:</span> <span class="p">[</span>       <span class="c1"># 預期出現的 Packet in 封包</span>
                    <span class="s2">&quot;ethernet(...)&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;ipv4(...)&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;tcp(...)&quot;</span>
                <span class="p">]</span>
                <span class="c1">#  (c) table-miss</span>
                <span class="s2">&quot;table-miss&quot;</span><span class="p">:</span> <span class="p">[</span>      <span class="c1"># 期望 table-miss 發生時的 table ID</span>
                    <span class="mi">0</span>
                <span class="p">]</span>
                <span class="c1">#  (d) 封包轉送 ( actions=output:X ) 時的流量 ( Throughput ) 測試</span>
                <span class="s2">&quot;egress&quot;</span><span class="p">:[</span>
                    <span class="s2">&quot;throughput&quot;</span><span class="p">:[</span>
                        <span class="p">{</span>
                            <span class="s2">&quot;OFPMatch&quot;</span><span class="p">:{</span>   <span class="c1"># 為了 Throughput 測試</span>
                              <span class="o">...</span>          <span class="c1"># 新增在輔助交換器中</span>
                            <span class="p">},</span>             <span class="c1"># flow entry 的 match 條件</span>
                            <span class="s2">&quot;kbps&quot;</span><span class="p">:</span><span class="mi">1000</span>    <span class="c1"># 指定期望的流量以 Kbps 為單位</span>
                        <span class="p">},</span>
                        <span class="p">{</span><span class="o">...</span><span class="p">},</span>
                        <span class="p">{</span><span class="o">...</span><span class="p">}</span>
                    <span class="p">]</span>
                <span class="p">]</span>
            <span class="p">},</span>
            <span class="p">{</span><span class="o">...</span><span class="p">},</span>
            <span class="p">{</span><span class="o">...</span><span class="p">}</span>
        <span class="p">]</span>
    <span class="p">},</span>                               <span class="c1"># 測試項目1</span>
    <span class="p">{</span><span class="o">...</span><span class="p">},</span>                           <span class="c1"># 測試項目2</span>
    <span class="p">{</span><span class="o">...</span><span class="p">}</span>                            <span class="c1"># 測試項目3</span>
<span class="p">]</span>
</pre></div>
</div>
<p>例如，產生封包中「(B) 一段時間內產生封包」和預期處理結果中「(d) 封包轉送 ( actions=output:X ) 時流量測試」搭配時就可以用來對待測交換器進行流量 ( Throughput ) 的測試。</p>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p>作為一個測試樣板在 Ryu 的原始碼中，提供了一些樣板檔案來檢查測試參數是否符合 OpenFlow1.3 FlowMod 中的 match / action 訊息。</p>
<blockquote class="last">
<div>ryu/tests/switch/of13</div></blockquote>
</div>
</div>
<div class="section" id="id7">
<h3>執行測試的環境<a class="headerlink" href="#id7" title="本標題的永久連結">¶</a></h3>
<p>接下來說明測試工具執行時所需的環境。</p>
<a class="reference internal image-reference" href="_images/fig25.png"><img alt="_images/fig25.png" class="align-center" src="_images/fig25.png" style="width: 592.2px; height: 277.8px;" /></a>
<p>對於做為一個輔助交換器來說，下面的條件是一個 OpenFlow 交換器必須要支援的。</p>
<ul class="simple">
<li>actions = CONTROLLER Flow Entry 新增</li>
<li>流量監控用的 Flow Entry 新增</li>
<li>透過 Flow Entry 發送 Packet-In 訊息到 Controller（ actions = CONTROLLER ）。</li>
<li>接受 Packet-Out 訊息並發送封包</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p>Ryu 原始碼當中利用腳本實作了一個在 mininet 上的測試環境，當中是採用 Open vSwtich 做為待測交換器。</p>
<blockquote>
<div>ryu/tests/switch/run_mininet.py</div></blockquote>
<p class="last">腳本的使用範例請參照 <a class="reference internal" href="#id9">測試工具使用範例</a> 。</p>
</div>
</div>
<div class="section" id="id8">
<h3>執行測試工具的方法<a class="headerlink" href="#id8" title="本標題的永久連結">¶</a></h3>
<p>測試工具已經被公開在 Ryu 的原始碼當中。</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">原始碼</th>
<th class="head">說明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ryu/tests/switch/tester.py</td>
<td>測試工具</td>
</tr>
<tr class="row-odd"><td>ryu/tests/switch/of13</td>
<td>測試樣板的一些範例</td>
</tr>
<tr class="row-even"><td>ryu/tests/switch/run_mininet.py</td>
<td>建立測試環境的腳本</td>
</tr>
</tbody>
</table>
<p>使用下面的指令來執行測試工具。</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span>$ ryu-manager [--test-switch-target DPID] [--test-switch-tester DPID]
 [--test-switch-dir DIRECTORY] ryu/tests/switch/tester.py
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="49%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">選項</th>
<th class="head">說明</th>
<th class="head">預設值</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#8211;test-switch-target</td>
<td>待測交換器的 datapath ID</td>
<td>0000000000000001</td>
</tr>
<tr class="row-odd"><td>&#8211;test-switch-tester</td>
<td>輔助交換器的 datapath ID</td>
<td>0000000000000002</td>
</tr>
<tr class="row-even"><td>&#8211;test-switch-dir</td>
<td>測試樣板的存放路徑</td>
<td>ryu/tests/switch/of13</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">備註</p>
<p class="last">測試工具是繼承自 ryu.base.app_manager.RyuApp 的一個應用程式。跟其他的 Ryu 應用程式一樣使用 &#8211;verbose 選項顯示除錯的訊息。</p>
</div>
<p>測試工具啟動之後，待測交換器和輔助交換器會跟 Controller 進行連接，接著測試動作就會使用指定的測試樣板開始進行測試。</p>
</div>
</div>
<div class="section" id="id9">
<h2>測試工具使用範例<a class="headerlink" href="#id9" title="本標題的永久連結">¶</a></h2>
<p>下面介紹如何使用和測試樣板檔案和原始測試樣板檔案的步驟。</p>
<div class="section" id="id10">
<h3>執行測試樣板檔案的步驟<a class="headerlink" href="#id10" title="本標題的永久連結">¶</a></h3>
<p>使用 Ryu 的原始碼中測試樣板範本（ ryu/tests/switch/of13 ）來檢查 FlowMod 訊息的 match / action，MeterMod 的訊息和 GroupMod 訊息。</p>
<p>本程序中測試環境和測試環境的產生腳本（ ryu/tests/switch/run_mininet.py ），也因此測試目標是 Open vSwitch。使用 VM image 來打造測試環境以及登入的方法請參照「 <a class="reference internal" href="switching_hub.html#ch-switching-hub"><span class="std std-ref">交換器（ Switching Hub ）</span></a> 」以取得更詳細的資料。</p>
<ol class="arabic">
<li><p class="first">建構測試環境</p>
<blockquote>
<div><p>VM 環境的登入，執行測試環境的建構腳本。</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span>ryu@ryu-vm:~$ sudo ryu/ryu/tests/switch/run_mininet.py
</pre></div>
</div>
<p>net 命令的執行結果如下。</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">mininet</span><span class="o">&gt;</span> <span class="n">net</span>
<span class="n">c0</span>
<span class="n">s1</span> <span class="n">lo</span><span class="p">:</span>  <span class="n">s1</span><span class="o">-</span><span class="n">eth1</span><span class="p">:</span><span class="n">s2</span><span class="o">-</span><span class="n">eth1</span> <span class="n">s1</span><span class="o">-</span><span class="n">eth2</span><span class="p">:</span><span class="n">s2</span><span class="o">-</span><span class="n">eth2</span> <span class="n">s1</span><span class="o">-</span><span class="n">eth3</span><span class="p">:</span><span class="n">s2</span><span class="o">-</span><span class="n">eth3</span>
<span class="n">s2</span> <span class="n">lo</span><span class="p">:</span>  <span class="n">s2</span><span class="o">-</span><span class="n">eth1</span><span class="p">:</span><span class="n">s1</span><span class="o">-</span><span class="n">eth1</span> <span class="n">s2</span><span class="o">-</span><span class="n">eth2</span><span class="p">:</span><span class="n">s1</span><span class="o">-</span><span class="n">eth2</span> <span class="n">s2</span><span class="o">-</span><span class="n">eth3</span><span class="p">:</span><span class="n">s1</span><span class="o">-</span><span class="n">eth3</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">執行測試工具</p>
<blockquote>
<div><p>為了執行測試工具，打開連線到 Controller 的 xterm。</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">c0</span>
</pre></div>
</div>
<p>在「Node: c0 (root)」的 xterm 中啟動測試工具。
這時候做為測試樣板檔案的位置，請指定測試樣板範例路徑（ ryu/tests/switch/of13 ）。
接著，由於 mininet 測試環境中待測交換器和輔助交換器的 datapath ID 均有預設值，因此
&#8211;test-switch-target / &#8211;test-switch-tester 選項可省略。</p>
<p>Node: c0:</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span>root@ryu-vm:~$ ryu-manager --test-switch-dir ryu/ryu/tests/switch/of13 ryu/ryu/tests/switch/tester.py
</pre></div>
</div>
<p>測試工具執行之後就會出現下列訊息，並等待待測交換器和輔助交換器連結到 Controller。</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span>root@ryu-vm:~$ ryu-manager --test-switch-dir ryu/ryu/tests/switch/of13/ ryu/ryu/tests/switch/tester.py
loading app ryu/ryu/tests/switch/tester.py
loading app ryu.controller.ofp_handler
instantiating app ryu/ryu/tests/switch/tester.py of OfTester
target_dpid=0000000000000001
tester_dpid=0000000000000002
Test files directory = ryu/ryu/tests/switch/of13/
instantiating app ryu.controller.ofp_handler of OFPHandler
--- Test start ---
waiting for switches connection...
</pre></div>
</div>
<p>待測交換器和輔助交換器連接 Contreoller 完成，測試開始。</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span>root@ryu-vm:~$ ryu-manager --test-switch-dir ryu/ryu/tests/switch/of13/ ryu/ryu/tests/switch/tester.py
loading app ryu/ryu/tests/switch/tester.py
loading app ryu.controller.ofp_handler
instantiating app ryu/ryu/tests/switch/tester.py of OfTester
target_dpid=0000000000000001
tester_dpid=0000000000000002
Test files directory = ryu/ryu/tests/switch/of13/
instantiating app ryu.controller.ofp_handler of OFPHandler
--- Test start ---
waiting for switches connection...
dpid=0000000000000002 : Join tester SW.
dpid=0000000000000001 : Join target SW.
action: 00_OUTPUT
    ethernet/ipv4/tcp--&gt;&#39;actions=output:2&#39;      OK
    ethernet/ipv6/tcp--&gt;&#39;actions=output:2&#39;      OK
    ethernet/arp--&gt;&#39;actions=output:2&#39;           OK
action: 11_COPY_TTL_OUT
    ethernet/mpls(ttl=64)/ipv4(ttl=32)/tcp--&gt;&#39;eth_type=0x8847,actions=copy_ttl_out,output:2&#39;        ERROR
        Failed to add flows: OFPErrorMsg[type=0x02, code=0x00]
    ethernet/mpls(ttl=64)/ipv6(hop_limit=32)/tcp--&gt;&#39;eth_type=0x8847,actions=copy_ttl_out,output:2&#39;  ERROR
        Failed to add flows: OFPErrorMsg[type=0x02, code=0x00]
...
</pre></div>
</div>
<p>ryu/tests/switch/of13 資料夾以下的測試樣板全部執行完畢，測試也隨之結束。</p>
</div></blockquote>
</li>
</ol>
<div class="section" id="id11">
<h4>&lt;參考資料&gt;<a class="headerlink" href="#id11" title="本標題的永久連結">¶</a></h4>
<blockquote>
<div><p>測試樣板範本檔案一覽</p>
<blockquote>
<div>提供測試樣板範本檔案包括，對應 match / actions 各種設定的 Flow Entry 新增：match（ 或不 match ）多數 pattern 的封包改寫、對應滿足一定頻率的後變更優先權的 Meter Entry 新增：Meter Entry 中 match 的封包連續改寫、對應全連接埠的 FLOODING 的 Group Entry 新增：Group Entry 中 match 封包的連續改寫。</div></blockquote>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">ryu</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">switch</span><span class="o">/</span><span class="n">of13</span><span class="o">/</span><span class="n">action</span><span class="p">:</span>
<span class="mi">00</span><span class="n">_OUTPUT</span><span class="o">.</span><span class="n">json</span>              <span class="mi">20</span><span class="n">_POP_MPLS</span><span class="o">.</span><span class="n">json</span>
<span class="mi">11</span><span class="n">_COPY_TTL_OUT</span><span class="o">.</span><span class="n">json</span>        <span class="mi">23</span><span class="n">_SET_NW_TTL_IPv4</span><span class="o">.</span><span class="n">json</span>
<span class="mi">12</span><span class="n">_COPY_TTL_IN</span><span class="o">.</span><span class="n">json</span>         <span class="mi">23</span><span class="n">_SET_NW_TTL_IPv6</span><span class="o">.</span><span class="n">json</span>
<span class="mi">15</span><span class="n">_SET_MPLS_TTL</span><span class="o">.</span><span class="n">json</span>        <span class="mi">24</span><span class="n">_DEC_NW_TTL_IPv4</span><span class="o">.</span><span class="n">json</span>
<span class="mi">16</span><span class="n">_DEC_MPLS_TTL</span><span class="o">.</span><span class="n">json</span>        <span class="mi">24</span><span class="n">_DEC_NW_TTL_IPv6</span><span class="o">.</span><span class="n">json</span>
<span class="mi">17</span><span class="n">_PUSH_VLAN</span><span class="o">.</span><span class="n">json</span>           <span class="mi">25</span><span class="n">_SET_FIELD</span>
<span class="mi">17</span><span class="n">_PUSH_VLAN_multiple</span><span class="o">.</span><span class="n">json</span>  <span class="mi">26</span><span class="n">_PUSH_PBB</span><span class="o">.</span><span class="n">json</span>
<span class="mi">18</span><span class="n">_POP_VLAN</span><span class="o">.</span><span class="n">json</span>            <span class="mi">26</span><span class="n">_PUSH_PBB_multiple</span><span class="o">.</span><span class="n">json</span>
<span class="mi">19</span><span class="n">_PUSH_MPLS</span><span class="o">.</span><span class="n">json</span>           <span class="mi">27</span><span class="n">_POP_PBB</span><span class="o">.</span><span class="n">json</span>
<span class="mi">19</span><span class="n">_PUSH_MPLS_multiple</span><span class="o">.</span><span class="n">json</span>

<span class="n">ryu</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">switch</span><span class="o">/</span><span class="n">of13</span><span class="o">/</span><span class="n">action</span><span class="o">/</span><span class="mi">25</span><span class="n">_SET_FIELD</span><span class="p">:</span>
<span class="mi">03</span><span class="n">_ETH_DST</span><span class="o">.</span><span class="n">json</span>        <span class="mi">14</span><span class="n">_TCP_DST_IPv4</span><span class="o">.</span><span class="n">json</span>   <span class="mi">24</span><span class="n">_ARP_SHA</span><span class="o">.</span><span class="n">json</span>
<span class="mi">04</span><span class="n">_ETH_SRC</span><span class="o">.</span><span class="n">json</span>        <span class="mi">14</span><span class="n">_TCP_DST_IPv6</span><span class="o">.</span><span class="n">json</span>   <span class="mi">25</span><span class="n">_ARP_THA</span><span class="o">.</span><span class="n">json</span>
<span class="mi">05</span><span class="n">_ETH_TYPE</span><span class="o">.</span><span class="n">json</span>       <span class="mi">15</span><span class="n">_UDP_SRC_IPv4</span><span class="o">.</span><span class="n">json</span>   <span class="mi">26</span><span class="n">_IPV6_SRC</span><span class="o">.</span><span class="n">json</span>
<span class="mi">06</span><span class="n">_VLAN_VID</span><span class="o">.</span><span class="n">json</span>       <span class="mi">15</span><span class="n">_UDP_SRC_IPv6</span><span class="o">.</span><span class="n">json</span>   <span class="mi">27</span><span class="n">_IPV6_DST</span><span class="o">.</span><span class="n">json</span>
<span class="mi">07</span><span class="n">_VLAN_PCP</span><span class="o">.</span><span class="n">json</span>       <span class="mi">16</span><span class="n">_UDP_DST_IPv4</span><span class="o">.</span><span class="n">json</span>   <span class="mi">28</span><span class="n">_IPV6_FLABEL</span><span class="o">.</span><span class="n">json</span>
<span class="mi">08</span><span class="n">_IP_DSCP_IPv4</span><span class="o">.</span><span class="n">json</span>   <span class="mi">16</span><span class="n">_UDP_DST_IPv6</span><span class="o">.</span><span class="n">json</span>   <span class="mi">29</span><span class="n">_ICMPV6_TYPE</span><span class="o">.</span><span class="n">json</span>
<span class="mi">08</span><span class="n">_IP_DSCP_IPv6</span><span class="o">.</span><span class="n">json</span>   <span class="mi">17</span><span class="n">_SCTP_SRC_IPv4</span><span class="o">.</span><span class="n">json</span>  <span class="mi">30</span><span class="n">_ICMPV6_CODE</span><span class="o">.</span><span class="n">json</span>
<span class="mi">09</span><span class="n">_IP_ECN_IPv4</span><span class="o">.</span><span class="n">json</span>    <span class="mi">17</span><span class="n">_SCTP_SRC_IPv6</span><span class="o">.</span><span class="n">json</span>  <span class="mi">31</span><span class="n">_IPV6_ND_TARGET</span><span class="o">.</span><span class="n">json</span>
<span class="mi">09</span><span class="n">_IP_ECN_IPv6</span><span class="o">.</span><span class="n">json</span>    <span class="mi">18</span><span class="n">_SCTP_DST_IPv4</span><span class="o">.</span><span class="n">json</span>  <span class="mi">32</span><span class="n">_IPV6_ND_SLL</span><span class="o">.</span><span class="n">json</span>
<span class="mi">10</span><span class="n">_IP_PROTO_IPv4</span><span class="o">.</span><span class="n">json</span>  <span class="mi">18</span><span class="n">_SCTP_DST_IPv6</span><span class="o">.</span><span class="n">json</span>  <span class="mi">33</span><span class="n">_IPV6_ND_TLL</span><span class="o">.</span><span class="n">json</span>
<span class="mi">10</span><span class="n">_IP_PROTO_IPv6</span><span class="o">.</span><span class="n">json</span>  <span class="mi">19</span><span class="n">_ICMPV4_TYPE</span><span class="o">.</span><span class="n">json</span>    <span class="mi">34</span><span class="n">_MPLS_LABEL</span><span class="o">.</span><span class="n">json</span>
<span class="mi">11</span><span class="n">_IPV4_SRC</span><span class="o">.</span><span class="n">json</span>       <span class="mi">20</span><span class="n">_ICMPV4_CODE</span><span class="o">.</span><span class="n">json</span>    <span class="mi">35</span><span class="n">_MPLS_TC</span><span class="o">.</span><span class="n">json</span>
<span class="mi">12</span><span class="n">_IPV4_DST</span><span class="o">.</span><span class="n">json</span>       <span class="mi">21</span><span class="n">_ARP_OP</span><span class="o">.</span><span class="n">json</span>         <span class="mi">36</span><span class="n">_MPLS_BOS</span><span class="o">.</span><span class="n">json</span>
<span class="mi">13</span><span class="n">_TCP_SRC_IPv4</span><span class="o">.</span><span class="n">json</span>   <span class="mi">22</span><span class="n">_ARP_SPA</span><span class="o">.</span><span class="n">json</span>        <span class="mi">37</span><span class="n">_PBB_ISID</span><span class="o">.</span><span class="n">json</span>
<span class="mi">13</span><span class="n">_TCP_SRC_IPv6</span><span class="o">.</span><span class="n">json</span>   <span class="mi">23</span><span class="n">_ARP_TPA</span><span class="o">.</span><span class="n">json</span>        <span class="mi">38</span><span class="n">_TUNNEL_ID</span><span class="o">.</span><span class="n">json</span>

<span class="n">ryu</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">switch</span><span class="o">/</span><span class="n">of13</span><span class="o">/</span><span class="n">group</span><span class="p">:</span>
<span class="mi">00</span><span class="n">_ALL</span><span class="o">.</span><span class="n">json</span>           <span class="mi">01</span><span class="n">_SELECT_IP</span><span class="o">.</span><span class="n">json</span>            <span class="mi">01</span><span class="n">_SELECT_Weight_IP</span><span class="o">.</span><span class="n">json</span>
<span class="mi">01</span><span class="n">_SELECT_Ether</span><span class="o">.</span><span class="n">json</span>  <span class="mi">01</span><span class="n">_SELECT_Weight_Ether</span><span class="o">.</span><span class="n">json</span>

<span class="n">ryu</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">switch</span><span class="o">/</span><span class="n">of13</span><span class="o">/</span><span class="n">match</span><span class="p">:</span>
<span class="mi">00</span><span class="n">_IN_PORT</span><span class="o">.</span><span class="n">json</span>        <span class="mi">13</span><span class="n">_TCP_SRC_IPv4</span><span class="o">.</span><span class="n">json</span>   <span class="mi">25</span><span class="n">_ARP_THA</span><span class="o">.</span><span class="n">json</span>
<span class="mi">02</span><span class="n">_METADATA</span><span class="o">.</span><span class="n">json</span>       <span class="mi">13</span><span class="n">_TCP_SRC_IPv6</span><span class="o">.</span><span class="n">json</span>   <span class="mi">25</span><span class="n">_ARP_THA_Mask</span><span class="o">.</span><span class="n">json</span>
<span class="mi">02</span><span class="n">_METADATA_Mask</span><span class="o">.</span><span class="n">json</span>  <span class="mi">14</span><span class="n">_TCP_DST_IPv4</span><span class="o">.</span><span class="n">json</span>   <span class="mi">26</span><span class="n">_IPV6_SRC</span><span class="o">.</span><span class="n">json</span>
<span class="mi">03</span><span class="n">_ETH_DST</span><span class="o">.</span><span class="n">json</span>        <span class="mi">14</span><span class="n">_TCP_DST_IPv6</span><span class="o">.</span><span class="n">json</span>   <span class="mi">26</span><span class="n">_IPV6_SRC_Mask</span><span class="o">.</span><span class="n">json</span>
<span class="mi">03</span><span class="n">_ETH_DST_Mask</span><span class="o">.</span><span class="n">json</span>   <span class="mi">15</span><span class="n">_UDP_SRC_IPv4</span><span class="o">.</span><span class="n">json</span>   <span class="mi">27</span><span class="n">_IPV6_DST</span><span class="o">.</span><span class="n">json</span>
<span class="mi">04</span><span class="n">_ETH_SRC</span><span class="o">.</span><span class="n">json</span>        <span class="mi">15</span><span class="n">_UDP_SRC_IPv6</span><span class="o">.</span><span class="n">json</span>   <span class="mi">27</span><span class="n">_IPV6_DST_Mask</span><span class="o">.</span><span class="n">json</span>
<span class="mi">04</span><span class="n">_ETH_SRC_Mask</span><span class="o">.</span><span class="n">json</span>   <span class="mi">16</span><span class="n">_UDP_DST_IPv4</span><span class="o">.</span><span class="n">json</span>   <span class="mi">28</span><span class="n">_IPV6_FLABEL</span><span class="o">.</span><span class="n">json</span>
<span class="mi">05</span><span class="n">_ETH_TYPE</span><span class="o">.</span><span class="n">json</span>       <span class="mi">16</span><span class="n">_UDP_DST_IPv6</span><span class="o">.</span><span class="n">json</span>   <span class="mi">29</span><span class="n">_ICMPV6_TYPE</span><span class="o">.</span><span class="n">json</span>
<span class="mi">06</span><span class="n">_VLAN_VID</span><span class="o">.</span><span class="n">json</span>       <span class="mi">17</span><span class="n">_SCTP_SRC_IPv4</span><span class="o">.</span><span class="n">json</span>  <span class="mi">30</span><span class="n">_ICMPV6_CODE</span><span class="o">.</span><span class="n">json</span>
<span class="mi">06</span><span class="n">_VLAN_VID_Mask</span><span class="o">.</span><span class="n">json</span>  <span class="mi">17</span><span class="n">_SCTP_SRC_IPv6</span><span class="o">.</span><span class="n">json</span>  <span class="mi">31</span><span class="n">_IPV6_ND_TARGET</span><span class="o">.</span><span class="n">json</span>
<span class="mi">07</span><span class="n">_VLAN_PCP</span><span class="o">.</span><span class="n">json</span>       <span class="mi">18</span><span class="n">_SCTP_DST_IPv4</span><span class="o">.</span><span class="n">json</span>  <span class="mi">32</span><span class="n">_IPV6_ND_SLL</span><span class="o">.</span><span class="n">json</span>
<span class="mi">08</span><span class="n">_IP_DSCP_IPv4</span><span class="o">.</span><span class="n">json</span>   <span class="mi">18</span><span class="n">_SCTP_DST_IPv6</span><span class="o">.</span><span class="n">json</span>  <span class="mi">33</span><span class="n">_IPV6_ND_TLL</span><span class="o">.</span><span class="n">json</span>
<span class="mi">08</span><span class="n">_IP_DSCP_IPv6</span><span class="o">.</span><span class="n">json</span>   <span class="mi">19</span><span class="n">_ICMPV4_TYPE</span><span class="o">.</span><span class="n">json</span>    <span class="mi">34</span><span class="n">_MPLS_LABEL</span><span class="o">.</span><span class="n">json</span>
<span class="mi">09</span><span class="n">_IP_ECN_IPv4</span><span class="o">.</span><span class="n">json</span>    <span class="mi">20</span><span class="n">_ICMPV4_CODE</span><span class="o">.</span><span class="n">json</span>    <span class="mi">35</span><span class="n">_MPLS_TC</span><span class="o">.</span><span class="n">json</span>
<span class="mi">09</span><span class="n">_IP_ECN_IPv6</span><span class="o">.</span><span class="n">json</span>    <span class="mi">21</span><span class="n">_ARP_OP</span><span class="o">.</span><span class="n">json</span>         <span class="mi">36</span><span class="n">_MPLS_BOS</span><span class="o">.</span><span class="n">json</span>
<span class="mi">10</span><span class="n">_IP_PROTO_IPv4</span><span class="o">.</span><span class="n">json</span>  <span class="mi">22</span><span class="n">_ARP_SPA</span><span class="o">.</span><span class="n">json</span>        <span class="mi">37</span><span class="n">_PBB_ISID</span><span class="o">.</span><span class="n">json</span>
<span class="mi">10</span><span class="n">_IP_PROTO_IPv6</span><span class="o">.</span><span class="n">json</span>  <span class="mi">22</span><span class="n">_ARP_SPA_Mask</span><span class="o">.</span><span class="n">json</span>   <span class="mi">37</span><span class="n">_PBB_ISID_Mask</span><span class="o">.</span><span class="n">json</span>
<span class="mi">11</span><span class="n">_IPV4_SRC</span><span class="o">.</span><span class="n">json</span>       <span class="mi">23</span><span class="n">_ARP_TPA</span><span class="o">.</span><span class="n">json</span>        <span class="mi">38</span><span class="n">_TUNNEL_ID</span><span class="o">.</span><span class="n">json</span>
<span class="mi">11</span><span class="n">_IPV4_SRC_Mask</span><span class="o">.</span><span class="n">json</span>  <span class="mi">23</span><span class="n">_ARP_TPA_Mask</span><span class="o">.</span><span class="n">json</span>   <span class="mi">38</span><span class="n">_TUNNEL_ID_Mask</span><span class="o">.</span><span class="n">json</span>
<span class="mi">12</span><span class="n">_IPV4_DST</span><span class="o">.</span><span class="n">json</span>       <span class="mi">24</span><span class="n">_ARP_SHA</span><span class="o">.</span><span class="n">json</span>        <span class="mi">39</span><span class="n">_IPV6_EXTHDR</span><span class="o">.</span><span class="n">json</span>
<span class="mi">12</span><span class="n">_IPV4_DST_Mask</span><span class="o">.</span><span class="n">json</span>  <span class="mi">24</span><span class="n">_ARP_SHA_Mask</span><span class="o">.</span><span class="n">json</span>   <span class="mi">39</span><span class="n">_IPV6_EXTHDR_Mask</span><span class="o">.</span><span class="n">json</span>

<span class="n">ryu</span><span class="o">/</span><span class="n">tests</span><span class="o">/</span><span class="n">switch</span><span class="o">/</span><span class="n">of13</span><span class="o">/</span><span class="n">meter</span><span class="p">:</span>
<span class="mi">01</span><span class="n">_DROP_00_KBPS_00_1M</span><span class="o">.</span><span class="n">json</span>      <span class="mi">02</span><span class="n">_DSCP_REMARK_00_KBPS_00_1M</span><span class="o">.</span><span class="n">json</span>
<span class="mi">01</span><span class="n">_DROP_00_KBPS_01_10M</span><span class="o">.</span><span class="n">json</span>     <span class="mi">02</span><span class="n">_DSCP_REMARK_00_KBPS_01_10M</span><span class="o">.</span><span class="n">json</span>
<span class="mi">01</span><span class="n">_DROP_00_KBPS_02_100M</span><span class="o">.</span><span class="n">json</span>    <span class="mi">02</span><span class="n">_DSCP_REMARK_00_KBPS_02_100M</span><span class="o">.</span><span class="n">json</span>
<span class="mi">01</span><span class="n">_DROP_01_PKTPS_00_100</span><span class="o">.</span><span class="n">json</span>    <span class="mi">02</span><span class="n">_DSCP_REMARK_01_PKTPS_00_100</span><span class="o">.</span><span class="n">json</span>
<span class="mi">01</span><span class="n">_DROP_01_PKTPS_01_1000</span><span class="o">.</span><span class="n">json</span>   <span class="mi">02</span><span class="n">_DSCP_REMARK_01_PKTPS_01_1000</span><span class="o">.</span><span class="n">json</span>
<span class="mi">01</span><span class="n">_DROP_01_PKTPS_02_10000</span><span class="o">.</span><span class="n">json</span>  <span class="mi">02</span><span class="n">_DSCP_REMARK_01_PKTPS_02_10000</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="id12">
<h3>原始測試樣板的執行步驟<a class="headerlink" href="#id12" title="本標題的永久連結">¶</a></h3>
<p>接著，原始的測試樣板製作並執行測試工具的步驟如下所示。</p>
<p>例如 OpenFlow 交換器若要實作路由器的功能， match / actions 的處理功能是必須的，因此我們製作測試樣板來確認他。</p>
<p>1．製作測試樣板檔案</p>
<blockquote>
<div><p>透過路由器的路由表（ Routing table ）實作封包的轉送功能。
下面的 Flow Entry 會確認整個動作是否正確。</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">match</th>
<th class="head">actions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IP 網域「192.168.30.0/24」</td>
<td>修改發送端 MAC 位址為 「aa:aa:aa:aa:aa:aa」</td>
</tr>
<tr class="row-odd"><td></td>
<td>修改目的端 MAC 位址為 「bb:bb:bb:bb:bb:bb」</td>
</tr>
<tr class="row-even"><td></td>
<td>降低 TTL 值</td>
</tr>
<tr class="row-odd"><td></td>
<td>封包轉送</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">match</th>
<th class="head">actions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IP 網域「192.168.30.0/24」</td>
<td>修改發送端 MAC 位址為 「aa:aa:aa:aa:aa:aa」</td>
</tr>
<tr class="row-odd"><td>ryu/tests/switch/of13</td>
<td>測試樣版的一些範例</td>
</tr>
<tr class="row-even"><td>ryu/tests/switch/run_mininet.py</td>
<td>建立測試環境的腳本</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>依照這個測試樣板產生測試樣板檔案。</p>
<p>檔案名稱： <code class="docutils literal"><span class="pre">sample_test_pattern.json</span></code></p>
<div class="sourcecode highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span>
   <span class="s2">&quot;sample: Router test&quot;</span><span class="p">,</span>
   <span class="p">{</span>
       <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;static routing table&quot;</span><span class="p">,</span>
       <span class="s2">&quot;prerequisite&quot;</span><span class="p">:</span> <span class="p">[</span>
           <span class="p">{</span>
               <span class="s2">&quot;OFPFlowMod&quot;</span><span class="p">:</span> <span class="p">{</span>
                   <span class="s2">&quot;table_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s2">&quot;match&quot;</span><span class="p">:</span> <span class="p">{</span>
                       <span class="s2">&quot;OFPMatch&quot;</span><span class="p">:</span> <span class="p">{</span>
                           <span class="s2">&quot;oxm_fields&quot;</span><span class="p">:</span> <span class="p">[</span>
                               <span class="p">{</span>
                                   <span class="s2">&quot;OXMTlv&quot;</span><span class="p">:</span> <span class="p">{</span>
                                       <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;eth_type&quot;</span><span class="p">,</span>
                                       <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2048</span>
                                   <span class="p">}</span>
                               <span class="p">},</span>
                               <span class="p">{</span>
                                   <span class="s2">&quot;OXMTlv&quot;</span><span class="p">:</span> <span class="p">{</span>
                                       <span class="s2">&quot;field&quot;</span><span class="p">:</span> <span class="s2">&quot;ipv4_dst&quot;</span><span class="p">,</span>
                                       <span class="s2">&quot;mask&quot;</span><span class="p">:</span> <span class="mi">4294967040</span><span class="p">,</span>
                                       <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="s2">&quot;192.168.30.0&quot;</span>
                                   <span class="p">}</span>
                               <span class="p">}</span>
                          <span class="p">]</span>
                       <span class="p">}</span>
                   <span class="p">},</span>
                   <span class="s2">&quot;instructions&quot;</span><span class="p">:[</span>
                       <span class="p">{</span>
                           <span class="s2">&quot;OFPInstructionActions&quot;</span><span class="p">:</span> <span class="p">{</span>
                               <span class="s2">&quot;actions&quot;</span><span class="p">:[</span>
                                   <span class="p">{</span>
                                       <span class="s2">&quot;OFPActionSetField&quot;</span><span class="p">:{</span>
                                           <span class="s2">&quot;field&quot;</span><span class="p">:{</span>
                                               <span class="s2">&quot;OXMTlv&quot;</span><span class="p">:{</span>
                                                   <span class="s2">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;eth_src&quot;</span><span class="p">,</span>
                                                   <span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;aa:aa:aa:aa:aa:aa&quot;</span>
                                               <span class="p">}</span>
                                           <span class="p">}</span>
                                       <span class="p">}</span>
                                   <span class="p">},</span>
                                   <span class="p">{</span>
                                       <span class="s2">&quot;OFPActionSetField&quot;</span><span class="p">:{</span>
                                           <span class="s2">&quot;field&quot;</span><span class="p">:{</span>
                                               <span class="s2">&quot;OXMTlv&quot;</span><span class="p">:{</span>
                                                   <span class="s2">&quot;field&quot;</span><span class="p">:</span><span class="s2">&quot;eth_dst&quot;</span><span class="p">,</span>
                                                   <span class="s2">&quot;value&quot;</span><span class="p">:</span><span class="s2">&quot;bb:bb:bb:bb:bb:bb&quot;</span>
                                               <span class="p">}</span>
                                           <span class="p">}</span>
                                       <span class="p">}</span>
                                   <span class="p">},</span>
                                   <span class="p">{</span>
                                       <span class="s2">&quot;OFPActionDecNwTtl&quot;</span><span class="p">:{}</span>
                                   <span class="p">},</span>
                                   <span class="p">{</span>
                                       <span class="s2">&quot;OFPActionOutput&quot;</span><span class="p">:</span> <span class="p">{</span>
                                           <span class="s2">&quot;port&quot;</span><span class="p">:</span><span class="mi">2</span>
                                       <span class="p">}</span>
                                   <span class="p">}</span>
                               <span class="p">],</span>
                               <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="mi">4</span>
                           <span class="p">}</span>
                       <span class="p">}</span>
                   <span class="p">]</span>
               <span class="p">}</span>
           <span class="p">}</span>
       <span class="p">],</span>
       <span class="s2">&quot;tests&quot;</span><span class="p">:[</span>
           <span class="p">{</span>
               <span class="s2">&quot;ingress&quot;</span><span class="p">:[</span>
                   <span class="s2">&quot;ethernet(dst=&#39;22:22:22:22:22:22&#39;,src=&#39;11:11:11:11:11:11&#39;,ethertype=2048)&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;ipv4(tos=32, proto=6, src=&#39;192.168.10.10&#39;, dst=&#39;192.168.30.10&#39;, ttl=64)&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;tcp(dst_port=2222, option=&#39;</span><span class="se">\\</span><span class="s2">x00</span><span class="se">\\</span><span class="s2">x00</span><span class="se">\\</span><span class="s2">x00</span><span class="se">\\</span><span class="s2">x00&#39;, src_port=11111)&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;&#39;</span><span class="se">\\</span><span class="s2">x01</span><span class="se">\\</span><span class="s2">x02</span><span class="se">\\</span><span class="s2">x03</span><span class="se">\\</span><span class="s2">x04</span><span class="se">\\</span><span class="s2">x05</span><span class="se">\\</span><span class="s2">x06</span><span class="se">\\</span><span class="s2">x07</span><span class="se">\\</span><span class="s2">x08</span><span class="se">\\</span><span class="s2">t</span><span class="se">\\</span><span class="s2">n</span><span class="se">\\</span><span class="s2">x0b</span><span class="se">\\</span><span class="s2">x0c</span><span class="se">\\</span><span class="s2">r</span><span class="se">\\</span><span class="s2">x0e</span><span class="se">\\</span><span class="s2">x0f&#39;&quot;</span>
               <span class="p">],</span>
               <span class="s2">&quot;egress&quot;</span><span class="p">:[</span>
                   <span class="s2">&quot;ethernet(dst=&#39;bb:bb:bb:bb:bb:bb&#39;,src=&#39;aa:aa:aa:aa:aa:aa&#39;,ethertype=2048)&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;ipv4(tos=32, proto=6, src=&#39;192.168.10.10&#39;, dst=&#39;192.168.30.10&#39;, ttl=63)&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;tcp(dst_port=2222, option=&#39;</span><span class="se">\\</span><span class="s2">x00</span><span class="se">\\</span><span class="s2">x00</span><span class="se">\\</span><span class="s2">x00</span><span class="se">\\</span><span class="s2">x00&#39;, src_port=11111)&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;&#39;</span><span class="se">\\</span><span class="s2">x01</span><span class="se">\\</span><span class="s2">x02</span><span class="se">\\</span><span class="s2">x03</span><span class="se">\\</span><span class="s2">x04</span><span class="se">\\</span><span class="s2">x05</span><span class="se">\\</span><span class="s2">x06</span><span class="se">\\</span><span class="s2">x07</span><span class="se">\\</span><span class="s2">x08</span><span class="se">\\</span><span class="s2">t</span><span class="se">\\</span><span class="s2">n</span><span class="se">\\</span><span class="s2">x0b</span><span class="se">\\</span><span class="s2">x0c</span><span class="se">\\</span><span class="s2">r</span><span class="se">\\</span><span class="s2">x0e</span><span class="se">\\</span><span class="s2">x0f&#39;&quot;</span>
               <span class="p">]</span>
           <span class="p">}</span>
       <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>2．建構測試環境</p>
<blockquote>
<div>使用測試環境建置腳本來完成測試環境。詳細的操作細節請參照 <a class="reference internal" href="#id10">執行測試樣板檔案的步驟</a> 。</div></blockquote>
<p>3．執行測試工具</p>
<blockquote>
<div><p>使用 Conrtroller 的 xterm 視窗，指定先前做好的測試樣板檔案位置並執行測試工具。
可以使用 &#8211;test-switch-dir 選項來指定樣板檔案的位置。
如果想要確認收送封包的內容，可以指定 &#8211;verbose 選項。</p>
<p>Node: c0:</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span>root@ryu-vm:~$ ryu-manager --verbose --test-switch-dir ./sample_test_pattern.json ryu/ryu/tests/switch/tester.py
</pre></div>
</div>
<p>待測交換器和輔助交換器已經和 Controller 連接的情況下，測試即將開始。</p>
<p>「dpid=0000000000000002 : receive_packet…」的訊息在記錄檔中，表示測試樣板檔案的 egress 封包已經設定完成，即將送出預期的封包。
然後，我們截取部分測試工具的輸出記錄檔。</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span>root@ryu-vm:~$ ryu-manager --verbose --test-switch-dir ./sample_test_pattern.json ryu/ryu/tests/switch/tester.py
loading app ryu/tests/switch/tester.py
loading app ryu.controller.ofp_handler
instantiating app ryu.controller.ofp_handler of OFPHandler
instantiating app ryu/tests/switch/tester.py of OfTester
target_dpid=0000000000000001
tester_dpid=0000000000000002
Test files directory = ./sample_test_pattern.json

--- Test start ---
waiting for switches connection...

dpid=0000000000000002 : Join tester SW.
dpid=0000000000000001 : Join target SW.

sample: Router test

send_packet:[ethernet(dst=&#39;22:22:22:22:22:22&#39;,ethertype=2048,src=&#39;11:11:11:11:11:11&#39;), ipv4(csum=53560,dst=&#39;192.168.30.10&#39;,flags=0,header_length=5,identification=0,offset=0,option=None,proto=6,src=&#39;192.168.10.10&#39;,tos=32,total_length=59,ttl=64,version=4), tcp(ack=0,bits=0,csum=33311,dst_port=2222,offset=6,option=&#39;\x00\x00\x00\x00&#39;,seq=0,src_port=11111,urgent=0,window_size=0), &#39;\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#39;]
egress:[ethernet(dst=&#39;bb:bb:bb:bb:bb:bb&#39;,ethertype=2048,src=&#39;aa:aa:aa:aa:aa:aa&#39;), ipv4(csum=53816,dst=&#39;192.168.30.10&#39;,flags=0,header_length=5,identification=0,offset=0,option=None,proto=6,src=&#39;192.168.10.10&#39;,tos=32,total_length=59,ttl=63,version=4), tcp(ack=0,bits=0,csum=33311,dst_port=2222,offset=6,option=&#39;\x00\x00\x00\x00&#39;,seq=0,src_port=11111,urgent=0,window_size=0), &#39;\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#39;]
packet_in:[]
dpid=0000000000000002 : receive_packet[ethernet(dst=&#39;bb:bb:bb:bb:bb:bb&#39;,ethertype=2048,src=&#39;aa:aa:aa:aa:aa:aa&#39;), ipv4(csum=53816,dst=&#39;192.168.30.10&#39;,flags=0,header_length=5,identification=0,offset=0,option=None,proto=6,src=&#39;192.168.10.10&#39;,tos=32,total_length=59,ttl=63,version=4), tcp(ack=0,bits=0,csum=33311,dst_port=2222,offset=6,option=&#39;\x00\x00\x00\x00&#39;,seq=0,src_port=11111,urgent=0,window_size=0), &#39;\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#39;]
    static routing table                            OK
---  Test end  ---
</pre></div>
</div>
<p>下面列出實際的 OpenFlow 交換器所登錄的 Flow Entry。
你可以看到測試工具所產生的封包 match 所登錄的 Flow Entry，
而且 n_packets 計數器數字被增加。</p>
<p>Node: s1:</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># ovs-ofctl -O OpenFlow13 dump-flows s1</span>
<span class="n">OFPST_FLOW</span> <span class="n">reply</span> <span class="p">(</span><span class="n">OF1</span><span class="o">.</span><span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="n">xid</span><span class="o">=</span><span class="mh">0x2</span><span class="p">):</span>
 <span class="n">cookie</span><span class="o">=</span><span class="mh">0x0</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mf">56.217</span><span class="n">s</span><span class="p">,</span> <span class="n">table</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">n_packets</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">n_bytes</span><span class="o">=</span><span class="mi">73</span><span class="p">,</span> <span class="n">priority</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">ip</span><span class="p">,</span><span class="n">nw_dst</span><span class="o">=</span><span class="mf">192.168</span><span class="o">.</span><span class="mf">30.0</span><span class="o">/</span><span class="mi">24</span> <span class="n">actions</span><span class="o">=</span><span class="n">set_field</span><span class="p">:</span><span class="n">aa</span><span class="p">:</span><span class="n">aa</span><span class="p">:</span><span class="n">aa</span><span class="p">:</span><span class="n">aa</span><span class="p">:</span><span class="n">aa</span><span class="p">:</span><span class="n">aa</span><span class="o">-&gt;</span><span class="n">eth_src</span><span class="p">,</span><span class="n">set_field</span><span class="p">:</span><span class="n">bb</span><span class="p">:</span><span class="n">bb</span><span class="p">:</span><span class="n">bb</span><span class="p">:</span><span class="n">bb</span><span class="p">:</span><span class="n">bb</span><span class="p">:</span><span class="n">bb</span><span class="o">-&gt;</span><span class="n">eth_dst</span><span class="p">,</span><span class="n">dec_ttl</span><span class="p">,</span><span class="n">output</span><span class="p">:</span><span class="mi">2</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="id13">
<h3>錯誤訊息一覽表<a class="headerlink" href="#id13" title="本標題的永久連結">¶</a></h3>
<p>下面列出所有測試工具可能會顯示的錯誤訊息。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">錯誤訊息</th>
<th class="head">說明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Failed to initialize flow tables: barrier request timeout.</td>
<td>初始待測交換器的 flow entry 失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to initialize flow tables: [err_msg]</td>
<td>初始待測交換器的 flow entry 失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接收到 FlowMod 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to initialize flow tables of tester_sw: barrier request timeout.</td>
<td>初始輔助交換器的 flow entry 失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to initialize flow tables of tester_sw: [err_msg]</td>
<td>初始輔助交換器的 flow entry 失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接收到 FlowMod 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to add flows: barrier request timeout.</td>
<td>待測交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add flows: [err_msg]</td>
<td>待測交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接收到 FlowMod 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to add flows to tester_sw: barrier request timeout.</td>
<td>輔助交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add flows to tester_sw: [err_msg]</td>
<td>輔助交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接收到 FlowMod 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to add meters: barrier request timeout.</td>
<td>待測交換器的 meter entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add meters: [err_msg]</td>
<td>待測交換器的 meter entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接收到 MeterMod 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to add groups: barrier request timeout.</td>
<td>待測交換器的 group entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add groups: [err_msg]</td>
<td>待測交換器的 group entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到 GroupMod 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Added incorrect flows: [flows]</td>
<td>待測交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(新增的 flow entry 不符合規範)</td>
</tr>
<tr class="row-even"><td>Failed to add flows: flow stats request timeout.</td>
<td>待測交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(FlowStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add flows: [err_msg]</td>
<td>待測交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到 FlowStats Request 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Added incorrect meters: [meters]</td>
<td>待測交換器的 meter entry 新增錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(新增的 meter entry 不符合規範)</td>
</tr>
<tr class="row-even"><td>Failed to add meters: meter config stats request timeout.</td>
<td>待測交換器的 meter entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(MeterConfigStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add meters: [err_msg]</td>
<td>待測交換器的 meter entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到 MeterConfigStats Request 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Added incorrect groups: [groups]</td>
<td>待測交換器的 group entry 新增錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(新增的 group entry 不符合規範)</td>
</tr>
<tr class="row-even"><td>Failed to add groups: group desc stats request timeout.</td>
<td>待測交換器的 group entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(GroupDescStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add groups: [err_msg]</td>
<td>待測交換器的 group entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到 GroupDescStats Request 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to request port stats from target: request timeout.</td>
<td>待測交換器的 PortStats 取得失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(PortStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to request port stats from target: [err_msg]</td>
<td>待測交換器的 PortStats 取得失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到 PortStats Request 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to request port stats from tester: request timeout.</td>
<td>輔助交換器的 PortStats 取得失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(PortStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to request port stats from tester: [err_msg]</td>
<td>輔助交換器的 PortStats 取得失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到 PortStats Request 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Received incorrect [packet]</td>
<td>封包接收錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到錯誤的封包)</td>
</tr>
<tr class="row-even"><td>Receiving timeout: [detail]</td>
<td>封包接收錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to send packet: barrier request timeout.</td>
<td>封包傳送失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to send packet: [err_msg]</td>
<td>封包傳送失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Packet-Out 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Table-miss error: increment in matched_count.</td>
<td>table-miss 錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(match flow)</td>
</tr>
<tr class="row-even"><td>Table-miss error: no change in lookup_count.</td>
<td>table-miss 錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(封包不會被 flow table 所處理)</td>
</tr>
<tr class="row-even"><td>Failed to request table stats: request timeout.</td>
<td>table-miss 失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(TableStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to request table stats: [err_msg]</td>
<td>table-miss 失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接收到 TableStats Request 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Added incorrect flows to tester_sw: [flows]</td>
<td>輔助交換器 flow entry 新增錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(新增的 flow entry 不符合規範)</td>
</tr>
<tr class="row-even"><td>Failed to add flows to tester_sw: flow stats request timeout.</td>
<td>輔助交換器 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(FlowStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add flows to tester_sw: [err_msg]</td>
<td>輔助交換器 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(FlowStats Request 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to request flow stats: request timeout.</td>
<td>測試 Throughput 時，輔助交換器 flow entry</td>
</tr>
<tr class="row-odd"><td></td>
<td>request 失敗 (FlowStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to request flow stats: [err_msg]</td>
<td>測試 Throughput 時，輔助交換器 flow entry</td>
</tr>
<tr class="row-odd"><td></td>
<td>request 失敗 (FlowStats Request 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Received unexpected throughput: [detail]</td>
<td>測試 Throughput 時，得到非預期的結果</td>
</tr>
<tr class="row-odd"><td>Disconnected from switch</td>
<td>待測交換器或輔助交換器的連結中斷</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">目錄</a></h3>
  <ul>
<li><a class="reference internal" href="#">OpenFlow 交換器測試工具</a><ul>
<li><a class="reference internal" href="#id1">測試工具概要</a><ul>
<li><a class="reference internal" href="#id2">操作綱要</a><ul>
<li><a class="reference internal" href="#id3">測試驗證環境示意圖</a></li>
<li><a class="reference internal" href="#id4">輸出測試結果</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id5">使用方法</a><ul>
<li><a class="reference internal" href="#id6">測試範本檔案</a></li>
<li><a class="reference internal" href="#id7">執行測試的環境</a></li>
<li><a class="reference internal" href="#id8">執行測試工具的方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id9">測試工具使用範例</a><ul>
<li><a class="reference internal" href="#id10">執行測試樣板檔案的步驟</a><ul>
<li><a class="reference internal" href="#id11">&lt;參考資料&gt;</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id12">原始測試樣板的執行步驟</a></li>
<li><a class="reference internal" href="#id13">錯誤訊息一覽表</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>上一個主題</h4>
  <p class="topless"><a href="rest_router.html"
                        title="上一章">路由器（ Router ）</a></p>
  <h4>下一個主題</h4>
  <p class="topless"><a href="arch.html"
                        title="下一章">組織架構</a></p>
  <div role="note" aria-label="source link">
    <h3>本頁</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/switch_test_tool.txt"
            rel="nofollow">顯示原始碼</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>快速搜尋</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="前往" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>瀏覽</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="總索引"
             >索引</a></li>
        <li class="right" >
          <a href="arch.html" title="組織架構"
             >下一頁</a> |</li>
        <li class="right" >
          <a href="rest_router.html" title="路由器（ Router ）"
             >上一頁</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Ryubook 1.0 說明文件</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, RYU project team.
      使用 <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.9 創建。
    </div>
  </body>
</html>