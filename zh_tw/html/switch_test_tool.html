<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>OpenFlow 交換器測試工具 &mdash; Ryubook 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <link rel="top" title="Ryubook 1.0 documentation" href="index.html" />
    <link rel="next" title="組織架構" href="arch.html" />
    <link rel="prev" title="路由器（ Router ）" href="rest_router.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>瀏覽</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="總索引"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="arch.html" title="組織架構"
             accesskey="N">下一頁</a> |</li>
        <li class="right" >
          <a href="rest_router.html" title="路由器（ Router ）"
             accesskey="P">上一頁</a> |</li>
        <li><a href="index.html">Ryubook 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="openflow">
<span id="ch-switch-test-tool"></span><h1>OpenFlow 交換器測試工具<a class="headerlink" href="#openflow" title="Permalink to this headline">¶</a></h1>
<p>本章將說明如何檢驗 OpenFlow 交換器對於 OpenFlow 規範的功能支援完整度，及測試工具的使用方法。</p>
<div class="section" id="id1">
<h2>測試工具概要<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>本工具使用測試樣板檔案，對待測的 OpenFlow 交換器，進行 Flow Entry 和 Meter Entry 的新增以處理封包，並且將 OpenFlow 交換器所處理及轉送封包的結果與測試樣板檔案所描述的”預期處理結果”做比對。亦即檢驗 OpenFlow 交換器對於 OpenFlow 規格功能的支援狀態。</p>
<p>在測試工具中，已經有包含 OpenFlow 1.3 版本中的 FlowMod 訊息、MeterMod 訊息和 GroupMod 訊息的測試動作。</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">測試訊息種類</th>
<th class="head">相應的參數</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>OpenFlow1.3 FlowMod 訊息</td>
<td><p class="first">match (IN_PHY_PORT 除外)</p>
<p class="last">actions（ SET_QUEUE 除外 ）</p>
</td>
</tr>
<tr class="row-odd"><td>OpenFlow1.3 MeterMod 訊息</td>
<td>全部</td>
</tr>
<tr class="row-even"><td>OpenFlow1.3 GroupMod 訊息</td>
<td>全部</td>
</tr>
</tbody>
</table>
<p>若要了解關於封包產生及修改的詳細資料，請參考「 <a class="reference internal" href="packet_lib.html#ch-packet-lib"><em>封包函式庫</em></a> 」。</p>
<div class="section" id="id2">
<h3>操作綱要<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="section" id="id3">
<h4>測試驗證環境示意圖<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>測試工具實際執行時如下列示意圖。
測試樣板檔案中包含了 “待加入的 Flow Entry 和 Meter Entry“、”檢驗封包” 和 ”預期處理結果”。
為了執行測試執行所需的環境設定將在後面的 <a class="reference internal" href="#id7">執行測試的環境</a> 章節中描述。</p>
<a class="reference internal image-reference" href="_images/fig18.png"><img alt="_images/fig18.png" class="align-center" src="_images/fig18.png" /></a>
</div>
<div class="section" id="id4">
<h4>輸出測試結果<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p>在指定了測試樣板檔案後，樣板中的測試案例會被依序執行，最後並顯示結果（ OK / ERROR ）。
在出現 ERROR 的測試結果時，錯誤訊息會同時一併出現在畫面上。
最後的測試結果會顯示 OK / ERROR 的數量及錯誤內容。</p>
<div class="console highlight-python"><div class="highlight"><pre>--- Test start ---

match: 29_ICMPV6_TYPE
    ethernet/ipv6/icmpv6(type=128)--&gt;&#39;icmpv6_type=128,actions=output:2&#39;               OK
    ethernet/ipv6/icmpv6(type=128)--&gt;&#39;icmpv6_type=128,actions=output:CONTROLLER&#39;      OK
    ethernet/ipv6/icmpv6(type=135)--&gt;&#39;icmpv6_type=128,actions=output:2&#39;               OK
    ethernet/vlan/ipv6/icmpv6(type=128)--&gt;&#39;icmpv6_type=128,actions=output:2&#39;          ERROR
        Received incorrect packet-in: ethernet(ethertype=34525)
    ethernet/vlan/ipv6/icmpv6(type=128)--&gt;&#39;icmpv6_type=128,actions=output:CONTROLLER&#39; ERROR
        Received incorrect packet-in: ethernet(ethertype=34525)
match: 30_ICMPV6_CODE
    ethernet/ipv6/icmpv6(code=0)--&gt;&#39;icmpv6_code=0,actions=output:2&#39;                   OK
    ethernet/ipv6/icmpv6(code=0)--&gt;&#39;icmpv6_code=0,actions=output:CONTROLLER&#39;          OK
    ethernet/ipv6/icmpv6(code=1)--&gt;&#39;icmpv6_code=0,actions=output:2&#39;                   OK
    ethernet/vlan/ipv6/icmpv6(code=0)--&gt;&#39;icmpv6_code=0,actions=output:2&#39;              ERROR
        Received incorrect packet-in: ethernet(ethertype=34525)
    ethernet/vlan/ipv6/icmpv6(code=0)--&gt;&#39;icmpv6_code=0,actions=output:CONTROLLER&#39;     ERROR
        Received incorrect packet-in: ethernet(ethertype=34525)

---  Test end  ---

--- Test report ---
Received incorrect packet-in(4)
    match: 29_ICMPV6_TYPE                    ethernet/vlan/ipv6/icmpv6(type=128)--&gt;&#39;icmpv6_type=128,actions=output:2&#39;
    match: 29_ICMPV6_TYPE                    ethernet/vlan/ipv6/icmpv6(type=128)--&gt;&#39;icmpv6_type=128,actions=output:CONTROLLER&#39;
    match: 30_ICMPV6_CODE                    ethernet/vlan/ipv6/icmpv6(code=0)--&gt;&#39;icmpv6_code=0,actions=output:2&#39;
    match: 30_ICMPV6_CODE                    ethernet/vlan/ipv6/icmpv6(code=0)--&gt;&#39;icmpv6_code=0,actions=output:CONTROLLER&#39;

OK(6) / ERROR(4)
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="id5">
<h2>使用方法<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<p>下面說明如何使用測試工具。</p>
<div class="section" id="id6">
<h3>測試範本檔案<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>你需要依照測試樣板的相關規則來建立一個測試樣板，以完成你想要的測試項目。</p>
<p>測試樣板的附檔名是「.json」，格式如下。</p>
<div class="sourcecode highlight-python"><div class="highlight"><pre>[
    &quot;xxxxxxxxxx&quot;,                    # 測試名稱
    {
        &quot;description&quot;: &quot;xxxxxxxxxx&quot;, # 測試內容的描述
        &quot;prerequisite&quot;: [
            {
                &quot;OFPFlowMod&quot;: {...}  # 所要新增的 flow entry、meter entry、group entry
            },                       # ( Ryu 的 OFPFlowMod、OFPMeterMod、OFPGroupMod 使用 json 的形態描述 )
            {                        #
                &quot;OFPMeterMod&quot;: {...} # 要將 flow entry 處理的結果轉送出去的情況下
            },                       # (actions=output)
            {                        # 請指定輸出埠的編號為「2」
                &quot;OFPGroupMod&quot;: {...} # 若是封包轉送至 group entry 的情況
            },                       # 請指定輸出埠號為「2」或「3」
            {...}                    #
        ],
        &quot;tests&quot;: [
            {
                # 產生封包
                # 單次產生封包或者一定時間內連續產生封包均可。
                # 封包的產生方法有 (A) (B) 兩種
                #  (A) 單次產生封包
                &quot;ingress&quot;: [
                    &quot;ethernet(...)&quot;, # ( 在 Ryu 封包函式庫的建構子 ( Constructor ) 中描述 )
                    &quot;ipv4(...)&quot;,
                    &quot;tcp(...)&quot;
                ],
                #  (B) 一段時間內連續產生封包
                &quot;ingress&quot;: {
                    &quot;packets&quot;:{
                        &quot;data&quot;:[
                            &quot;ethernet(...)&quot;, # 與 (A) 相同
                            &quot;ipv4(...)&quot;,
                            &quot;tcp(...)&quot;
                        ],
                        &quot;pktps&quot;: 1000,       # 每秒產生封包的數量 ( packet per second )
                        &quot;duration_time&quot;: 30  # 連續產生封包的時間長度，以秒為單位。
                    }
                },

                # 預期處理的結果
                # 處理的結果有 (a) (b) (c) (d) 這幾種
                #  (a) 封包轉送 ( actions=output:X )
                &quot;egress&quot;: [          # 預期轉送封包
                    &quot;ethernet(...)&quot;,
                    &quot;ipv4(...)&quot;,
                    &quot;tcp(...)&quot;
                ]
                #  (b) Packet in ( actions=CONTROLLER )
                &quot;PACKET_IN&quot;: [       # 預期出現的 Packet in 封包
                    &quot;ethernet(...)&quot;,
                    &quot;ipv4(...)&quot;,
                    &quot;tcp(...)&quot;
                ]
                #  (c) table-miss
                &quot;table-miss&quot;: [      # 期望 table-miss 發生時的 table ID
                    0
                ]
                #  (d) 封包轉送 ( actions=output:X ) 時的流量 ( Throughput ) 測試
                &quot;egress&quot;:[
                    &quot;throughput&quot;:[
                        {
                            &quot;OFPMatch&quot;:{   # 為了 Throughput 測試
                              ...          # 新增在輔助交換器中
                            },             # flow entry 的 match 條件
                            &quot;kbps&quot;:1000    # 指定期望的流量以 Kbps 為單位
                        },
                        {...},
                        {...}
                    ]
                ]
            },
            {...},
            {...}
        ]
    },                               # 測試項目1
    {...},                           # 測試項目2
    {...}                            # 測試項目3
]
</pre></div>
</div>
<p>例如，產生封包中「(B) 一段時間內產生封包」和預期處理結果中「(d) 封包轉送 ( actions=output:X ) 時流量測試」搭配時就可以用來對待測交換器進行流量 ( Throughput ) 的測試。</p>
<div class="admonition note">
<p class="first admonition-title">註解</p>
<p>作為一個測試樣板在 Ryu 的原始碼中，提供了一些樣板檔案來檢查測試參數是否符合 OpenFlow1.3 FlowMod 中的 match / action 訊息。</p>
<blockquote class="last">
<div>ryu/tests/switch/of13</div></blockquote>
</div>
</div>
<div class="section" id="id7">
<h3>執行測試的環境<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>接下來說明測試工具執行時所需的環境。</p>
<a class="reference internal image-reference" href="_images/fig25.png"><img alt="_images/fig25.png" class="align-center" src="_images/fig25.png" /></a>
<p>對於做為一個輔助交換器來說，下面的條件是一個 OpenFlow 交換器必須要支援的。</p>
<ul class="simple">
<li>actions = CONTROLLER Flow Entry 新增</li>
<li>流量監控用的 Flow Entry 新增</li>
<li>透過 Flow Entry 發送 Packet-In 訊息到 Controller（ actions = CONTROLLER ）。</li>
<li>接受 Packet-Out 訊息並發送封包</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">註解</p>
<p>Ryu 原始碼當中利用腳本實作了一個在 mininet 上的測試環境，當中是採用 Open vSwtich 做為待測交換器。</p>
<blockquote>
<div>ryu/tests/switch/run_mininet.py</div></blockquote>
<p class="last">腳本的使用範例請參照 <a class="reference internal" href="#id9">測試工具使用範例</a> 。</p>
</div>
</div>
<div class="section" id="id8">
<h3>執行測試工具的方法<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>測試工具已經被公開在 Ryu 的原始碼當中。</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">原始碼</th>
<th class="head">說明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>ryu/tests/switch/tester.py</td>
<td>測試工具</td>
</tr>
<tr class="row-odd"><td>ryu/tests/switch/of13</td>
<td>測試樣板的一些範例</td>
</tr>
<tr class="row-even"><td>ryu/tests/switch/run_mininet.py</td>
<td>建立測試環境的腳本</td>
</tr>
</tbody>
</table>
<p>使用下面的指令來執行測試工具。</p>
<div class="console highlight-python"><div class="highlight"><pre>$ ryu-manager [--test-switch-target DPID] [--test-switch-tester DPID]
 [--test-switch-dir DIRECTORY] ryu/tests/switch/tester.py
</pre></div>
</div>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="49%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">選項</th>
<th class="head">說明</th>
<th class="head">預設值</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#8211;test-switch-target</td>
<td>待測交換器的 datapath ID</td>
<td>0000000000000001</td>
</tr>
<tr class="row-odd"><td>&#8211;test-switch-tester</td>
<td>輔助交換器的 datapath ID</td>
<td>0000000000000002</td>
</tr>
<tr class="row-even"><td>&#8211;test-switch-dir</td>
<td>測試樣板的存放路徑</td>
<td>ryu/tests/switch/of13</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">註解</p>
<p class="last">測試工具是繼承自 ryu.base.app_manager.RyuApp 的一個應用程式。跟其他的 Ryu 應用程式一樣使用 &#8211;verbose 選項顯示除錯的訊息。</p>
</div>
<p>測試工具啟動之後，待測交換器和輔助交換器會跟 Controller 進行連接，接著測試動作就會使用指定的測試樣板開始進行測試。</p>
</div>
</div>
<div class="section" id="id9">
<h2>測試工具使用範例<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>下面介紹如何使用和測試樣板檔案和原始測試樣板檔案的步驟。</p>
<div class="section" id="id10">
<h3>執行測試樣板檔案的步驟<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>使用 Ryu 的原始碼中測試樣板範本（ ryu/tests/switch/of13 ）來檢查 FlowMod 訊息的 match / action，MeterMod 的訊息和 GroupMod 訊息。</p>
<p>本程序中測試環境和測試環境的產生腳本（ ryu/tests/switch/run_mininet.py ），也因此測試目標是 Open vSwitch。使用 VM image 來打造測試環境以及登入的方法請參照「 <a class="reference internal" href="switching_hub.html#ch-switching-hub"><em>交換器（ Switching Hub ）</em></a> 」以取得更詳細的資料。</p>
<ol class="arabic">
<li><p class="first">建構測試環境</p>
<blockquote>
<div><p>VM 環境的登入，執行測試環境的建構腳本。</p>
<div class="console highlight-python"><div class="highlight"><pre>ryu@ryu-vm:~$ sudo ryu/ryu/tests/switch/run_mininet.py
</pre></div>
</div>
<p>net 命令的執行結果如下。</p>
<div class="console highlight-python"><div class="highlight"><pre>mininet&gt; net
c0
s1 lo:  s1-eth1:s2-eth1 s1-eth2:s2-eth2 s1-eth3:s2-eth3
s2 lo:  s2-eth1:s1-eth1 s2-eth2:s1-eth2 s2-eth3:s1-eth3
</pre></div>
</div>
</div></blockquote>
</li>
<li><p class="first">執行測試工具</p>
<blockquote>
<div><p>為了執行測試工具，打開連線到 Controller 的 xterm。</p>
<div class="console highlight-python"><div class="highlight"><pre>mininet&gt; xterm c0
</pre></div>
</div>
<p>在「Node: c0 (root)」的 xterm 中啟動測試工具。
這時候做為測試樣板檔案的位置，請指定測試樣板範例路徑（ ryu/tests/switch/of13 ）。
接著，由於 mininet 測試環境中待測交換器和輔助交換器的 datapath ID 均有預設值，因此
&#8211;test-switch-target / &#8211;test-switch-tester 選項可省略。</p>
<p>Node: c0:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~$ ryu-manager --test-switch-dir ryu/ryu/tests/switch/of13 ryu/ryu/tests/switch/tester.py
</pre></div>
</div>
<p>測試工具執行之後就會出現下列訊息，並等待待測交換器和輔助交換器連結到 Controller。</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~$ ryu-manager --test-switch-dir ryu/ryu/tests/switch/of13/ ryu/ryu/tests/switch/tester.py
loading app ryu/ryu/tests/switch/tester.py
loading app ryu.controller.ofp_handler
instantiating app ryu/ryu/tests/switch/tester.py of OfTester
target_dpid=0000000000000001
tester_dpid=0000000000000002
Test files directory = ryu/ryu/tests/switch/of13/
instantiating app ryu.controller.ofp_handler of OFPHandler
--- Test start ---
waiting for switches connection...
</pre></div>
</div>
<p>待測交換器和輔助交換器連接 Contreoller 完成，測試開始。</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~$ ryu-manager --test-switch-dir ryu/ryu/tests/switch/of13/ ryu/ryu/tests/switch/tester.py
loading app ryu/ryu/tests/switch/tester.py
loading app ryu.controller.ofp_handler
instantiating app ryu/ryu/tests/switch/tester.py of OfTester
target_dpid=0000000000000001
tester_dpid=0000000000000002
Test files directory = ryu/ryu/tests/switch/of13/
instantiating app ryu.controller.ofp_handler of OFPHandler
--- Test start ---
waiting for switches connection...
dpid=0000000000000002 : Join tester SW.
dpid=0000000000000001 : Join target SW.
action: 00_OUTPUT
    ethernet/ipv4/tcp--&gt;&#39;actions=output:2&#39;      OK
    ethernet/ipv6/tcp--&gt;&#39;actions=output:2&#39;      OK
    ethernet/arp--&gt;&#39;actions=output:2&#39;           OK
action: 11_COPY_TTL_OUT
    ethernet/mpls(ttl=64)/ipv4(ttl=32)/tcp--&gt;&#39;eth_type=0x8847,actions=copy_ttl_out,output:2&#39;        ERROR
        Failed to add flows: OFPErrorMsg[type=0x02, code=0x00]
    ethernet/mpls(ttl=64)/ipv6(hop_limit=32)/tcp--&gt;&#39;eth_type=0x8847,actions=copy_ttl_out,output:2&#39;  ERROR
        Failed to add flows: OFPErrorMsg[type=0x02, code=0x00]
...
</pre></div>
</div>
<p>ryu/tests/switch/of13 資料夾以下的測試樣板全部執行完畢，測試也隨之結束。</p>
</div></blockquote>
</li>
</ol>
<div class="section" id="id11">
<h4>&lt;參考資料&gt;<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>測試樣板範本檔案一覽</p>
<blockquote>
<div>提供測試樣板範本檔案包括，對應 match / actions 各種設定的 Flow Entry 新增：match（ 或不 match ）多數 pattern 的封包改寫、對應滿足一定頻率的後變更優先權的 Meter Entry 新增：Meter Entry 中 match 的封包連續改寫、對應全連接埠的 FLOODING 的 Group Entry 新增：Group Entry 中 match 封包的連續改寫。</div></blockquote>
<div class="console highlight-python"><div class="highlight"><pre>ryu/tests/switch/of13/action:
00_OUTPUT.json              20_POP_MPLS.json
11_COPY_TTL_OUT.json        23_SET_NW_TTL_IPv4.json
12_COPY_TTL_IN.json         23_SET_NW_TTL_IPv6.json
15_SET_MPLS_TTL.json        24_DEC_NW_TTL_IPv4.json
16_DEC_MPLS_TTL.json        24_DEC_NW_TTL_IPv6.json
17_PUSH_VLAN.json           25_SET_FIELD
17_PUSH_VLAN_multiple.json  26_PUSH_PBB.json
18_POP_VLAN.json            26_PUSH_PBB_multiple.json
19_PUSH_MPLS.json           27_POP_PBB.json
19_PUSH_MPLS_multiple.json

ryu/tests/switch/of13/action/25_SET_FIELD:
03_ETH_DST.json        14_TCP_DST_IPv4.json   24_ARP_SHA.json
04_ETH_SRC.json        14_TCP_DST_IPv6.json   25_ARP_THA.json
05_ETH_TYPE.json       15_UDP_SRC_IPv4.json   26_IPV6_SRC.json
06_VLAN_VID.json       15_UDP_SRC_IPv6.json   27_IPV6_DST.json
07_VLAN_PCP.json       16_UDP_DST_IPv4.json   28_IPV6_FLABEL.json
08_IP_DSCP_IPv4.json   16_UDP_DST_IPv6.json   29_ICMPV6_TYPE.json
08_IP_DSCP_IPv6.json   17_SCTP_SRC_IPv4.json  30_ICMPV6_CODE.json
09_IP_ECN_IPv4.json    17_SCTP_SRC_IPv6.json  31_IPV6_ND_TARGET.json
09_IP_ECN_IPv6.json    18_SCTP_DST_IPv4.json  32_IPV6_ND_SLL.json
10_IP_PROTO_IPv4.json  18_SCTP_DST_IPv6.json  33_IPV6_ND_TLL.json
10_IP_PROTO_IPv6.json  19_ICMPV4_TYPE.json    34_MPLS_LABEL.json
11_IPV4_SRC.json       20_ICMPV4_CODE.json    35_MPLS_TC.json
12_IPV4_DST.json       21_ARP_OP.json         36_MPLS_BOS.json
13_TCP_SRC_IPv4.json   22_ARP_SPA.json        37_PBB_ISID.json
13_TCP_SRC_IPv6.json   23_ARP_TPA.json        38_TUNNEL_ID.json

ryu/tests/switch/of13/group:
00_ALL.json           01_SELECT_IP.json            01_SELECT_Weight_IP.json
01_SELECT_Ether.json  01_SELECT_Weight_Ether.json

ryu/tests/switch/of13/match:
00_IN_PORT.json        13_TCP_SRC_IPv4.json   25_ARP_THA.json
02_METADATA.json       13_TCP_SRC_IPv6.json   25_ARP_THA_Mask.json
02_METADATA_Mask.json  14_TCP_DST_IPv4.json   26_IPV6_SRC.json
03_ETH_DST.json        14_TCP_DST_IPv6.json   26_IPV6_SRC_Mask.json
03_ETH_DST_Mask.json   15_UDP_SRC_IPv4.json   27_IPV6_DST.json
04_ETH_SRC.json        15_UDP_SRC_IPv6.json   27_IPV6_DST_Mask.json
04_ETH_SRC_Mask.json   16_UDP_DST_IPv4.json   28_IPV6_FLABEL.json
05_ETH_TYPE.json       16_UDP_DST_IPv6.json   29_ICMPV6_TYPE.json
06_VLAN_VID.json       17_SCTP_SRC_IPv4.json  30_ICMPV6_CODE.json
06_VLAN_VID_Mask.json  17_SCTP_SRC_IPv6.json  31_IPV6_ND_TARGET.json
07_VLAN_PCP.json       18_SCTP_DST_IPv4.json  32_IPV6_ND_SLL.json
08_IP_DSCP_IPv4.json   18_SCTP_DST_IPv6.json  33_IPV6_ND_TLL.json
08_IP_DSCP_IPv6.json   19_ICMPV4_TYPE.json    34_MPLS_LABEL.json
09_IP_ECN_IPv4.json    20_ICMPV4_CODE.json    35_MPLS_TC.json
09_IP_ECN_IPv6.json    21_ARP_OP.json         36_MPLS_BOS.json
10_IP_PROTO_IPv4.json  22_ARP_SPA.json        37_PBB_ISID.json
10_IP_PROTO_IPv6.json  22_ARP_SPA_Mask.json   37_PBB_ISID_Mask.json
11_IPV4_SRC.json       23_ARP_TPA.json        38_TUNNEL_ID.json
11_IPV4_SRC_Mask.json  23_ARP_TPA_Mask.json   38_TUNNEL_ID_Mask.json
12_IPV4_DST.json       24_ARP_SHA.json        39_IPV6_EXTHDR.json
12_IPV4_DST_Mask.json  24_ARP_SHA_Mask.json   39_IPV6_EXTHDR_Mask.json

ryu/tests/switch/of13/meter:
01_DROP_00_KBPS_00_1M.json      02_DSCP_REMARK_00_KBPS_00_1M.json
01_DROP_00_KBPS_01_10M.json     02_DSCP_REMARK_00_KBPS_01_10M.json
01_DROP_00_KBPS_02_100M.json    02_DSCP_REMARK_00_KBPS_02_100M.json
01_DROP_01_PKTPS_00_100.json    02_DSCP_REMARK_01_PKTPS_00_100.json
01_DROP_01_PKTPS_01_1000.json   02_DSCP_REMARK_01_PKTPS_01_1000.json
01_DROP_01_PKTPS_02_10000.json  02_DSCP_REMARK_01_PKTPS_02_10000.json
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="id12">
<h3>原始測試樣板的執行步驟<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>接著，原始的測試樣板製作並執行測試工具的步驟如下所示。</p>
<p>例如 OpenFlow 交換器若要實作路由器的功能， match / actions 的處理功能是必須的，因此我們製作測試樣板來確認他。</p>
<p>1．製作測試樣板檔案</p>
<blockquote>
<div><p>透過路由器的路由表（ Routing table ）實作封包的轉送功能。
下面的 Flow Entry 會確認整個動作是否正確。</p>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">match</th>
<th class="head">actions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IP 網域「192.168.30.0/24」</td>
<td>修改發送端 MAC 位址為 「aa:aa:aa:aa:aa:aa」</td>
</tr>
<tr class="row-odd"><td></td>
<td>修改目的端 MAC 位址為 「bb:bb:bb:bb:bb:bb」</td>
</tr>
<tr class="row-even"><td></td>
<td>降低 TTL 值</td>
</tr>
<tr class="row-odd"><td></td>
<td>封包轉送</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">match</th>
<th class="head">actions</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>IP 網域「192.168.30.0/24」</td>
<td>修改發送端 MAC 位址為 「aa:aa:aa:aa:aa:aa」</td>
</tr>
<tr class="row-odd"><td>ryu/tests/switch/of13</td>
<td>測試樣版的一些範例</td>
</tr>
<tr class="row-even"><td>ryu/tests/switch/run_mininet.py</td>
<td>建立測試環境的腳本</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>依照這個測試樣板產生測試樣板檔案。</p>
<p>檔案名稱： <tt class="docutils literal"><span class="pre">sample_test_pattern.json</span></tt></p>
<div class="sourcecode highlight-python"><div class="highlight"><pre><span class="p">[</span>
   <span class="s">&quot;sample: Router test&quot;</span><span class="p">,</span>
   <span class="p">{</span>
       <span class="s">&quot;description&quot;</span><span class="p">:</span> <span class="s">&quot;static routing table&quot;</span><span class="p">,</span>
       <span class="s">&quot;prerequisite&quot;</span><span class="p">:</span> <span class="p">[</span>
           <span class="p">{</span>
               <span class="s">&quot;OFPFlowMod&quot;</span><span class="p">:</span> <span class="p">{</span>
                   <span class="s">&quot;table_id&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
                   <span class="s">&quot;match&quot;</span><span class="p">:</span> <span class="p">{</span>
                       <span class="s">&quot;OFPMatch&quot;</span><span class="p">:</span> <span class="p">{</span>
                           <span class="s">&quot;oxm_fields&quot;</span><span class="p">:</span> <span class="p">[</span>
                               <span class="p">{</span>
                                   <span class="s">&quot;OXMTlv&quot;</span><span class="p">:</span> <span class="p">{</span>
                                       <span class="s">&quot;field&quot;</span><span class="p">:</span> <span class="s">&quot;eth_type&quot;</span><span class="p">,</span>
                                       <span class="s">&quot;value&quot;</span><span class="p">:</span> <span class="mi">2048</span>
                                   <span class="p">}</span>
                               <span class="p">},</span>
                               <span class="p">{</span>
                                   <span class="s">&quot;OXMTlv&quot;</span><span class="p">:</span> <span class="p">{</span>
                                       <span class="s">&quot;field&quot;</span><span class="p">:</span> <span class="s">&quot;ipv4_dst&quot;</span><span class="p">,</span>
                                       <span class="s">&quot;mask&quot;</span><span class="p">:</span> <span class="mi">4294967040</span><span class="p">,</span>
                                       <span class="s">&quot;value&quot;</span><span class="p">:</span> <span class="s">&quot;192.168.30.0&quot;</span>
                                   <span class="p">}</span>
                               <span class="p">}</span>
                          <span class="p">]</span>
                       <span class="p">}</span>
                   <span class="p">},</span>
                   <span class="s">&quot;instructions&quot;</span><span class="p">:[</span>
                       <span class="p">{</span>
                           <span class="s">&quot;OFPInstructionActions&quot;</span><span class="p">:</span> <span class="p">{</span>
                               <span class="s">&quot;actions&quot;</span><span class="p">:[</span>
                                   <span class="p">{</span>
                                       <span class="s">&quot;OFPActionSetField&quot;</span><span class="p">:{</span>
                                           <span class="s">&quot;field&quot;</span><span class="p">:{</span>
                                               <span class="s">&quot;OXMTlv&quot;</span><span class="p">:{</span>
                                                   <span class="s">&quot;field&quot;</span><span class="p">:</span><span class="s">&quot;eth_src&quot;</span><span class="p">,</span>
                                                   <span class="s">&quot;value&quot;</span><span class="p">:</span><span class="s">&quot;aa:aa:aa:aa:aa:aa&quot;</span>
                                               <span class="p">}</span>
                                           <span class="p">}</span>
                                       <span class="p">}</span>
                                   <span class="p">},</span>
                                   <span class="p">{</span>
                                       <span class="s">&quot;OFPActionSetField&quot;</span><span class="p">:{</span>
                                           <span class="s">&quot;field&quot;</span><span class="p">:{</span>
                                               <span class="s">&quot;OXMTlv&quot;</span><span class="p">:{</span>
                                                   <span class="s">&quot;field&quot;</span><span class="p">:</span><span class="s">&quot;eth_dst&quot;</span><span class="p">,</span>
                                                   <span class="s">&quot;value&quot;</span><span class="p">:</span><span class="s">&quot;bb:bb:bb:bb:bb:bb&quot;</span>
                                               <span class="p">}</span>
                                           <span class="p">}</span>
                                       <span class="p">}</span>
                                   <span class="p">},</span>
                                   <span class="p">{</span>
                                       <span class="s">&quot;OFPActionDecNwTtl&quot;</span><span class="p">:{}</span>
                                   <span class="p">},</span>
                                   <span class="p">{</span>
                                       <span class="s">&quot;OFPActionOutput&quot;</span><span class="p">:</span> <span class="p">{</span>
                                           <span class="s">&quot;port&quot;</span><span class="p">:</span><span class="mi">2</span>
                                       <span class="p">}</span>
                                   <span class="p">}</span>
                               <span class="p">],</span>
                               <span class="s">&quot;type&quot;</span><span class="p">:</span> <span class="mi">4</span>
                           <span class="p">}</span>
                       <span class="p">}</span>
                   <span class="p">]</span>
               <span class="p">}</span>
           <span class="p">}</span>
       <span class="p">],</span>
       <span class="s">&quot;tests&quot;</span><span class="p">:[</span>
           <span class="p">{</span>
               <span class="s">&quot;ingress&quot;</span><span class="p">:[</span>
                   <span class="s">&quot;ethernet(dst=&#39;22:22:22:22:22:22&#39;,src=&#39;11:11:11:11:11:11&#39;,ethertype=2048)&quot;</span><span class="p">,</span>
                   <span class="s">&quot;ipv4(tos=32, proto=6, src=&#39;192.168.10.10&#39;, dst=&#39;192.168.30.10&#39;, ttl=64)&quot;</span><span class="p">,</span>
                   <span class="s">&quot;tcp(dst_port=2222, option=&#39;</span><span class="se">\\</span><span class="s">x00</span><span class="se">\\</span><span class="s">x00</span><span class="se">\\</span><span class="s">x00</span><span class="se">\\</span><span class="s">x00&#39;, src_port=11111)&quot;</span><span class="p">,</span>
                   <span class="s">&quot;&#39;</span><span class="se">\\</span><span class="s">x01</span><span class="se">\\</span><span class="s">x02</span><span class="se">\\</span><span class="s">x03</span><span class="se">\\</span><span class="s">x04</span><span class="se">\\</span><span class="s">x05</span><span class="se">\\</span><span class="s">x06</span><span class="se">\\</span><span class="s">x07</span><span class="se">\\</span><span class="s">x08</span><span class="se">\\</span><span class="s">t</span><span class="se">\\</span><span class="s">n</span><span class="se">\\</span><span class="s">x0b</span><span class="se">\\</span><span class="s">x0c</span><span class="se">\\</span><span class="s">r</span><span class="se">\\</span><span class="s">x0e</span><span class="se">\\</span><span class="s">x0f&#39;&quot;</span>
               <span class="p">],</span>
               <span class="s">&quot;egress&quot;</span><span class="p">:[</span>
                   <span class="s">&quot;ethernet(dst=&#39;bb:bb:bb:bb:bb:bb&#39;,src=&#39;aa:aa:aa:aa:aa:aa&#39;,ethertype=2048)&quot;</span><span class="p">,</span>
                   <span class="s">&quot;ipv4(tos=32, proto=6, src=&#39;192.168.10.10&#39;, dst=&#39;192.168.30.10&#39;, ttl=63)&quot;</span><span class="p">,</span>
                   <span class="s">&quot;tcp(dst_port=2222, option=&#39;</span><span class="se">\\</span><span class="s">x00</span><span class="se">\\</span><span class="s">x00</span><span class="se">\\</span><span class="s">x00</span><span class="se">\\</span><span class="s">x00&#39;, src_port=11111)&quot;</span><span class="p">,</span>
                   <span class="s">&quot;&#39;</span><span class="se">\\</span><span class="s">x01</span><span class="se">\\</span><span class="s">x02</span><span class="se">\\</span><span class="s">x03</span><span class="se">\\</span><span class="s">x04</span><span class="se">\\</span><span class="s">x05</span><span class="se">\\</span><span class="s">x06</span><span class="se">\\</span><span class="s">x07</span><span class="se">\\</span><span class="s">x08</span><span class="se">\\</span><span class="s">t</span><span class="se">\\</span><span class="s">n</span><span class="se">\\</span><span class="s">x0b</span><span class="se">\\</span><span class="s">x0c</span><span class="se">\\</span><span class="s">r</span><span class="se">\\</span><span class="s">x0e</span><span class="se">\\</span><span class="s">x0f&#39;&quot;</span>
               <span class="p">]</span>
           <span class="p">}</span>
       <span class="p">]</span>
   <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>2．建構測試環境</p>
<blockquote>
<div>使用測試環境建置腳本來完成測試環境。詳細的操作細節請參照 <a class="reference internal" href="#id10">執行測試樣板檔案的步驟</a> 。</div></blockquote>
<p>3．執行測試工具</p>
<blockquote>
<div><p>使用 Conrtroller 的 xterm 視窗，指定先前做好的測試樣板檔案位置並執行測試工具。
可以使用 &#8211;test-switch-dir 選項來指定樣板檔案的位置。
如果想要確認收送封包的內容，可以指定 &#8211;verbose 選項。</p>
<p>Node: c0:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~$ ryu-manager --verbose --test-switch-dir ./sample_test_pattern.json ryu/ryu/tests/switch/tester.py
</pre></div>
</div>
<p>待測交換器和輔助交換器已經和 Controller 連接的情況下，測試即將開始。</p>
<p>「dpid=0000000000000002 : receive_packet…」的訊息在記錄檔中，表示測試樣板檔案的 egress 封包已經設定完成，即將送出預期的封包。
然後，我們截取部分測試工具的輸出記錄檔。</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~$ ryu-manager --verbose --test-switch-dir ./sample_test_pattern.json ryu/ryu/tests/switch/tester.py
loading app ryu/tests/switch/tester.py
loading app ryu.controller.ofp_handler
instantiating app ryu.controller.ofp_handler of OFPHandler
instantiating app ryu/tests/switch/tester.py of OfTester
target_dpid=0000000000000001
tester_dpid=0000000000000002
Test files directory = ./sample_test_pattern.json

--- Test start ---
waiting for switches connection...

dpid=0000000000000002 : Join tester SW.
dpid=0000000000000001 : Join target SW.

sample: Router test

send_packet:[ethernet(dst=&#39;22:22:22:22:22:22&#39;,ethertype=2048,src=&#39;11:11:11:11:11:11&#39;), ipv4(csum=53560,dst=&#39;192.168.30.10&#39;,flags=0,header_length=5,identification=0,offset=0,option=None,proto=6,src=&#39;192.168.10.10&#39;,tos=32,total_length=59,ttl=64,version=4), tcp(ack=0,bits=0,csum=33311,dst_port=2222,offset=6,option=&#39;\x00\x00\x00\x00&#39;,seq=0,src_port=11111,urgent=0,window_size=0), &#39;\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#39;]
egress:[ethernet(dst=&#39;bb:bb:bb:bb:bb:bb&#39;,ethertype=2048,src=&#39;aa:aa:aa:aa:aa:aa&#39;), ipv4(csum=53816,dst=&#39;192.168.30.10&#39;,flags=0,header_length=5,identification=0,offset=0,option=None,proto=6,src=&#39;192.168.10.10&#39;,tos=32,total_length=59,ttl=63,version=4), tcp(ack=0,bits=0,csum=33311,dst_port=2222,offset=6,option=&#39;\x00\x00\x00\x00&#39;,seq=0,src_port=11111,urgent=0,window_size=0), &#39;\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#39;]
packet_in:[]
dpid=0000000000000002 : receive_packet[ethernet(dst=&#39;bb:bb:bb:bb:bb:bb&#39;,ethertype=2048,src=&#39;aa:aa:aa:aa:aa:aa&#39;), ipv4(csum=53816,dst=&#39;192.168.30.10&#39;,flags=0,header_length=5,identification=0,offset=0,option=None,proto=6,src=&#39;192.168.10.10&#39;,tos=32,total_length=59,ttl=63,version=4), tcp(ack=0,bits=0,csum=33311,dst_port=2222,offset=6,option=&#39;\x00\x00\x00\x00&#39;,seq=0,src_port=11111,urgent=0,window_size=0), &#39;\x01\x02\x03\x04\x05\x06\x07\x08\t\n\x0b\x0c\r\x0e\x0f&#39;]
    static routing table                            OK
---  Test end  ---
</pre></div>
</div>
<p>下面列出實際的 OpenFlow 交換器所登錄的 Flow Entry。
你可以看到測試工具所產生的封包 match 所登錄的 Flow Entry，
而且 n_packets 計數器數字被增加。</p>
<p>Node: s1:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ovs-ofctl -O OpenFlow13 dump-flows s1
OFPST_FLOW reply (OF1.3) (xid=0x2):
 cookie=0x0, duration=56.217s, table=0, n_packets=1, n_bytes=73, priority=0,ip,nw_dst=192.168.30.0/24 actions=set_field:aa:aa:aa:aa:aa:aa-&gt;eth_src,set_field:bb:bb:bb:bb:bb:bb-&gt;eth_dst,dec_ttl,output:2
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="id13">
<h3>錯誤訊息一覽表<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<p>下面列出所有測試工具可能會顯示的錯誤訊息。</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">錯誤訊息</th>
<th class="head">說明</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Failed to initialize flow tables: barrier request timeout.</td>
<td>初始待測交換器的 flow entry 失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to initialize flow tables: [err_msg]</td>
<td>初始待測交換器的 flow entry 失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接收到 FlowMod 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to initialize flow tables of tester_sw: barrier request timeout.</td>
<td>初始輔助交換器的 flow entry 失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to initialize flow tables of tester_sw: [err_msg]</td>
<td>初始輔助交換器的 flow entry 失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接收到 FlowMod 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to add flows: barrier request timeout.</td>
<td>待測交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add flows: [err_msg]</td>
<td>待測交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接收到 FlowMod 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to add flows to tester_sw: barrier request timeout.</td>
<td>輔助交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add flows to tester_sw: [err_msg]</td>
<td>輔助交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接收到 FlowMod 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to add meters: barrier request timeout.</td>
<td>待測交換器的 meter entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add meters: [err_msg]</td>
<td>待測交換器的 meter entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接收到 MeterMod 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to add groups: barrier request timeout.</td>
<td>待測交換器的 group entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add groups: [err_msg]</td>
<td>待測交換器的 group entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到 GroupMod 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Added incorrect flows: [flows]</td>
<td>待測交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(新增的 flow entry 不符合規範)</td>
</tr>
<tr class="row-even"><td>Failed to add flows: flow stats request timeout.</td>
<td>待測交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(FlowStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add flows: [err_msg]</td>
<td>待測交換器的 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到 FlowStats Request 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Added incorrect meters: [meters]</td>
<td>待測交換器的 meter entry 新增錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(新增的 meter entry 不符合規範)</td>
</tr>
<tr class="row-even"><td>Failed to add meters: meter config stats request timeout.</td>
<td>待測交換器的 meter entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(MeterConfigStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add meters: [err_msg]</td>
<td>待測交換器的 meter entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到 MeterConfigStats Request 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Added incorrect groups: [groups]</td>
<td>待測交換器的 group entry 新增錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(新增的 group entry 不符合規範)</td>
</tr>
<tr class="row-even"><td>Failed to add groups: group desc stats request timeout.</td>
<td>待測交換器的 group entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(GroupDescStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add groups: [err_msg]</td>
<td>待測交換器的 group entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到 GroupDescStats Request 錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to request port stats from target: request timeout.</td>
<td>待測交換器的 PortStats 取得失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(PortStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to request port stats from target: [err_msg]</td>
<td>待測交換器的 PortStats 取得失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到 PortStats Request 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to request port stats from tester: request timeout.</td>
<td>輔助交換器的 PortStats 取得失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(PortStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to request port stats from tester: [err_msg]</td>
<td>輔助交換器的 PortStats 取得失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到 PortStats Request 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Received incorrect [packet]</td>
<td>封包接收錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接受到錯誤的封包)</td>
</tr>
<tr class="row-even"><td>Receiving timeout: [detail]</td>
<td>封包接收錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(作業逾時)</td>
</tr>
<tr class="row-even"><td>Faild to send packet: barrier request timeout.</td>
<td>封包傳送失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Barrier Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Faild to send packet: [err_msg]</td>
<td>封包傳送失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(Packet-Out 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Table-miss error: increment in matched_count.</td>
<td>table-miss 錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(match flow)</td>
</tr>
<tr class="row-even"><td>Table-miss error: no change in lookup_count.</td>
<td>table-miss 錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(封包不會被 flow table 所處理)</td>
</tr>
<tr class="row-even"><td>Failed to request table stats: request timeout.</td>
<td>table-miss 失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(TableStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to request table stats: [err_msg]</td>
<td>table-miss 失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(接收到 TableStats Request 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Added incorrect flows to tester_sw: [flows]</td>
<td>輔助交換器 flow entry 新增錯誤</td>
</tr>
<tr class="row-odd"><td></td>
<td>(新增的 flow entry 不符合規範)</td>
</tr>
<tr class="row-even"><td>Failed to add flows to tester_sw: flow stats request timeout.</td>
<td>輔助交換器 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(FlowStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to add flows to tester_sw: [err_msg]</td>
<td>輔助交換器 flow entry 新增失敗</td>
</tr>
<tr class="row-odd"><td></td>
<td>(FlowStats Request 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Failed to request flow stats: request timeout.</td>
<td>測試 Throughput 時，輔助交換器 flow entry</td>
</tr>
<tr class="row-odd"><td></td>
<td>request 失敗 (FlowStats Request 作業逾時)</td>
</tr>
<tr class="row-even"><td>Failed to request flow stats: [err_msg]</td>
<td>測試 Throughput 時，輔助交換器 flow entry</td>
</tr>
<tr class="row-odd"><td></td>
<td>request 失敗 (FlowStats Request 的錯誤訊息)</td>
</tr>
<tr class="row-even"><td>Received unexpected throughput: [detail]</td>
<td>測試 Throughput 時，得到非預期的結果</td>
</tr>
<tr class="row-odd"><td>Disconnected from switch</td>
<td>待測交換器或輔助交換器的連結中斷</td>
</tr>
</tbody>
</table>
</div></blockquote>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">內容目錄</a></h3>
  <ul>
<li><a class="reference internal" href="#">OpenFlow 交換器測試工具</a><ul>
<li><a class="reference internal" href="#id1">測試工具概要</a><ul>
<li><a class="reference internal" href="#id2">操作綱要</a><ul>
<li><a class="reference internal" href="#id3">測試驗證環境示意圖</a></li>
<li><a class="reference internal" href="#id4">輸出測試結果</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id5">使用方法</a><ul>
<li><a class="reference internal" href="#id6">測試範本檔案</a></li>
<li><a class="reference internal" href="#id7">執行測試的環境</a></li>
<li><a class="reference internal" href="#id8">執行測試工具的方法</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id9">測試工具使用範例</a><ul>
<li><a class="reference internal" href="#id10">執行測試樣板檔案的步驟</a><ul>
<li><a class="reference internal" href="#id11">&lt;參考資料&gt;</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id12">原始測試樣板的執行步驟</a></li>
<li><a class="reference internal" href="#id13">錯誤訊息一覽表</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>上一個主題</h4>
  <p class="topless"><a href="rest_router.html"
                        title="上一章">路由器（ Router ）</a></p>
  <h4>下一個主題</h4>
  <p class="topless"><a href="arch.html"
                        title="下一章">組織架構</a></p>
  <h3>本頁</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/switch_test_tool.txt"
           rel="nofollow">顯示原始碼</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>快速搜尋</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>瀏覽</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="總索引"
             >索引</a></li>
        <li class="right" >
          <a href="arch.html" title="組織架構"
             >下一頁</a> |</li>
        <li class="right" >
          <a href="rest_router.html" title="路由器（ Router ）"
             >上一頁</a> |</li>
        <li><a href="index.html">Ryubook 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, RYU project team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>