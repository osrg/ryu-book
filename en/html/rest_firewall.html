<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Firewall &mdash; Ryubook 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Ryubook 1.0 documentation" href="index.html" />
    <link rel="next" title="Router" href="rest_router.html" />
    <link rel="prev" title="OF-Config Library" href="of_config.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="rest_router.html" title="Router"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="of_config.html" title="OF-Config Library"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Ryubook 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="firewall">
<span id="ch-rest-firewall"></span><h1>Firewall<a class="headerlink" href="#firewall" title="Permalink to this headline">¶</a></h1>
<p>This section describes how to use Firewall, which can be set using REST.</p>
<div class="section" id="example-of-operation-of-a-single-tenant">
<h2>Example of operation of a single tenant<a class="headerlink" href="#example-of-operation-of-a-single-tenant" title="Permalink to this headline">¶</a></h2>
<p>The following shows an example of creating a topology such as the following and adding or deleting a route or address for switch s1.</p>
<a class="reference internal image-reference" href="_images/fig13.png"><img alt="_images/fig13.png" class="align-center" src="_images/fig13.png" style="width: 405.6px; height: 295.2px;" /></a>
<div class="section" id="environment-building">
<h3>Environment Building<a class="headerlink" href="#environment-building" title="Permalink to this headline">¶</a></h3>
<p>First, build an environment on Mininet. The commands to be entered are the same as &#8220;<a class="reference internal" href="switching_hub.html#ch-switching-hub"><em>Switching Hub</em></a>&#8220;</p>
<div class="console highlight-python"><div class="highlight"><pre>ryu@ryu-vm:~$ sudo mn --topo single,3 --mac --switch ovsk --controller remote -x
*** Creating network
*** Adding controller
Unable to contact the remote controller at 127.0.0.1:6633
*** Adding hosts:
h1 h2 h3
*** Adding switches:
s1
*** Adding links:
(h1, s1) (h2, s1) (h3, s1)
*** Configuring hosts
h1 h2 h3
*** Running terms on localhost:10.0
*** Starting controller
*** Starting 1 switches
s1

*** Starting CLI:
mininet&gt;
</pre></div>
</div>
<p>Also, start another xterm for the controller.</p>
<div class="console highlight-python"><div class="highlight"><pre>mininet&gt; xterm c0
mininet&gt;
</pre></div>
</div>
<p>Next, set the version of OpenFlow to be used in each router to 1.3.</p>
<p>switch: s1 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ovs-vsctl set Bridge s1 protocols=OpenFlow13
</pre></div>
</div>
<p>Finally, start rest_firewall on xterm of the controller.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ryu-manager ryu.app.rest_firewall
loading app ryu.app.rest_firewall
loading app ryu.controller.ofp_handler
instantiating app None of DPSet
creating context dpset
creating context wsgi
instantiating app ryu.app.rest_firewall of RestFirewallAPI
instantiating app ryu.controller.ofp_handler of OFPHandler
(2210) wsgi starting up on http://0.0.0.0:8080/
</pre></div>
</div>
<p>After a successful connection between the router and Ryu, the following message appears.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>[FW][INFO] switch_id=0000000000000001: Join as firewall
</pre></div>
</div>
</div>
<div class="section" id="changing-in-the-initial-state">
<h3>Changing in the initial state<a class="headerlink" href="#changing-in-the-initial-state" title="Permalink to this headline">¶</a></h3>
<p>Immediately after starting the firewall, it was set to disable status to cut off all communication. Enable it with the following command.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For details of REST API used in the following description, please see &#8220;<a class="reference internal" href="#rest-api-list">REST API List</a>&#8221; at the end of the section.</p>
</div>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X PUT http://localhost:8080/firewall/module/enable/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: {
        &quot;result&quot;: &quot;success&quot;,
        &quot;details&quot;: &quot;firewall running.&quot;
      }
    }
  ]

root@ryu-vm:~# curl http://localhost:8080/firewall/module/status
  [
    {
      &quot;status&quot;: &quot;enable&quot;,
      &quot;switch_id&quot;: &quot;0000000000000001&quot;
    }
  ]
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The result of the REST command is formatted for easy viewing.</p>
</div>
<p>Check ping communication from h1 to h2. Since access permission rules are not set, communication will be blocked.</p>
<p>host: h1:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ping 10.0.0.2
PING 10.0.0.2 (10.0.0.2) 56(84) bytes of data.
^C
--- 10.0.0.2 ping statistics ---
20 packets transmitted, 0 received, 100% packet loss, time 19003ms
</pre></div>
</div>
<p>Packets that are blocked are output to the log.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>[FW][INFO] dpid=0000000000000001: Blocked packet = ethernet(dst=&#39;00:00:00:00:00:02&#39;,ethertype=2048,src=&#39;00:00:00:00:00:01&#39;), ipv4(csum=9895,dst=&#39;10.0.0.2&#39;,flags=2,header_length=5,identification=0,offset=0,option=None,proto=1,src=&#39;10.0.0.1&#39;,tos=0,total_length=84,ttl=64,version=4), icmp(code=0,csum=55644,data=echo(data=&#39;K\x8e\xaeR\x00\x00\x00\x00=\xc6\r\x00\x00\x00\x00\x00\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !&quot;#$%&amp;\&#39;()*+,-./01234567&#39;,id=6952,seq=1),type=8)
...
</pre></div>
</div>
</div>
<div class="section" id="adding-a-rule">
<h3>Adding a Rule<a class="headerlink" href="#adding-a-rule" title="Permalink to this headline">¶</a></h3>
<p>Add a rule to permit pinging between h1 and h2. You need to add the rule for both ways.</p>
<p>Let&#8217;s add the following rules. Rule ID is assigned automatically.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="21%" />
<col width="19%" />
<col width="19%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Source</th>
<th class="head">Destination</th>
<th class="head">Protocol</th>
<th class="head">Permission</th>
<th class="head">(Rule ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>10.0.0.1/32</td>
<td>10.0.0.2/32</td>
<td>ICMP</td>
<td>Allow</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>10.0.0.2/32</td>
<td>10.0.0.1/32</td>
<td>ICMP</td>
<td>Allow</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X POST -d &#39;{&quot;nw_src&quot;: &quot;10.0.0.1/32&quot;, &quot;nw_dst&quot;: &quot;10.0.0.2/32&quot;, &quot;nw_proto&quot;: &quot;ICMP&quot;}&#39; http://localhost:8080/firewall/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Rule added. : rule_id=1&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;nw_src&quot;: &quot;10.0.0.2/32&quot;, &quot;nw_dst&quot;: &quot;10.0.0.1/32&quot;, &quot;nw_proto&quot;: &quot;ICMP&quot;}&#39; http://localhost:8080/firewall/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Rule added. : rule_id=2&quot;
        }
      ]
    }
  ]
</pre></div>
</div>
<p>Added rules are registered in the switch as flow entries.</p>
<p>switch: s1 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ovs-ofctl -O openflow13 dump-flows s1
OFPST_FLOW reply (OF1.3) (xid=0x2):
 cookie=0x0, duration=823.705s, table=0, n_packets=10, n_bytes=420, priority=65534,arp actions=NORMAL
 cookie=0x0, duration=542.472s, table=0, n_packets=20, n_bytes=1960, priority=0 actions=CONTROLLER:128
 cookie=0x1, duration=145.05s, table=0, n_packets=0, n_bytes=0, priority=1,icmp,nw_src=10.0.0.1,nw_dst=10.0.0.2 actions=NORMAL
 cookie=0x2, duration=118.265s, table=0, n_packets=0, n_bytes=0, priority=1,icmp,nw_src=10.0.0.2,nw_dst=10.0.0.1 actions=NORMAL
</pre></div>
</div>
<p>In addition, add a rule to allow all IPv4 packets, including ping, between h3 and h2.</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="21%" />
<col width="19%" />
<col width="19%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Source</th>
<th class="head">Destination</th>
<th class="head">Protocol</th>
<th class="head">Permission</th>
<th class="head">(Rule ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>10.0.0.2/32</td>
<td>10.0.0.3/32</td>
<td>any</td>
<td>Allow</td>
<td>3</td>
</tr>
<tr class="row-odd"><td>10.0.0.3/32</td>
<td>10.0.0.2/32</td>
<td>any</td>
<td>Allow</td>
<td>4</td>
</tr>
</tbody>
</table>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X POST -d &#39;{&quot;nw_src&quot;: &quot;10.0.0.2/32&quot;, &quot;nw_dst&quot;: &quot;10.0.0.3/32&quot;}&#39; http://localhost:8080/firewall/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Rule added. : rule_id=3&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;nw_src&quot;: &quot;10.0.0.3/32&quot;, &quot;nw_dst&quot;: &quot;10.0.0.2/32&quot;}&#39; http://localhost:8080/firewall/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Rule added. : rule_id=4&quot;
        }
      ]
    }
  ]
</pre></div>
</div>
<p>Added rules are registered in the switch as flow entries.</p>
<p>switch: s1 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>OFPST_FLOW reply (OF1.3) (xid=0x2):
 cookie=0x3, duration=12.724s, table=0, n_packets=0, n_bytes=0, priority=1,ip,nw_src=10.0.0.2,nw_dst=10.0.0.3 actions=NORMAL
 cookie=0x4, duration=3.668s, table=0, n_packets=0, n_bytes=0, priority=1,ip,nw_src=10.0.0.3,nw_dst=10.0.0.2 actions=NORMAL
 cookie=0x0, duration=1040.802s, table=0, n_packets=10, n_bytes=420, priority=65534,arp actions=NORMAL
 cookie=0x0, duration=759.569s, table=0, n_packets=20, n_bytes=1960, priority=0 actions=CONTROLLER:128
 cookie=0x1, duration=362.147s, table=0, n_packets=0, n_bytes=0, priority=1,icmp,nw_src=10.0.0.1,nw_dst=10.0.0.2 actions=NORMAL
 cookie=0x2, duration=335.362s, table=0, n_packets=0, n_bytes=0, priority=1,icmp,nw_src=10.0.0.2,nw_dst=10.0.0.1 actions=NORMAL
</pre></div>
</div>
<p>Priority can be set to rules.</p>
<p>Try to add a rule to block pings (ICMP) between h3 and h2.
Set a value greater than 1, which is default value of priority.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="18%" />
<col width="18%" />
<col width="14%" />
<col width="17%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">(Priority)</th>
<th class="head">Source</th>
<th class="head">Destination</th>
<th class="head">Protocol</th>
<th class="head">Permission</th>
<th class="head">(Rule ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>10</td>
<td>10.0.0.2/32</td>
<td>10.0.0.3/32</td>
<td>ICMP</td>
<td>Block</td>
<td>5</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>10.0.0.3/32</td>
<td>10.0.0.2/32</td>
<td>ICMP</td>
<td>Block</td>
<td>6</td>
</tr>
</tbody>
</table>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X POST -d  &#39;{&quot;nw_src&quot;: &quot;10.0.0.2/32&quot;, &quot;nw_dst&quot;: &quot;10.0.0.3/32&quot;, &quot;nw_proto&quot;: &quot;ICMP&quot;, &quot;actions&quot;: &quot;DENY&quot;, &quot;priority&quot;: &quot;10&quot;}&#39; http://localhost:8080/firewall/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Rule added. : rule_id=5&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d  &#39;{&quot;nw_src&quot;: &quot;10.0.0.3/32&quot;, &quot;nw_dst&quot;: &quot;10.0.0.2/32&quot;, &quot;nw_proto&quot;: &quot;ICMP&quot;, &quot;actions&quot;: &quot;DENY&quot;, &quot;priority&quot;: &quot;10&quot;}&#39; http://localhost:8080/firewall/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Rule added. : rule_id=6&quot;
        }
      ]
    }
  ]
</pre></div>
</div>
<p>Added rules are registered in the switch as flow entries.</p>
<p>switch: s1 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ovs-ofctl -O openflow13 dump-flows s1
OFPST_FLOW reply (OF1.3) (xid=0x2):
 cookie=0x3, duration=242.155s, table=0, n_packets=0, n_bytes=0, priority=1,ip,nw_src=10.0.0.2,nw_dst=10.0.0.3 actions=NORMAL
 cookie=0x4, duration=233.099s, table=0, n_packets=0, n_bytes=0, priority=1,ip,nw_src=10.0.0.3,nw_dst=10.0.0.2 actions=NORMAL
 cookie=0x0, duration=1270.233s, table=0, n_packets=10, n_bytes=420, priority=65534,arp actions=NORMAL
 cookie=0x0, duration=989s, table=0, n_packets=20, n_bytes=1960, priority=0 actions=CONTROLLER:128
 cookie=0x5, duration=26.984s, table=0, n_packets=0, n_bytes=0, priority=10,icmp,nw_src=10.0.0.2,nw_dst=10.0.0.3 actions=CONTROLLER:128
 cookie=0x1, duration=591.578s, table=0, n_packets=0, n_bytes=0, priority=1,icmp,nw_src=10.0.0.1,nw_dst=10.0.0.2 actions=NORMAL
 cookie=0x6, duration=14.523s, table=0, n_packets=0, n_bytes=0, priority=10,icmp,nw_src=10.0.0.3,nw_dst=10.0.0.2 actions=CONTROLLER:128
 cookie=0x2, duration=564.793s, table=0, n_packets=0, n_bytes=0, priority=1,icmp,nw_src=10.0.0.2,nw_dst=10.0.0.1 actions=NORMAL
</pre></div>
</div>
</div>
<div class="section" id="confirming-rules">
<h3>Confirming Rules<a class="headerlink" href="#confirming-rules" title="Permalink to this headline">¶</a></h3>
<p>Confirm the rules that have been set.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl http://localhost:8080/firewall/rules/0000000000000001
  [
    {
      &quot;access_control_list&quot;: [
        {
          &quot;rules&quot;: [
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;nw_dst&quot;: &quot;10.0.0.3&quot;,
              &quot;nw_src&quot;: &quot;10.0.0.2&quot;,
              &quot;rule_id&quot;: 3,
              &quot;actions&quot;: &quot;ALLOW&quot;
            },
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;nw_dst&quot;: &quot;10.0.0.2&quot;,
              &quot;nw_src&quot;: &quot;10.0.0.3&quot;,
              &quot;rule_id&quot;: 4,
              &quot;actions&quot;: &quot;ALLOW&quot;
            },
            {
              &quot;priority&quot;: 10,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;nw_proto&quot;: &quot;ICMP&quot;,
              &quot;nw_dst&quot;: &quot;10.0.0.3&quot;,
              &quot;nw_src&quot;: &quot;10.0.0.2&quot;,
              &quot;rule_id&quot;: 5,
              &quot;actions&quot;: &quot;DENY&quot;
            },
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;nw_proto&quot;: &quot;ICMP&quot;,
              &quot;nw_dst&quot;: &quot;10.0.0.2&quot;,
              &quot;nw_src&quot;: &quot;10.0.0.1&quot;,
              &quot;rule_id&quot;: 1,
              &quot;actions&quot;: &quot;ALLOW&quot;
            },
            {
              &quot;priority&quot;: 10,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;nw_proto&quot;: &quot;ICMP&quot;,
              &quot;nw_dst&quot;: &quot;10.0.0.2&quot;,
              &quot;nw_src&quot;: &quot;10.0.0.3&quot;,
              &quot;rule_id&quot;: 6,
              &quot;actions&quot;: &quot;DENY&quot;
            },
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;nw_proto&quot;: &quot;ICMP&quot;,
              &quot;nw_dst&quot;: &quot;10.0.0.1&quot;,
              &quot;nw_src&quot;: &quot;10.0.0.2&quot;,
              &quot;rule_id&quot;: 2,
              &quot;actions&quot;: &quot;ALLOW&quot;
            }
          ]
        }
      ],
      &quot;switch_id&quot;: &quot;0000000000000001&quot;
    }
  ]
</pre></div>
</div>
<p>The following shows the rules set.</p>
<a class="reference internal image-reference" href="_images/fig21.png"><img alt="_images/fig21.png" class="align-center" src="_images/fig21.png" style="width: 405.2px; height: 295.2px;" /></a>
<p>Try to send a ping from h1 to h2. Since rules to allow communication are set, the ping will go through.</p>
<p>host: h1:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ping 10.0.0.2
PING 10.0.0.2 (10.0.0.2) 56(84) bytes of data.
64 bytes from 10.0.0.2: icmp_req=1 ttl=64 time=0.419 ms
64 bytes from 10.0.0.2: icmp_req=2 ttl=64 time=0.047 ms
64 bytes from 10.0.0.2: icmp_req=3 ttl=64 time=0.060 ms
64 bytes from 10.0.0.2: icmp_req=4 ttl=64 time=0.033 ms
...
</pre></div>
</div>
<p>Packets from h1 to h2 other than ping are blocked by the firewall. For example, if you execute wget from h1 to h2, a log is output that packets were blocked.</p>
<p>host: h1:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# wget http://10.0.0.2
--2013-12-16 15:00:38--  http://10.0.0.2/
Connecting to 10.0.0.2:80... ^C
</pre></div>
</div>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>[FW][INFO] dpid=0000000000000001: Blocked packet = ethernet(dst=&#39;00:00:00:00:00:02&#39;,ethertype=2048,src=&#39;00:00:00:00:00:01&#39;), ipv4(csum=4812,dst=&#39;10.0.0.2&#39;,flags=2,header_length=5,identification=5102,offset=0,option=None,proto=6,src=&#39;10.0.0.1&#39;,tos=0,total_length=60,ttl=64,version=4), tcp(ack=0,bits=2,csum=45753,dst_port=80,offset=10,option=&#39;\x02\x04\x05\xb4\x04\x02\x08\n\x00H:\x99\x00\x00\x00\x00\x01\x03\x03\t&#39;,seq=1021913463,src_port=42664,urgent=0,window_size=14600)
...
</pre></div>
</div>
<p>Between h2 and 3h, packets other than ping can communicate. For example, if you execute ssh from h2 to h3, it will not output a log that packets were blocked. (Since sshd is not operating in h3, communication by ssh will fail.)</p>
<p>host: h2:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ssh 10.0.0.3
ssh: connect to host 10.0.0.3 port 22: Connection refused
</pre></div>
</div>
<p>If you execute ping from h2 to h3, a log is output that packets were blocked by the firewall.</p>
<p>host: h2:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ping 10.0.0.3
PING 10.0.0.3 (10.0.0.3) 56(84) bytes of data.
^C
--- 10.0.0.3 ping statistics ---
8 packets transmitted, 0 received, 100% packet loss, time 7055ms
</pre></div>
</div>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>[FW][INFO] dpid=0000000000000001: Blocked packet = ethernet(dst=&#39;00:00:00:00:00:03&#39;,ethertype=2048,src=&#39;00:00:00:00:00:02&#39;), ipv4(csum=9893,dst=&#39;10.0.0.3&#39;,flags=2,header_length=5,identification=0,offset=0,option=None,proto=1,src=&#39;10.0.0.2&#39;,tos=0,total_length=84,ttl=64,version=4), icmp(code=0,csum=35642,data=echo(data=&#39;\r\x12\xcaR\x00\x00\x00\x00\xab\x8b\t\x00\x00\x00\x00\x00\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !&quot;#$%&amp;\&#39;()*+,-./01234567&#39;,id=8705,seq=1),type=8)
...
</pre></div>
</div>
</div>
<div class="section" id="deleting-a-rule">
<h3>Deleting a Rule<a class="headerlink" href="#deleting-a-rule" title="Permalink to this headline">¶</a></h3>
<p>Delete the &#8220;rule_id:5&#8221; and &#8220;rule_id:6&#8221; rules.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X DELETE -d &#39;{&quot;rule_id&quot;: &quot;5&quot;}&#39; http://localhost:8080/firewall/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Rule deleted. : ruleID=5&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X DELETE -d &#39;{&quot;rule_id&quot;: &quot;6&quot;}&#39; http://localhost:8080/firewall/rules/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;details&quot;: &quot;Rule deleted. : ruleID=6&quot;
        }
      ]
    }
  ]
</pre></div>
</div>
<p>The following shows the current rules.</p>
<a class="reference internal image-reference" href="_images/fig31.png"><img alt="_images/fig31.png" class="align-center" src="_images/fig31.png" style="width: 405.6px; height: 295.6px;" /></a>
<p>Let&#8217;s confirm them. Since the rule to block pings (ICMP) between h2 and h3 is deleted, you can see that ping can now communicate.</p>
<p>host: h2:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ping 10.0.0.3
PING 10.0.0.3 (10.0.0.3) 56(84) bytes of data.
64 bytes from 10.0.0.3: icmp_req=1 ttl=64 time=0.841 ms
64 bytes from 10.0.0.3: icmp_req=2 ttl=64 time=0.036 ms
64 bytes from 10.0.0.3: icmp_req=3 ttl=64 time=0.026 ms
64 bytes from 10.0.0.3: icmp_req=4 ttl=64 time=0.033 ms
...
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-of-the-operation-of-a-multi-tenant">
<h2>Example of the Operation of a Multi-tenant<a class="headerlink" href="#example-of-the-operation-of-a-multi-tenant" title="Permalink to this headline">¶</a></h2>
<p>The following shows an example of creating a topology where tenants are divided by VLAN such as the following and routes or addresses for each switch s1 are added or deleted and communication availability between each host is verified.</p>
<a class="reference internal image-reference" href="_images/fig4.png"><img alt="_images/fig4.png" class="align-center" src="_images/fig4.png" style="width: 399.6px; height: 355.6px;" /></a>
<div class="section" id="building-an-environment">
<h3>Building an Environment<a class="headerlink" href="#building-an-environment" title="Permalink to this headline">¶</a></h3>
<p>As with the example of Single-tenant, build an environment on Mininet and start another xterm for controller. Note that there is one more host to be used than before.</p>
<div class="console highlight-python"><div class="highlight"><pre>ryu@ryu-vm:~$ sudo mn --topo single,4 --mac --switch ovsk --controller remote -x
*** Creating network
*** Adding controller
Unable to contact the remote controller at 127.0.0.1:6633
*** Adding hosts:
h1 h2 h3 h4
*** Adding switches:
s1
*** Adding links:
(h1, s1) (h2, s1) (h3, s1) (h4, s1)
*** Configuring hosts
h1 h2 h3 h4
*** Running terms on localhost:10.0
*** Starting controller
*** Starting 1 switches
s1

*** Starting CLI:
mininet&gt; xterm c0
mininet&gt;
</pre></div>
</div>
<p>Next, set the VLAN ID to the interface of each host.</p>
<p>host: h1:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ip addr del 10.0.0.1/8 dev h1-eth0
root@ryu-vm:~# ip link add link h1-eth0 name h1-eth0.2 type vlan id 2
root@ryu-vm:~# ip addr add 10.0.0.1/8 dev h1-eth0.2
root@ryu-vm:~# ip link set dev h1-eth0.2 up
</pre></div>
</div>
<p>host: h2:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ip addr del 10.0.0.2/8 dev h2-eth0
root@ryu-vm:~# ip link add link h2-eth0 name h2-eth0.2 type vlan id 2
root@ryu-vm:~# ip addr add 10.0.0.2/8 dev h2-eth0.2
root@ryu-vm:~# ip link set dev h2-eth0.2 up
</pre></div>
</div>
<p>host: h3:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ip addr del 10.0.0.3/8 dev h3-eth0
root@ryu-vm:~# ip link add link h3-eth0 name h3-eth0.110 type vlan id 110
root@ryu-vm:~# ip addr add 10.0.0.3/8 dev h3-eth0.110
root@ryu-vm:~# ip link set dev h3-eth0.110 up
</pre></div>
</div>
<p>host: h4:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ip addr del 10.0.0.4/8 dev h4-eth0
root@ryu-vm:~# ip link add link h4-eth0 name h4-eth0.110 type vlan id 110
root@ryu-vm:~# ip addr add 10.0.0.4/8 dev h4-eth0.110
root@ryu-vm:~# ip link set dev h4-eth0.110 up
</pre></div>
</div>
<p>Then, set the version of OpenFlow to be used in each router to 1.3.</p>
<p>switch: s1 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ovs-vsctl set Bridge s1 protocols=OpenFlow13
</pre></div>
</div>
<p>Finally, start rest_firewall on an xterm of the controller.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ryu-manager ryu.app.rest_firewall
loading app ryu.app.rest_firewall
loading app ryu.controller.ofp_handler
instantiating app None of DPSet
creating context dpset
creating context wsgi
instantiating app ryu.app.rest_firewall of RestFirewallAPI
instantiating app ryu.controller.ofp_handler of OFPHandler
(13419) wsgi starting up on http://0.0.0.0:8080/
</pre></div>
</div>
<p>After a successful connection between the router and Ryu, the following message appears.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>[FW][INFO] switch_id=0000000000000001: Join as firewall
</pre></div>
</div>
</div>
<div class="section" id="changing-the-initial-state">
<h3>Changing the Initial State<a class="headerlink" href="#changing-the-initial-state" title="Permalink to this headline">¶</a></h3>
<p>Enable the firewall.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X PUT http://localhost:8080/firewall/module/enable/0000000000000001
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: {
        &quot;result&quot;: &quot;success&quot;,
        &quot;details&quot;: &quot;firewall running.&quot;
      }
    }
  ]

root@ryu-vm:~# curl http://localhost:8080/firewall/module/status
  [
    {
      &quot;status&quot;: &quot;enable&quot;,
      &quot;switch_id&quot;: &quot;0000000000000001&quot;
    }
  ]
</pre></div>
</div>
</div>
<div class="section" id="adding-rules">
<h3>Adding Rules<a class="headerlink" href="#adding-rules" title="Permalink to this headline">¶</a></h3>
<p>Add a rule to vlan_id = 2 that allows pings (ICMP packets) to be sent and received to 10.0.0.0/8. Since there is a need to set rules in both directions, add two rules.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="11%" />
<col width="16%" />
<col width="16%" />
<col width="12%" />
<col width="15%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">(Priority)</th>
<th class="head">VLAN ID</th>
<th class="head">Source</th>
<th class="head">Destination</th>
<th class="head">Protocol</th>
<th class="head">Permission</th>
<th class="head">(Rule ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>2</td>
<td>10.0.0.0/8</td>
<td>any</td>
<td>ICMP</td>
<td>Allow</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>2</td>
<td>any</td>
<td>10.0.0.0/8</td>
<td>ICMP</td>
<td>Allow</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl -X POST -d &#39;{&quot;nw_src&quot;: &quot;10.0.0.0/8&quot;, &quot;nw_proto&quot;: &quot;ICMP&quot;}&#39; http://localhost:8080/firewall/rules/0000000000000001/2
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;vlan_id&quot;: 2,
          &quot;details&quot;: &quot;Rule added. : rule_id=1&quot;
        }
      ]
    }
  ]

root@ryu-vm:~# curl -X POST -d &#39;{&quot;nw_dst&quot;: &quot;10.0.0.0/8&quot;, &quot;nw_proto&quot;: &quot;ICMP&quot;}&#39; http://localhost:8080/firewall/rules/0000000000000001/2
  [
    {
      &quot;switch_id&quot;: &quot;0000000000000001&quot;,
      &quot;command_result&quot;: [
        {
          &quot;result&quot;: &quot;success&quot;,
          &quot;vlan_id&quot;: 2,
          &quot;details&quot;: &quot;Rule added. : rule_id=2&quot;
        }
      ]
    }
  ]
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h3>Confirming Rules<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Confirm the rules that have been set.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# curl http://localhost:8080/firewall/rules/0000000000000001/all
  [
    {
      &quot;access_control_list&quot;: [
        {
          &quot;rules&quot;: [
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;nw_proto&quot;: &quot;ICMP&quot;,
              &quot;dl_vlan&quot;: 2,
              &quot;nw_src&quot;: &quot;10.0.0.0/8&quot;,
              &quot;rule_id&quot;: 1,
              &quot;actions&quot;: &quot;ALLOW&quot;
            },
            {
              &quot;priority&quot;: 1,
              &quot;dl_type&quot;: &quot;IPv4&quot;,
              &quot;nw_proto&quot;: &quot;ICMP&quot;,
              &quot;nw_dst&quot;: &quot;10.0.0.0/8&quot;,
              &quot;dl_vlan&quot;: 2,
              &quot;rule_id&quot;: 2,
              &quot;actions&quot;: &quot;ALLOW&quot;
            }
          ],
          &quot;vlan_id&quot;: 2
        }
      ],
      &quot;switch_id&quot;: &quot;0000000000000001&quot;
    }
  ]
</pre></div>
</div>
<p>Let&#8217;s confirm them. When you execute ping from h1, which is vlan_id=2, to h2 which is also vlan_id=2, you can see that it can communicate per the rules that were added.</p>
<p>host: h1:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ping 10.0.0.2
PING 10.0.0.2 (10.0.0.2) 56(84) bytes of data.
64 bytes from 10.0.0.2: icmp_req=1 ttl=64 time=0.893 ms
64 bytes from 10.0.0.2: icmp_req=2 ttl=64 time=0.098 ms
64 bytes from 10.0.0.2: icmp_req=3 ttl=64 time=0.122 ms
64 bytes from 10.0.0.2: icmp_req=4 ttl=64 time=0.047 ms
...
</pre></div>
</div>
<p>Since there is no rule between h3 and h4, which are both vlan_id=110, packets are blocked.</p>
<p>host: h3:</p>
<div class="console highlight-python"><div class="highlight"><pre>root@ryu-vm:~# ping 10.0.0.4
PING 10.0.0.4 (10.0.0.4) 56(84) bytes of data.
^C
--- 10.0.0.4 ping statistics ---
6 packets transmitted, 0 received, 100% packet loss, time 4999ms
</pre></div>
</div>
<p>Since packets are blocked, a log is output.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-python"><div class="highlight"><pre>[FW][INFO] dpid=0000000000000001: Blocked packet = ethernet(dst=&#39;00:00:00:00:00:04&#39;,ethertype=33024,src=&#39;00:00:00:00:00:03&#39;), vlan(cfi=0,ethertype=2048,pcp=0,vid=110), ipv4(csum=9891,dst=&#39;10.0.0.4&#39;,flags=2,header_length=5,identification=0,offset=0,option=None,proto=1,src=&#39;10.0.0.3&#39;,tos=0,total_length=84,ttl=64,version=4), icmp(code=0,csum=58104,data=echo(data=&#39;\xb8\xa9\xaeR\x00\x00\x00\x00\xce\xe3\x02\x00\x00\x00\x00\x00\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f !&quot;#$%&amp;\&#39;()*+,-./01234567&#39;,id=7760,seq=4),type=8)
...
</pre></div>
</div>
<p>In this section, you learned how to use the firewall with specific examples.</p>
</div>
</div>
<div class="section" id="rest-api-list">
<h2>REST API List<a class="headerlink" href="#rest-api-list" title="Permalink to this headline">¶</a></h2>
<p>List of REST API of rest_firewall, which is introduced in this section.</p>
<div class="section" id="acquiring-enable-disable-state-of-all-switches">
<h3>Acquiring Enable/Disable State of All Switches<a class="headerlink" href="#acquiring-enable-disable-state-of-all-switches" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>GET</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td>/firewall/module/status</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="changing-enable-disable-state-of-all-switches">
<h3>Changing Enable/Disable State of All Switches<a class="headerlink" href="#changing-enable-disable-state-of-all-switches" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>PUT</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/firewall/module/{<strong>op</strong>}/{<strong>switch</strong>}</p>
<p>&#8211;<strong>op</strong>: [ &#8220;enable&#8221; | &#8220;disable&#8221; ]</p>
<p class="last">&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>Remarks</strong></td>
<td>Initial state of each switch is &#8220;disable&#8221;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="acquiring-all-rules">
<h3>Acquiring All Rules<a class="headerlink" href="#acquiring-all-rules" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>GET</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/firewall/rules/{<strong>switch</strong>}[/{<strong>vlan</strong>}]</p>
<p>&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
<p class="last">&#8211;<strong>vlan</strong>: [ &#8220;all&#8221; | <em>VLAN ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>Remarks</strong></td>
<td>Specification of VLAN ID is optional.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h3>Adding Rules<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>POST</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/firewall/rules/{<strong>switch</strong>}[/{<strong>vlan</strong>}]</p>
<p>&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
<p class="last">&#8211;<strong>vlan</strong>: [ &#8220;all&#8221; | <em>VLAN ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>Data</strong></td>
<td><p class="first"><strong>priority</strong>:[ 0 - 65535 ]</p>
<p><strong>in_port</strong>:[ 0 - 65535 ]</p>
<p><strong>dl_src</strong>:&#8221;&lt;xx:xx:xx:xx:xx:xx&gt;&#8221;</p>
<p><strong>dl_dst</strong>:&#8221;&lt;xx:xx:xx:xx:xx:xx&gt;&#8221;</p>
<p><strong>dl_type</strong>:[ &#8220;ARP&#8221; | &#8220;IPv4&#8221; ]</p>
<p><strong>nw_src</strong>:&#8221;&lt;xxx.xxx.xxx.xxx/xx&gt;&#8221;</p>
<p><strong>nw_dst</strong>:&#8221;&lt;xxx.xxx.xxx.xxx/xx&#8221;&gt;</p>
<p><strong>nw_proto</strong>&#8221;:[ &#8220;TCP&#8221; | &#8220;UDP&#8221; | &#8220;ICMP&#8221; ]</p>
<p><strong>tp_src</strong>:[ 0 - 65535 ]</p>
<p><strong>tp_dst</strong>:[ 0 - 65535 ]</p>
<p class="last"><strong>actions</strong>: [ &#8220;ALLOW&#8221; | &#8220;DENY&#8221; ]</p>
</td>
</tr>
<tr class="row-even"><td><strong>Remarks</strong></td>
<td><p class="first">When it is successfully registered, Rule ID is generated and is noted in the response.</p>
<p class="last">Specification of VLAN ID is optional.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="deleting-rules">
<h3>Deleting Rules<a class="headerlink" href="#deleting-rules" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>DELETE</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/firewall/rules/{<strong>switch</strong>}[/{<strong>vlan</strong>}]</p>
<p>&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
<p class="last">&#8211;<strong>vlan</strong>: [ &#8220;all&#8221; | <em>VLAN ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>Data</strong></td>
<td><strong>rule_id</strong>:[ &#8220;all&#8221; | 1 - ... ]</td>
</tr>
<tr class="row-even"><td><strong>Remarks</strong></td>
<td>Specification of VLAN ID is optional.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="acquiring-log-output-state-of-all-switches">
<h3>Acquiring Log Output State of All Switches<a class="headerlink" href="#acquiring-log-output-state-of-all-switches" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="63%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>GET</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td>/firewall/log/status</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="changing-log-output-state-of-all-switches">
<h3>Changing Log Output State of All Switches<a class="headerlink" href="#changing-log-output-state-of-all-switches" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>PUT</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/firewall/log/{<strong>op</strong>}/{<strong>switch</strong>}</p>
<p>&#8211;<strong>op</strong>: [ &#8220;enable&#8221; | &#8220;disable&#8221; ]</p>
<p class="last">&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>Remarks</strong></td>
<td>Initial state of each switch is &#8220;enable&#8221;</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Firewall</a><ul>
<li><a class="reference internal" href="#example-of-operation-of-a-single-tenant">Example of operation of a single tenant</a><ul>
<li><a class="reference internal" href="#environment-building">Environment Building</a></li>
<li><a class="reference internal" href="#changing-in-the-initial-state">Changing in the initial state</a></li>
<li><a class="reference internal" href="#adding-a-rule">Adding a Rule</a></li>
<li><a class="reference internal" href="#confirming-rules">Confirming Rules</a></li>
<li><a class="reference internal" href="#deleting-a-rule">Deleting a Rule</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-of-the-operation-of-a-multi-tenant">Example of the Operation of a Multi-tenant</a><ul>
<li><a class="reference internal" href="#building-an-environment">Building an Environment</a></li>
<li><a class="reference internal" href="#changing-the-initial-state">Changing the Initial State</a></li>
<li><a class="reference internal" href="#adding-rules">Adding Rules</a></li>
<li><a class="reference internal" href="#id1">Confirming Rules</a></li>
</ul>
</li>
<li><a class="reference internal" href="#rest-api-list">REST API List</a><ul>
<li><a class="reference internal" href="#acquiring-enable-disable-state-of-all-switches">Acquiring Enable/Disable State of All Switches</a></li>
<li><a class="reference internal" href="#changing-enable-disable-state-of-all-switches">Changing Enable/Disable State of All Switches</a></li>
<li><a class="reference internal" href="#acquiring-all-rules">Acquiring All Rules</a></li>
<li><a class="reference internal" href="#id2">Adding Rules</a></li>
<li><a class="reference internal" href="#deleting-rules">Deleting Rules</a></li>
<li><a class="reference internal" href="#acquiring-log-output-state-of-all-switches">Acquiring Log Output State of All Switches</a></li>
<li><a class="reference internal" href="#changing-log-output-state-of-all-switches">Changing Log Output State of All Switches</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="of_config.html"
                        title="previous chapter">OF-Config Library</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="rest_router.html"
                        title="next chapter">Router</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/rest_firewall.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="rest_router.html" title="Router"
             >next</a> |</li>
        <li class="right" >
          <a href="of_config.html" title="OF-Config Library"
             >previous</a> |</li>
        <li><a href="index.html">Ryubook 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, RYU project team.
    </div>
  </body>
</html>