<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>QoS &#8212; Ryubook 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Ryubook 1.0 documentation" href="index.html" />
    <link rel="next" title="OpenFlow Switch Test Tool" href="switch_test_tool.html" />
    <link rel="prev" title="Router" href="rest_router.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="switch_test_tool.html" title="OpenFlow Switch Test Tool"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="rest_router.html" title="Router"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Ryubook 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="qos">
<span id="ch-rest-qos"></span><h1>QoS<a class="headerlink" href="#qos" title="Permalink to this headline">¶</a></h1>
<p>This section describes how to use QoS functions that can be set using REST.</p>
<div class="section" id="about-qos">
<h2>About QoS<a class="headerlink" href="#about-qos" title="Permalink to this headline">¶</a></h2>
<p>QoS (Quality of Service) is a technology that can transfer the data in
accordance with the priority based on the type of data,
and reserve network bandwidth for a particular communication in order to
communicate with a constant communication bandwidth on the network.</p>
</div>
<div class="section" id="example-of-the-operation-of-the-per-flow-qos">
<h2>Example of the operation of the per-flow QoS<a class="headerlink" href="#example-of-the-operation-of-the-per-flow-qos" title="Permalink to this headline">¶</a></h2>
<p>The following shows an example of creating topology, adding Queue settings and
rules to reserve network bandwidth.
And this example shows traffic shaping at WAN side interface of OFS1.</p>
<a class="reference internal image-reference" href="_images/fig14.png"><img alt="_images/fig14.png" class="align-center" src="_images/fig14.png" style="width: 280.0px; height: 85.6px;" /></a>
<div class="section" id="building-the-environment">
<h3>Building the environment<a class="headerlink" href="#building-the-environment" title="Permalink to this headline">¶</a></h3>
<p>First, build an environment on Mininet. Parameters of the <code class="docutils literal"><span class="pre">mn</span></code> command are as
follows.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="15%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Value</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>mac</td>
<td>None</td>
<td>Set the MAC address of the host automatically</td>
</tr>
<tr class="row-odd"><td>switch</td>
<td>ovsk</td>
<td>Use Open vSwitch</td>
</tr>
<tr class="row-even"><td>controller</td>
<td>remote</td>
<td>Use an external one for OpenFlow controller</td>
</tr>
<tr class="row-odd"><td>x</td>
<td>None</td>
<td>Start xterm</td>
</tr>
</tbody>
</table>
<p>An execution example is as follows.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span>ryu@ryu-vm:~$ sudo mn --mac --switch ovsk --controller remote -x
*** Creating network
*** Adding controller
Unable to contact the remote controller at 127.0.0.1:6633
*** Adding hosts:
h1 h2
*** Adding switches:
s1
*** Adding links:
(h1, s1) (h2, s1)
*** Configuring hosts
h1 h2
*** Running terms on localhost:10.0
*** Starting controller
*** Starting 1 switches
s1
*** Starting CLI:
mininet&gt;
</pre></div>
</div>
<p>Also, start another xterm for the controller.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">c0</span>
<span class="n">mininet</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Next, set the version of OpenFlow to be used in each router to version 1.3
and set to listen on port 6632 to access OVSDB.</p>
<p>switch: s1 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># ovs-vsctl set Bridge s1 protocols=OpenFlow13</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># ovs-vsctl set-manager ptcp:6632</span>
</pre></div>
</div>
<p>Then, modify simple_switch_13.py used in &#8220;<a class="reference internal" href="switching_hub.html#ch-switching-hub"><span class="std std-ref">Switching Hub</span></a>&#8221;.
rest_qos.py suppose to be processed on Flow Table pipeline processing,
modify simple_switch_13.py to register flow entry into table id:1.</p>
<p>controller: c0 (root)</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># sed &#39;/OFPFlowMod(/,/)/s/)/, table_id=1)/&#39; ryu/ryu/app/simple_switch_13.py &gt; ryu/ryu/app/qos_simple_switch_13.py</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># cd ryu/; python ./setup.py install</span>
</pre></div>
</div>
<p>Finally, start rest_qos, qos_simple_switch_13 and rest_conf_switch on xterm of
controller.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@mininet</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~/</span><span class="n">ryu</span><span class="c1"># ryu-manager ryu.app.rest_qos ryu.app.qos_simple_switch_13 ryu.app.rest_conf_switch</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">rest_qos</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">qos_simple_switch_13</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">rest_conf_switch</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="kc">None</span> <span class="n">of</span> <span class="n">DPSet</span>
<span class="n">creating</span> <span class="n">context</span> <span class="n">dpset</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="kc">None</span> <span class="n">of</span> <span class="n">ConfSwitchSet</span>
<span class="n">creating</span> <span class="n">context</span> <span class="n">conf_switch</span>
<span class="n">creating</span> <span class="n">context</span> <span class="n">wsgi</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">rest_conf_switch</span> <span class="n">of</span> <span class="n">ConfSwitchAPI</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">qos_simple_switch_13</span> <span class="n">of</span> <span class="n">SimpleSwitch13</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span> <span class="n">of</span> <span class="n">OFPHandler</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">rest_qos</span> <span class="n">of</span> <span class="n">RestQoSAPI</span>
<span class="p">(</span><span class="mi">3519</span><span class="p">)</span> <span class="n">wsgi</span> <span class="n">starting</span> <span class="n">up</span> <span class="n">on</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span>
</pre></div>
</div>
<p>After a successful connection between the router and Ryu, the following
message appears.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">QoS</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">dpid</span><span class="o">=</span><span class="mi">0000000000000001</span><span class="p">:</span> <span class="n">Join</span> <span class="n">qos</span> <span class="n">switch</span><span class="o">.</span>
</pre></div>
</div>
<p>If the above log is displayed for the three routers, preparation is complete.</p>
</div>
<div class="section" id="queue-setting">
<h3>Queue Setting<a class="headerlink" href="#queue-setting" title="Permalink to this headline">¶</a></h3>
<p>Set the Queue to switch.</p>
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="36%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Queue ID</th>
<th class="head">Max rate</th>
<th class="head">Min rate</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>500Kbps</td>
<td>-</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>(1Mbps)</td>
<td>800Kbps</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For details of REST API used in the following description, see
&#8220;<a class="reference internal" href="#rest-api-list">REST API List</a>&#8221; at the end of the section.</p>
</div>
<p>First, set ovsdb_addr in order to access OVSDB.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X PUT -d &#39;&quot;tcp:127.0.0.1:6632&quot;&#39; http://localhost:8080/v1.0/conf/switches/0000000000000001/ovsdb_addr</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1">#</span>
</pre></div>
</div>
<p>Also, execute setting of Queue.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;port_name&quot;: &quot;s1-eth1&quot;, &quot;type&quot;: &quot;linux-htb&quot;, &quot;max_rate&quot;: &quot;1000000&quot;, &quot;queues&quot;: [{&quot;max_rate&quot;: &quot;500000&quot;}, {&quot;min_rate&quot;: &quot;800000&quot;}]}&#39; http://localhost:8080/qos/queue/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
        <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;0&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;max-rate&quot;</span><span class="p">:</span> <span class="s2">&quot;500000&quot;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;min-rate&quot;</span><span class="p">:</span> <span class="s2">&quot;800000&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The result of the REST command is formatted for easy viewing.</p>
</div>
</div>
<div class="section" id="qos-setting">
<h3>QoS Setting<a class="headerlink" href="#qos-setting" title="Permalink to this headline">¶</a></h3>
<p>Install the following flow entry to the switch.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="26%" />
<col width="22%" />
<col width="14%" />
<col width="10%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">(Priority)</th>
<th class="head">Destination address</th>
<th class="head">Destination port</th>
<th class="head">Protocol</th>
<th class="head">Queue ID</th>
<th class="head">(QoS ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>10.0.0.1</td>
<td>5002</td>
<td>UDP</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<p>Node: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;nw_dst&quot;: &quot;10.0.0.1&quot;, &quot;nw_proto&quot;: &quot;UDP&quot;, &quot;tp_dst&quot;: &quot;5002&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;1&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=1&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="verifying-the-setting">
<h3>Verifying the Setting<a class="headerlink" href="#verifying-the-setting" title="Permalink to this headline">¶</a></h3>
<p>Check the contents of the setting of the switch.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X GET http://localhost:8080/qos/rules/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;qos&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;nw_proto&quot;</span><span class="p">:</span> <span class="s2">&quot;UDP&quot;</span><span class="p">,</span>
              <span class="s2">&quot;tp_dst&quot;</span><span class="p">:</span> <span class="mi">5002</span><span class="p">,</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;nw_dst&quot;</span><span class="p">:</span> <span class="s2">&quot;10.0.0.1&quot;</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;queue&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span>
                <span class="p">}</span>
              <span class="p">]</span>
            <span class="p">}</span>
          <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="measuring-the-bandwidth">
<h3>Measuring the bandwidth<a class="headerlink" href="#measuring-the-bandwidth" title="Permalink to this headline">¶</a></h3>
<p>Try to measure the bandwidth by using iperf.
In the following example, h1(server) listens on the port 5001 and 5002
with UDP protocol.
h2(client) sends 1Mbps UDP traffic to the port 5001 on h1 and
1Mbps UDP traffic to the port 5002 on h1</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The fallowing examples use iperf (<a class="reference external" href="http://iperf.fr/">http://iperf.fr/</a>) to measure the
bandwidth.
But this document does not describe how to install iperf and how to use it.</p>
</div>
<p>First, start another xterm on each h1 and h2.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">h1</span>
<span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">h2</span>
</pre></div>
</div>
<p>Node: h1(1) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -s -u -i 1 -p 5001</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Node: h1(2) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -s -u -i 1 -p 5002</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Node: h2(1) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -c 10.0.0.1 -p 5001 -u -b 1M</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Node: h2(2) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -c 10.0.0.1 -p 5002 -u -b 1M</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Node: h1(1) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">local</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="n">port</span> <span class="mi">5001</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.2</span> <span class="n">port</span> <span class="mi">50375</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>        <span class="n">Jitter</span>   <span class="n">Lost</span><span class="o">/</span><span class="n">Total</span> <span class="n">Datagrams</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span> <span class="mf">1.0</span> <span class="n">sec</span>  <span class="mf">60.3</span> <span class="n">KBytes</span>   <span class="mi">494</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.208</span> <span class="n">ms</span>    <span class="mi">4</span><span class="o">/</span>   <span class="mi">42</span> <span class="p">(</span><span class="mf">9.5</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span> <span class="mf">1.0</span> <span class="n">sec</span>  <span class="mi">4</span> <span class="n">datagrams</span> <span class="n">received</span> <span class="n">out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">order</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">1.0</span><span class="o">-</span> <span class="mf">2.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.538</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">2.0</span><span class="o">-</span> <span class="mf">3.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.494</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">3.0</span><span class="o">-</span> <span class="mf">4.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.625</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">4.0</span><span class="o">-</span> <span class="mf">5.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.576</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">5.0</span><span class="o">-</span> <span class="mf">6.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.561</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">6.0</span><span class="o">-</span> <span class="mf">7.0</span> <span class="n">sec</span>  <span class="mf">11.5</span> <span class="n">KBytes</span>  <span class="mf">94.1</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">45.536</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">8</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">7.0</span><span class="o">-</span> <span class="mf">8.0</span> <span class="n">sec</span>  <span class="mf">4.31</span> <span class="n">KBytes</span>  <span class="mf">35.3</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">92.790</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">3</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">8.0</span><span class="o">-</span> <span class="mf">9.0</span> <span class="n">sec</span>  <span class="mf">4.31</span> <span class="n">KBytes</span>  <span class="mf">35.3</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">135.391</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">3</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">9.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>  <span class="mf">4.31</span> <span class="n">KBytes</span>  <span class="mf">35.3</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">167.045</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">3</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">10.0</span><span class="o">-</span><span class="mf">11.0</span> <span class="n">sec</span>  <span class="mf">4.31</span> <span class="n">KBytes</span>  <span class="mf">35.3</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">193.006</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">3</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">11.0</span><span class="o">-</span><span class="mf">12.0</span> <span class="n">sec</span>  <span class="mf">4.31</span> <span class="n">KBytes</span>  <span class="mf">35.3</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">213.944</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">3</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">12.0</span><span class="o">-</span><span class="mf">13.0</span> <span class="n">sec</span>  <span class="mf">4.31</span> <span class="n">KBytes</span>  <span class="mf">35.3</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">231.981</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">3</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">13.0</span><span class="o">-</span><span class="mf">14.0</span> <span class="n">sec</span>  <span class="mf">4.31</span> <span class="n">KBytes</span>  <span class="mf">35.3</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">249.758</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">3</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">14.0</span><span class="o">-</span><span class="mf">15.0</span> <span class="n">sec</span>  <span class="mf">4.31</span> <span class="n">KBytes</span>  <span class="mf">35.3</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">261.139</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">3</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">15.0</span><span class="o">-</span><span class="mf">16.0</span> <span class="n">sec</span>  <span class="mf">4.31</span> <span class="n">KBytes</span>  <span class="mf">35.3</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">269.879</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">3</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">16.0</span><span class="o">-</span><span class="mf">17.0</span> <span class="n">sec</span>  <span class="mf">12.9</span> <span class="n">KBytes</span>   <span class="mi">106</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">204.755</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">9</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">17.0</span><span class="o">-</span><span class="mf">18.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">26.214</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">18.0</span><span class="o">-</span><span class="mf">19.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">13.485</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">19.0</span><span class="o">-</span><span class="mf">20.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.690</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">20.0</span><span class="o">-</span><span class="mf">21.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.498</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">21.0</span><span class="o">-</span><span class="mf">22.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.601</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">22.0</span><span class="o">-</span><span class="mf">23.0</span> <span class="n">sec</span>  <span class="mf">60.3</span> <span class="n">KBytes</span>   <span class="mi">494</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.640</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">42</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">23.0</span><span class="o">-</span><span class="mf">24.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.508</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">24.0</span><span class="o">-</span><span class="mf">25.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.578</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">25.0</span><span class="o">-</span><span class="mf">26.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.541</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">26.0</span><span class="o">-</span><span class="mf">27.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.539</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">27.0</span><span class="o">-</span><span class="mf">28.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.578</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">28.0</span><span class="o">-</span><span class="mf">29.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.527</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">29.0</span><span class="o">-</span><span class="mf">30.0</span> <span class="n">sec</span>  <span class="mf">58.9</span> <span class="n">KBytes</span>   <span class="mi">482</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.542</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">41</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">30.6</span> <span class="n">sec</span>  <span class="mf">1.19</span> <span class="n">MBytes</span>   <span class="mi">327</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.562</span> <span class="n">ms</span>    <span class="mi">4</span><span class="o">/</span>  <span class="mi">852</span> <span class="p">(</span><span class="mf">0.47</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">30.6</span> <span class="n">sec</span>  <span class="mi">4</span> <span class="n">datagrams</span> <span class="n">received</span> <span class="n">out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">order</span>
</pre></div>
</div>
<p>Node: h1(2) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">local</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="n">port</span> <span class="mi">5002</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.2</span> <span class="n">port</span> <span class="mi">60868</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>        <span class="n">Jitter</span>   <span class="n">Lost</span><span class="o">/</span><span class="n">Total</span> <span class="n">Datagrams</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span> <span class="mf">1.0</span> <span class="n">sec</span>   <span class="mi">112</span> <span class="n">KBytes</span>   <span class="mi">917</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">4.288</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">78</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">1.0</span><span class="o">-</span> <span class="mf">2.0</span> <span class="n">sec</span>   <span class="mi">115</span> <span class="n">KBytes</span>   <span class="mi">941</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">4.168</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">80</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">2.0</span><span class="o">-</span> <span class="mf">3.0</span> <span class="n">sec</span>   <span class="mi">115</span> <span class="n">KBytes</span>   <span class="mi">941</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">4.454</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">80</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">3.0</span><span class="o">-</span> <span class="mf">4.0</span> <span class="n">sec</span>   <span class="mi">113</span> <span class="n">KBytes</span>   <span class="mi">929</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">4.226</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">79</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">4.0</span><span class="o">-</span> <span class="mf">5.0</span> <span class="n">sec</span>   <span class="mi">113</span> <span class="n">KBytes</span>   <span class="mi">929</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">4.096</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">79</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">5.0</span><span class="o">-</span> <span class="mf">6.0</span> <span class="n">sec</span>   <span class="mi">113</span> <span class="n">KBytes</span>   <span class="mi">929</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">4.225</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">79</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">6.0</span><span class="o">-</span> <span class="mf">7.0</span> <span class="n">sec</span>   <span class="mi">113</span> <span class="n">KBytes</span>   <span class="mi">929</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">4.055</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">79</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">7.0</span><span class="o">-</span> <span class="mf">8.0</span> <span class="n">sec</span>   <span class="mi">113</span> <span class="n">KBytes</span>   <span class="mi">929</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">4.241</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">79</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">8.0</span><span class="o">-</span> <span class="mf">9.0</span> <span class="n">sec</span>   <span class="mi">115</span> <span class="n">KBytes</span>   <span class="mi">941</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">3.886</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">80</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">9.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">112</span> <span class="n">KBytes</span>   <span class="mi">917</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">3.969</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">78</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.8</span> <span class="n">sec</span>  <span class="mf">1.19</span> <span class="n">MBytes</span>   <span class="mi">931</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">4.287</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">852</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
</pre></div>
</div>
<p>The above result shows the traffic sent to the port 5001 is shaped with up to
500Kbps and the traffic to the port 5002 is guaranteed 800Kbps bandwidth.</p>
</div>
</div>
<div class="section" id="example-of-the-operation-of-qos-by-using-diffserv">
<h2>Example of the operation of QoS by using DiffServ<a class="headerlink" href="#example-of-the-operation-of-qos-by-using-diffserv" title="Permalink to this headline">¶</a></h2>
<p>Previous example shows the per-flow QoS, while it is able to control finely,
as the communication flows increase, the flow entries which are set for
each switch to control the bandwidth also increase.
So the per-flow QoS is not scalable.
Therefore, the following example divides flows into the several QoS classes at
the entrance router of DiffServ domain and applies DiffServ to control flows
for each class.
DiffServ forward the packets according to PHB defined by DSCP value which is
the first 6-bit of ToS field in IP header, and realizes QoS.</p>
<p>The following shows an example of setting Queue and bandwidth configuration
based on the QoS class into Switch (Router) OFS1, and installation rules
of marking the DSCP value in accordance with the flow.
And this example shows traffic shaping at WAN side interface of OFS1.</p>
<a class="reference internal image-reference" href="_images/fig22.png"><img alt="_images/fig22.png" class="align-center" src="_images/fig22.png" style="width: 289.6px; height: 103.6px;" /></a>
<div class="section" id="id1">
<h3>Building the environment<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>First, build an environment on Mininet. Parameters of the <code class="docutils literal"><span class="pre">mn</span></code> command are as
follows.</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="14%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Parameters</th>
<th class="head">Value</th>
<th class="head">Explanation</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>topo</td>
<td>linear,2</td>
<td>Topology where two switches are connected serially</td>
</tr>
<tr class="row-odd"><td>mac</td>
<td>None</td>
<td>Set the MAC address of the host automatically</td>
</tr>
<tr class="row-even"><td>switch</td>
<td>ovsk</td>
<td>Use Open vSwitch</td>
</tr>
<tr class="row-odd"><td>controller</td>
<td>remote</td>
<td>Use an external one for OpenFlow controller</td>
</tr>
<tr class="row-even"><td>x</td>
<td>None</td>
<td>Start xterm</td>
</tr>
</tbody>
</table>
<p>An execution example is as follows.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span>ryu@ryu-vm:~$ sudo mn --topo linear,2 --mac --switch ovsk --controller remote -x
*** Creating network
*** Adding controller
Unable to contact the remote controller at 127.0.0.1:6633
*** Adding hosts:
h1 h2
*** Adding switches:
s1
*** Adding links:
(h1, s1) (h2, s1)
*** Configuring hosts
h1 h2
*** Running terms on localhost:10.0
*** Starting controller
*** Starting 1 switches
s1
*** Starting CLI:
mininet&gt;
</pre></div>
</div>
<p>Also, start another xterm for the controller.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">c0</span>
<span class="n">mininet</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Next, set the version of OpenFlow to be used in each router to version 1.3
and set to listen on port 6632 to access OVSDB.</p>
<p>switch: s1 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># ovs-vsctl set Bridge s1 protocols=OpenFlow13</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># ovs-vsctl set-manager ptcp:6632</span>
</pre></div>
</div>
<p>switch: s2 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># ovs-vsctl set Bridge s2 protocols=OpenFlow13</span>
</pre></div>
</div>
<p>Then, delete the IP address that is assigned automatically on each host and
set a new IP address.</p>
<p>host: h1:</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># ip addr del 10.0.0.1/8 dev h1-eth0</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># ip addr add 172.16.20.10/24 dev h1-eth0</span>
</pre></div>
</div>
<p>host: h2:</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># ip addr del 10.0.0.2/8 dev h2-eth0</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># ip addr add 172.16.10.10/24 dev h2-eth0</span>
</pre></div>
</div>
<p>And, modify rest_router.py used in &#8220;<a class="reference internal" href="rest_router.html#ch-rest-router"><span class="std std-ref">Router</span></a>&#8221;.
rest_qos.py suppose to be processed on Flow Table pipeline processing,
modify rest_router.py to register flow entry into table id:1.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># sed &#39;/OFPFlowMod(/,/)/s/0, cmd/1, cmd/&#39; ryu/ryu/app/rest_router.py &gt; ryu/ryu/app/qos_rest_router.py</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># cd ryu/; python ./setup.py install</span>
</pre></div>
</div>
<p>Finally, start rest_qos, qos_rest_router and rest_conf_switch on xterm of
controller.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@mininet</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~/</span><span class="n">ryu</span><span class="c1"># ryu-manager ryu.app.rest_qos ryu.app.qos_rest_router ryu.app.rest_conf_switch</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">rest_qos</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">qos_rest_router</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">rest_conf_switch</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="kc">None</span> <span class="n">of</span> <span class="n">DPSet</span>
<span class="n">creating</span> <span class="n">context</span> <span class="n">dpset</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="kc">None</span> <span class="n">of</span> <span class="n">ConfSwitchSet</span>
<span class="n">creating</span> <span class="n">context</span> <span class="n">conf_switch</span>
<span class="n">creating</span> <span class="n">context</span> <span class="n">wsgi</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">rest_conf_switch</span> <span class="n">of</span> <span class="n">ConfSwitchAPI</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">qos_rest_router</span> <span class="n">of</span> <span class="n">RestRouterAPI</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span> <span class="n">of</span> <span class="n">OFPHandler</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">rest_qos</span> <span class="n">of</span> <span class="n">RestQoSAPI</span>
<span class="p">(</span><span class="mi">4687</span><span class="p">)</span> <span class="n">wsgi</span> <span class="n">starting</span> <span class="n">up</span> <span class="n">on</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span>
</pre></div>
</div>
<p>After a successful connection between the router and Ryu, the following
message appears.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">RT</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">switch_id</span><span class="o">=</span><span class="mi">0000000000000002</span><span class="p">:</span> <span class="n">Set</span> <span class="n">SW</span> <span class="n">config</span> <span class="k">for</span> <span class="n">TTL</span> <span class="n">error</span> <span class="n">packet</span> <span class="ow">in</span><span class="o">.</span>
<span class="p">[</span><span class="n">RT</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">switch_id</span><span class="o">=</span><span class="mi">0000000000000002</span><span class="p">:</span> <span class="n">Set</span> <span class="n">ARP</span> <span class="n">handling</span> <span class="p">(</span><span class="n">packet</span> <span class="ow">in</span><span class="p">)</span> <span class="n">flow</span> <span class="p">[</span><span class="n">cookie</span><span class="o">=</span><span class="mh">0x0</span><span class="p">]</span>
<span class="p">[</span><span class="n">RT</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">switch_id</span><span class="o">=</span><span class="mi">0000000000000002</span><span class="p">:</span> <span class="n">Set</span> <span class="n">L2</span> <span class="n">switching</span> <span class="p">(</span><span class="n">normal</span><span class="p">)</span> <span class="n">flow</span> <span class="p">[</span><span class="n">cookie</span><span class="o">=</span><span class="mh">0x0</span><span class="p">]</span>
<span class="p">[</span><span class="n">RT</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">switch_id</span><span class="o">=</span><span class="mi">0000000000000002</span><span class="p">:</span> <span class="n">Set</span> <span class="n">default</span> <span class="n">route</span> <span class="p">(</span><span class="n">drop</span><span class="p">)</span> <span class="n">flow</span> <span class="p">[</span><span class="n">cookie</span><span class="o">=</span><span class="mh">0x0</span><span class="p">]</span>
<span class="p">[</span><span class="n">RT</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">switch_id</span><span class="o">=</span><span class="mi">0000000000000002</span><span class="p">:</span> <span class="n">Start</span> <span class="n">cyclic</span> <span class="n">routing</span> <span class="n">table</span> <span class="n">update</span><span class="o">.</span>
<span class="p">[</span><span class="n">RT</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">switch_id</span><span class="o">=</span><span class="mi">0000000000000002</span><span class="p">:</span> <span class="n">Join</span> <span class="k">as</span> <span class="n">router</span><span class="o">.</span>
<span class="p">[</span><span class="n">QoS</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">dpid</span><span class="o">=</span><span class="mi">0000000000000002</span><span class="p">:</span> <span class="n">Join</span> <span class="n">qos</span> <span class="n">switch</span><span class="o">.</span>
<span class="p">[</span><span class="n">RT</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">switch_id</span><span class="o">=</span><span class="mi">0000000000000001</span><span class="p">:</span> <span class="n">Set</span> <span class="n">SW</span> <span class="n">config</span> <span class="k">for</span> <span class="n">TTL</span> <span class="n">error</span> <span class="n">packet</span> <span class="ow">in</span><span class="o">.</span>
<span class="p">[</span><span class="n">RT</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">switch_id</span><span class="o">=</span><span class="mi">0000000000000001</span><span class="p">:</span> <span class="n">Set</span> <span class="n">ARP</span> <span class="n">handling</span> <span class="p">(</span><span class="n">packet</span> <span class="ow">in</span><span class="p">)</span> <span class="n">flow</span> <span class="p">[</span><span class="n">cookie</span><span class="o">=</span><span class="mh">0x0</span><span class="p">]</span>
<span class="p">[</span><span class="n">RT</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">switch_id</span><span class="o">=</span><span class="mi">0000000000000001</span><span class="p">:</span> <span class="n">Set</span> <span class="n">L2</span> <span class="n">switching</span> <span class="p">(</span><span class="n">normal</span><span class="p">)</span> <span class="n">flow</span> <span class="p">[</span><span class="n">cookie</span><span class="o">=</span><span class="mh">0x0</span><span class="p">]</span>
<span class="p">[</span><span class="n">RT</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">switch_id</span><span class="o">=</span><span class="mi">0000000000000001</span><span class="p">:</span> <span class="n">Set</span> <span class="n">default</span> <span class="n">route</span> <span class="p">(</span><span class="n">drop</span><span class="p">)</span> <span class="n">flow</span> <span class="p">[</span><span class="n">cookie</span><span class="o">=</span><span class="mh">0x0</span><span class="p">]</span>
<span class="p">[</span><span class="n">RT</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">switch_id</span><span class="o">=</span><span class="mi">0000000000000001</span><span class="p">:</span> <span class="n">Start</span> <span class="n">cyclic</span> <span class="n">routing</span> <span class="n">table</span> <span class="n">update</span><span class="o">.</span>
<span class="p">[</span><span class="n">RT</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">switch_id</span><span class="o">=</span><span class="mi">0000000000000001</span><span class="p">:</span> <span class="n">Join</span> <span class="k">as</span> <span class="n">router</span><span class="o">.</span>
<span class="p">[</span><span class="n">QoS</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">dpid</span><span class="o">=</span><span class="mi">0000000000000001</span><span class="p">:</span> <span class="n">Join</span> <span class="n">qos</span> <span class="n">switch</span><span class="o">.</span>
</pre></div>
</div>
<p>If the above log is displayed for the three routers, preparation is complete.</p>
</div>
<div class="section" id="id2">
<h3>Queue Setting<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="27%" />
<col width="27%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Queue ID</th>
<th class="head">Max rate</th>
<th class="head">Min rate</th>
<th class="head">Class</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>0</td>
<td>1Mbps</td>
<td>-</td>
<td>Default</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>(1Mbps)</td>
<td>200Kbps</td>
<td>AF3</td>
</tr>
<tr class="row-even"><td>2</td>
<td>(1Mbps)</td>
<td>500Kbps</td>
<td>AF4</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For details of REST API used in the following description, see
&#8220;<a class="reference internal" href="#rest-api-list">REST API List</a>&#8221; at the end of the section.</p>
</div>
<p>First, set ovsdb_addr in order to access OVSDB.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X PUT -d &#39;&quot;tcp:127.0.0.1:6632&quot;&#39; http://localhost:8080/v1.0/conf/switches/0000000000000001/ovsdb_addr</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1">#</span>
</pre></div>
</div>
<p>Also, execute setting of Queue.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;port_name&quot;: &quot;s1-eth1&quot;, &quot;type&quot;: &quot;linux-htb&quot;, &quot;max_rate&quot;: &quot;1000000&quot;, &quot;queues&quot;:[{&quot;max_rate&quot;: &quot;1000000&quot;}, {&quot;min_rate&quot;: &quot;200000&quot;}, {&quot;min_rate&quot;: &quot;500000&quot;}]}&#39; http://localhost:8080/qos/queue/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
        <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;0&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;max-rate&quot;</span><span class="p">:</span> <span class="s2">&quot;1000000&quot;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="s2">&quot;1&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;min-rate&quot;</span><span class="p">:</span> <span class="s2">&quot;200000&quot;</span>
            <span class="p">}</span>
          <span class="p">},</span>
          <span class="s2">&quot;2&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;config&quot;</span><span class="p">:</span> <span class="p">{</span>
              <span class="s2">&quot;min-rate&quot;</span><span class="p">:</span> <span class="s2">&quot;500000&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The result of the REST command is formatted for easy viewing.</p>
</div>
</div>
<div class="section" id="router-setting">
<h3>Router Setting<a class="headerlink" href="#router-setting" title="Permalink to this headline">¶</a></h3>
<p>Set the IP address and the default route for each router.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;address&quot;: &quot;172.16.20.1/24&quot;}&#39; http://localhost:8080/router/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;Add address [address_id=1]&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;address&quot;: &quot;172.16.30.10/24&quot;}&#39; http://localhost:8080/router/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;Add address [address_id=2]&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;gateway&quot;: &quot;172.16.30.1&quot;}&#39; http://localhost:8080/router/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;Add route [route_id=1]&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;address&quot;: &quot;172.16.10.1/24&quot;}&#39; http://localhost:8080/router/0000000000000002</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000002&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;Add address [address_id=1]&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;address&quot;: &quot;172.16.30.1/24&quot;}&#39; http://localhost:8080/router/0000000000000002</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000002&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;Add address [address_id=2]&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;gateway&quot;: &quot;172.16.30.10&quot;}&#39; http://localhost:8080/router/0000000000000002</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000002&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;Add route [route_id=1]&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="o">...</span>
</pre></div>
</div>
<p>The IP address settings for each router are done, register the routers as the
default gateway to each host.</p>
<p>host: h1:</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># ip route add default via 172.16.20.1</span>
</pre></div>
</div>
<p>host: h2:</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># ip route add default via 172.16.10.1</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>QoS Setting<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>Install the following flow entry in accordance with DSCP value into the
router (s1).</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="27%" />
<col width="27%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Priority</th>
<th class="head">DSCP</th>
<th class="head">Queue ID</th>
<th class="head">(QoS ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>26(AF31)</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>34(AF41)</td>
<td>2</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Node: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;26&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;1&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=1&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;34&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;2&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=2&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>
</div>
<p>Install the following rules of marking the DSCP value into the router (s2).</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="26%" />
<col width="22%" />
<col width="14%" />
<col width="10%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">(Priority)</th>
<th class="head">Destination address</th>
<th class="head">Destination port</th>
<th class="head">Protocol</th>
<th class="head">DSCP</th>
<th class="head">(QoS ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>172.16.20.10</td>
<td>5002</td>
<td>UDP</td>
<td>26(AF31)</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>172.16.20.10</td>
<td>5003</td>
<td>UDP</td>
<td>34(AF41)</td>
<td>2</td>
</tr>
</tbody>
</table>
<p>Node: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;nw_dst&quot;: &quot;172.16.20.10&quot;, &quot;nw_proto&quot;: &quot;UDP&quot;, &quot;tp_dst&quot;: &quot;5002&quot;}, &quot;actions&quot;:{&quot;mark&quot;: &quot;26&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000002</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000002&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=1&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;nw_dst&quot;: &quot;172.16.20.10&quot;, &quot;nw_proto&quot;: &quot;UDP&quot;, &quot;tp_dst&quot;: &quot;5003&quot;}, &quot;actions&quot;:{&quot;mark&quot;: &quot;34&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000002</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000002&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=2&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h3>Verifying the Setting<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Check the contents of the setting of each switch.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X GET http://localhost:8080/qos/rules/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;qos&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;ip_dscp&quot;</span><span class="p">:</span> <span class="mi">34</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;queue&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span>
                <span class="p">}</span>
              <span class="p">],</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">2</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;ip_dscp&quot;</span><span class="p">:</span> <span class="mi">26</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;queue&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span>
                <span class="p">}</span>
              <span class="p">],</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">}</span>
          <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X GET http://localhost:8080/qos/rules/0000000000000002</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000002&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;qos&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;nw_proto&quot;</span><span class="p">:</span> <span class="s2">&quot;UDP&quot;</span><span class="p">,</span>
              <span class="s2">&quot;tp_dst&quot;</span><span class="p">:</span> <span class="mi">5002</span><span class="p">,</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;nw_dst&quot;</span><span class="p">:</span> <span class="s2">&quot;172.16.20.10&quot;</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;mark&quot;</span><span class="p">:</span> <span class="s2">&quot;26&quot;</span>
                <span class="p">}</span>
              <span class="p">]</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;nw_proto&quot;</span><span class="p">:</span> <span class="s2">&quot;UDP&quot;</span><span class="p">,</span>
              <span class="s2">&quot;tp_dst&quot;</span><span class="p">:</span> <span class="mi">5003</span><span class="p">,</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
              <span class="s2">&quot;nw_dst&quot;</span><span class="p">:</span> <span class="s2">&quot;172.16.20.10&quot;</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;mark&quot;</span><span class="p">:</span> <span class="s2">&quot;34&quot;</span>
                <span class="p">}</span>
              <span class="p">]</span>
            <span class="p">}</span>
          <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>Measuring the bandwidth<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Try to measure the bandwidth by using iperf.
In the following example, h1(server) listens on the port 5001, 5002 and
5003 with UDP protocol.
h2(client) sends 1Mbps UDP traffic to the port 5001 on h1, 300Kbps UDP
traffic to the port 5002 on h1 and 600Kbps UDP traffic to the port 5003.</p>
<p>First, start 2 xterm on h2.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">h2</span>
<span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">h2</span>
</pre></div>
</div>
<p>Node: h1(1) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -s -u -p 5002 &amp;</span>
<span class="o">...</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -s -u -p 5003 &amp;</span>
<span class="o">...</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -s -u -i 1 5001</span>
<span class="o">------------------------------------------------------------</span>
<span class="n">Server</span> <span class="n">listening</span> <span class="n">on</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="n">Receiving</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span>  <span class="mi">208</span> <span class="n">KByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
</pre></div>
</div>
<p>Node: h2(1) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -c 172.16.20.10 -p 5001 -u -b 1M</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Node: h2(2) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -c 172.16.20.10 -p 5002 -u -b 300K</span>
<span class="o">------------------------------------------------------------</span>
<span class="n">Client</span> <span class="n">connecting</span> <span class="n">to</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">20.10</span><span class="p">,</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5002</span>
<span class="n">Sending</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span>  <span class="mi">208</span> <span class="n">KByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">local</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">10.10</span> <span class="n">port</span> <span class="mi">44077</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">20.10</span> <span class="n">port</span> <span class="mi">5002</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.1</span> <span class="n">sec</span>   <span class="mi">369</span> <span class="n">KBytes</span>   <span class="mi">300</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Sent</span> <span class="mi">257</span> <span class="n">datagrams</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Server</span> <span class="n">Report</span><span class="p">:</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.2</span> <span class="n">sec</span>   <span class="mi">369</span> <span class="n">KBytes</span>   <span class="mi">295</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">17.379</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">257</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
</pre></div>
</div>
<p>Node: h2(3) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -c 172.16.20.10 -p 5003 -u -b 600K</span>
<span class="o">------------------------------------------------------------</span>
<span class="n">Client</span> <span class="n">connecting</span> <span class="n">to</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">20.10</span><span class="p">,</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5003</span>
<span class="n">Sending</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span>  <span class="mi">208</span> <span class="n">KByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">local</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">10.10</span> <span class="n">port</span> <span class="mi">59280</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">20.10</span> <span class="n">port</span> <span class="mi">5003</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">735</span> <span class="n">KBytes</span>   <span class="mi">600</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Sent</span> <span class="mi">512</span> <span class="n">datagrams</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Server</span> <span class="n">Report</span><span class="p">:</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">735</span> <span class="n">KBytes</span>   <span class="mi">600</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">5.401</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">512</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
</pre></div>
</div>
<p>Node: h1(1) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">local</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">20.10</span> <span class="n">port</span> <span class="mi">5001</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">172.16</span><span class="o">.</span><span class="mf">10.10</span> <span class="n">port</span> <span class="mi">37329</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>        <span class="n">Jitter</span>   <span class="n">Lost</span><span class="o">/</span><span class="n">Total</span> <span class="n">Datagrams</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span> <span class="mf">1.0</span> <span class="n">sec</span>   <span class="mi">119</span> <span class="n">KBytes</span>   <span class="mi">976</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.639</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">83</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">1.0</span><span class="o">-</span> <span class="mf">2.0</span> <span class="n">sec</span>   <span class="mi">118</span> <span class="n">KBytes</span>   <span class="mi">964</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.680</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">82</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">2.0</span><span class="o">-</span> <span class="mf">3.0</span> <span class="n">sec</span>  <span class="mf">87.6</span> <span class="n">KBytes</span>   <span class="mi">717</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">5.817</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">61</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">3.0</span><span class="o">-</span> <span class="mf">4.0</span> <span class="n">sec</span>  <span class="mf">81.8</span> <span class="n">KBytes</span>   <span class="mi">670</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">5.700</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">57</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">4.0</span><span class="o">-</span> <span class="mf">5.0</span> <span class="n">sec</span>  <span class="mf">66.0</span> <span class="n">KBytes</span>   <span class="mi">541</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">12.772</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">46</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">5.0</span><span class="o">-</span> <span class="mf">6.0</span> <span class="n">sec</span>  <span class="mf">8.61</span> <span class="n">KBytes</span>  <span class="mf">70.6</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">60.590</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">6</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">6.0</span><span class="o">-</span> <span class="mf">7.0</span> <span class="n">sec</span>  <span class="mf">8.61</span> <span class="n">KBytes</span>  <span class="mf">70.6</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">89.968</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">6</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">7.0</span><span class="o">-</span> <span class="mf">8.0</span> <span class="n">sec</span>  <span class="mf">8.61</span> <span class="n">KBytes</span>  <span class="mf">70.6</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">108.364</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">6</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">8.0</span><span class="o">-</span> <span class="mf">9.0</span> <span class="n">sec</span>  <span class="mf">10.0</span> <span class="n">KBytes</span>  <span class="mf">82.3</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">125.635</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">7</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">9.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>  <span class="mf">8.61</span> <span class="n">KBytes</span>  <span class="mf">70.6</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">130.604</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">6</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">10.0</span><span class="o">-</span><span class="mf">11.0</span> <span class="n">sec</span>  <span class="mf">8.61</span> <span class="n">KBytes</span>  <span class="mf">70.6</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">140.192</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">6</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">11.0</span><span class="o">-</span><span class="mf">12.0</span> <span class="n">sec</span>  <span class="mf">8.61</span> <span class="n">KBytes</span>  <span class="mf">70.6</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">144.411</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>    <span class="mi">6</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">12.0</span><span class="o">-</span><span class="mf">13.0</span> <span class="n">sec</span>  <span class="mf">28.7</span> <span class="n">KBytes</span>   <span class="mi">235</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">63.964</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">20</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">13.0</span><span class="o">-</span><span class="mf">14.0</span> <span class="n">sec</span>  <span class="mf">44.5</span> <span class="n">KBytes</span>   <span class="mi">365</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">26.721</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">31</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">14.0</span><span class="o">-</span><span class="mf">15.0</span> <span class="n">sec</span>  <span class="mf">57.4</span> <span class="n">KBytes</span>   <span class="mi">470</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">9.396</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">40</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">15.0</span><span class="o">-</span><span class="mf">16.0</span> <span class="n">sec</span>   <span class="mi">118</span> <span class="n">KBytes</span>   <span class="mi">964</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.956</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">82</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">16.0</span><span class="o">-</span><span class="mf">17.0</span> <span class="n">sec</span>   <span class="mi">119</span> <span class="n">KBytes</span>   <span class="mi">976</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.820</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">83</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">17.0</span><span class="o">-</span><span class="mf">18.0</span> <span class="n">sec</span>   <span class="mi">118</span> <span class="n">KBytes</span>   <span class="mi">964</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.741</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">82</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="mf">18.0</span><span class="o">-</span><span class="mf">19.0</span> <span class="n">sec</span>   <span class="mi">118</span> <span class="n">KBytes</span>   <span class="mi">964</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.839</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>   <span class="mi">82</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">19.7</span> <span class="n">sec</span>  <span class="mf">1.19</span> <span class="n">MBytes</span>   <span class="mi">508</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">0.981</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">852</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
</pre></div>
</div>
<p>The above result shows the traffic marked with AF41 (sent to the port 5002) is
guaranteed 500Kbps bandwidth, and the traffic marked with AF31 (sent to the
port 5003) is guaranteed 200Kbps bandwidth.
On the other hand, the bandwidth of best-effort traffic is limited while
the traffic marked with AF class is communicating.</p>
<p>In this way, we were able to confirm that it is possible to realize a QoS by
using DiffServ model.</p>
</div>
</div>
<div class="section" id="example-of-the-operation-of-qos-by-using-meter-table">
<h2>Example of the operation of QoS by using Meter Table<a class="headerlink" href="#example-of-the-operation-of-qos-by-using-meter-table" title="Permalink to this headline">¶</a></h2>
<p>Meter Table is introduced in the OpenFlow 1.3, makes it enable to use policing of traffic in OpenFlow mechanism.
This chapter describes example of the use of Meter Table. This example uses the OpenFlow Switch ofsoftswitch13(<a class="reference external" href="https://github.com/CPqD/ofsoftswitch13">https://github.com/CPqD/ofsoftswitch13</a>).
This switch supports Meter Table.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This section does not describe the installation instructions for ofsoftswitch13.</p>
<p class="last">Reference: <a class="reference external" href="https://github.com/CPqD/ofsoftswitch13/wiki/OpenFlow-1.3-Tutorial">https://github.com/CPqD/ofsoftswitch13/wiki/OpenFlow-1.3-Tutorial</a></p>
</div>
<p>The following shows an example of the network composed of the multiple DiffServ domain (DS domain).
Traffic metering are executed by the router (edge router) located on the boundary of the DS domain,
and the traffic that exceeds the specified bandwidth will be re-marking.
Usually, re-marked packets are dropped preferentially or treated as low priority class.
In this example, perform the bandwidth guarantee of 800Kbps to AF1 class.
Also, AF11 class traffic transferred from each DS domain is guaranteed with  400Kbps bandwidth.
Traffic that is more than 400kbps is treated as excess traffic, and re-marked with AF12 class.
However, it is still guaranteed that AF12 class is more preferentially transferred than the best effort class.</p>
<a class="reference internal image-reference" href="_images/fig32.png"><img alt="_images/fig32.png" class="align-center" src="_images/fig32.png" style="width: 414.4px; height: 279.6px;" /></a>
<div class="section" id="id6">
<h3>Building the environment<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>First, build an environment on Mininet.
Build a topology using a python script.</p>
<p>source code: <code class="docutils literal"><span class="pre">qos_sample_topology.py</span></code></p>
<div class="sourcecode highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mininet.net</span> <span class="k">import</span> <span class="n">Mininet</span>
<span class="kn">from</span> <span class="nn">mininet.cli</span> <span class="k">import</span> <span class="n">CLI</span>
<span class="kn">from</span> <span class="nn">mininet.topo</span> <span class="k">import</span> <span class="n">Topo</span>
<span class="kn">from</span> <span class="nn">mininet.node</span> <span class="k">import</span> <span class="n">UserSwitch</span>
<span class="kn">from</span> <span class="nn">mininet.node</span> <span class="k">import</span> <span class="n">RemoteController</span>

<span class="k">class</span> <span class="nc">SliceableSwitch</span><span class="p">(</span><span class="n">UserSwitch</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">UserSwitch</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyTopo</span><span class="p">(</span><span class="n">Topo</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="s2">&quot;Create custom topo.&quot;</span>
        <span class="c1"># Initialize topology</span>
        <span class="n">Topo</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">)</span>
        <span class="c1"># Add hosts and switches</span>
        <span class="n">host01</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addHost</span><span class="p">(</span><span class="s1">&#39;h1&#39;</span><span class="p">)</span>
        <span class="n">host02</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addHost</span><span class="p">(</span><span class="s1">&#39;h2&#39;</span><span class="p">)</span>
        <span class="n">host03</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addHost</span><span class="p">(</span><span class="s1">&#39;h3&#39;</span><span class="p">)</span>
        <span class="n">switch01</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addSwitch</span><span class="p">(</span><span class="s1">&#39;s1&#39;</span><span class="p">)</span>
        <span class="n">switch02</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addSwitch</span><span class="p">(</span><span class="s1">&#39;s2&#39;</span><span class="p">)</span>
        <span class="n">switch03</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addSwitch</span><span class="p">(</span><span class="s1">&#39;s3&#39;</span><span class="p">)</span>
        <span class="c1"># Add links</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLink</span><span class="p">(</span><span class="n">host01</span><span class="p">,</span> <span class="n">switch01</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLink</span><span class="p">(</span><span class="n">host02</span><span class="p">,</span> <span class="n">switch02</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLink</span><span class="p">(</span><span class="n">host03</span><span class="p">,</span> <span class="n">switch03</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLink</span><span class="p">(</span><span class="n">switch01</span><span class="p">,</span> <span class="n">switch02</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLink</span><span class="p">(</span><span class="n">switch01</span><span class="p">,</span> <span class="n">switch03</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="n">net</span><span class="p">):</span>
    <span class="n">s1</span> <span class="o">=</span> <span class="n">net</span><span class="o">.</span><span class="n">getNodeByName</span><span class="p">(</span><span class="s1">&#39;s1&#39;</span><span class="p">)</span>
    <span class="n">s1</span><span class="o">.</span><span class="n">cmdPrint</span><span class="p">(</span><span class="s1">&#39;dpctl unix:/tmp/s1 queue-mod 1 1 80&#39;</span><span class="p">)</span>
    <span class="n">s1</span><span class="o">.</span><span class="n">cmdPrint</span><span class="p">(</span><span class="s1">&#39;dpctl unix:/tmp/s1 queue-mod 1 2 120&#39;</span><span class="p">)</span>
    <span class="n">s1</span><span class="o">.</span><span class="n">cmdPrint</span><span class="p">(</span><span class="s1">&#39;dpctl unix:/tmp/s1 queue-mod 1 3 800&#39;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">genericTest</span><span class="p">(</span><span class="n">topo</span><span class="p">):</span>
    <span class="n">net</span> <span class="o">=</span> <span class="n">Mininet</span><span class="p">(</span><span class="n">topo</span><span class="o">=</span><span class="n">topo</span><span class="p">,</span> <span class="n">switch</span><span class="o">=</span><span class="n">SliceableSwitch</span><span class="p">,</span>
        <span class="n">controller</span><span class="o">=</span><span class="n">RemoteController</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="n">run</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
    <span class="n">CLI</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">topo</span> <span class="o">=</span> <span class="n">MyTopo</span><span class="p">()</span>
    <span class="n">genericTest</span><span class="p">(</span><span class="n">topo</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Change the link speed of ofsoftswitch13 to 1Mbps in advance.</p>
<p>First, modify the sourcecode of ofsoftswitch13.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span>$ cd ofsoftswitch13
$ gedit lib/netdev.c
</pre></div>
</div>
<p>lib/netdev.c:</p>
<div class="sourcecode highlight-default"><div class="highlight"><pre><span></span><span class="mi">644</span>           <span class="k">if</span> <span class="p">(</span><span class="n">ecmd</span><span class="o">.</span><span class="n">autoneg</span><span class="p">)</span> <span class="p">{</span>
<span class="mi">645</span>               <span class="n">netdev</span><span class="o">-&gt;</span><span class="n">curr</span> <span class="o">|=</span> <span class="n">OFPPF_AUTONEG</span><span class="p">;</span>
<span class="mi">646</span>           <span class="p">}</span>
<span class="mi">647</span>
<span class="mi">648</span> <span class="o">-</span>         <span class="n">netdev</span><span class="o">-&gt;</span><span class="n">speed</span> <span class="o">=</span> <span class="n">ecmd</span><span class="o">.</span><span class="n">speed</span><span class="p">;</span>
<span class="mi">649</span> <span class="o">+</span>         <span class="n">netdev</span><span class="o">-&gt;</span><span class="n">speed</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>  <span class="o">/*</span> <span class="n">Fix</span> <span class="n">to</span> <span class="mi">1</span><span class="n">Mbps</span> <span class="n">link</span> <span class="o">*/</span>
<span class="mi">650</span>
<span class="mi">651</span>       <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
<span class="mi">652</span>           <span class="n">VLOG_DBG</span><span class="p">(</span><span class="n">LOG_MODULE</span><span class="p">,</span> <span class="s2">&quot;ioctl(SIOCETHTOOL) failed: </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span> <span class="n">strerror</span><span class="p">(</span><span class="n">errno</span><span class="p">));</span>
<span class="mi">653</span>       <span class="p">}</span>
</pre></div>
</div>
<p>Then, re-install ofsoftswitch13.</p>
<div class="console last highlight-default"><div class="highlight"><pre><span></span>$ make clean
$ ./boot.sh
$ ./configure
$ make
$ sudo make install
</pre></div>
</div>
</div>
<p>An execution example is as follows.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span>mininet@mininet-vm:~$ sudo python qos_sample_topology.py
Unable to contact the remote controller at 127.0.0.1:6633
mininet&gt;
</pre></div>
</div>
<p>Also, start two xterm for the controller.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">c0</span>
<span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">c0</span>
<span class="n">mininet</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>Next, modify the simple_switch_13.py used in &#8220;<a class="reference internal" href="switching_hub.html#ch-switching-hub"><span class="std std-ref">Switching Hub</span></a>&#8221;.
rest_qos.py suppose to be processed on Flow Table pipeline processing,modify simple_switch_13.py to register flow entry into table id:1.</p>
<p>controller: c0 (root)</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># sed &#39;/OFPFlowMod(/,/)/s/)/, table_id=1)/&#39; ryu/ryu/app/simple_switch_13.py &gt; ryu/ryu/app/qos_simple_switch_13.py</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># cd ryu/; python ./setup.py install</span>
</pre></div>
</div>
<p>Finally, start rest_qos and qos_simple_switch_13 on xterm of controller.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@mininet</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~/</span><span class="n">ryu</span><span class="c1"># ryu-manager ryu.app.rest_qos ryu.app.qos_simple_switch_13</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">rest_qos</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">qos_simple_switch_13</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span>
<span class="n">loading</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="kc">None</span> <span class="n">of</span> <span class="n">DPSet</span>
<span class="n">creating</span> <span class="n">context</span> <span class="n">dpset</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="kc">None</span> <span class="n">of</span> <span class="n">ConfSwitchSet</span>
<span class="n">creating</span> <span class="n">context</span> <span class="n">conf_switch</span>
<span class="n">creating</span> <span class="n">context</span> <span class="n">wsgi</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">qos_simple_switch_13</span> <span class="n">of</span> <span class="n">SimpleSwitch13</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">controller</span><span class="o">.</span><span class="n">ofp_handler</span> <span class="n">of</span> <span class="n">OFPHandler</span>
<span class="n">instantiating</span> <span class="n">app</span> <span class="n">ryu</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">rest_qos</span> <span class="n">of</span> <span class="n">RestQoSAPI</span>
<span class="p">(</span><span class="mi">2348</span><span class="p">)</span> <span class="n">wsgi</span> <span class="n">starting</span> <span class="n">up</span> <span class="n">on</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span><span class="p">:</span><span class="mi">8080</span><span class="o">/</span>
</pre></div>
</div>
<p>After a successful connection between the switch and Ryu, the following message appears.</p>
<p>controller: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">QoS</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">dpid</span><span class="o">=</span><span class="mi">0000000000000003</span><span class="p">:</span> <span class="n">Join</span> <span class="n">qos</span> <span class="n">switch</span><span class="o">.</span>
<span class="p">[</span><span class="n">QoS</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">dpid</span><span class="o">=</span><span class="mi">0000000000000001</span><span class="p">:</span> <span class="n">Join</span> <span class="n">qos</span> <span class="n">switch</span><span class="o">.</span>
<span class="p">[</span><span class="n">QoS</span><span class="p">][</span><span class="n">INFO</span><span class="p">]</span> <span class="n">dpid</span><span class="o">=</span><span class="mi">0000000000000002</span><span class="p">:</span> <span class="n">Join</span> <span class="n">qos</span> <span class="n">switch</span><span class="o">.</span>
<span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="setting-qos">
<h3>Setting QoS<a class="headerlink" href="#setting-qos" title="Permalink to this headline">¶</a></h3>
<p>Install the following flow entry in accordance with DSCP value into the router (s1).</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="27%" />
<col width="27%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">(Priority)</th>
<th class="head">DSCP</th>
<th class="head">Queue ID</th>
<th class="head">(QoS ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>0 (BE)</td>
<td>1</td>
<td>1</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>12(AF12)</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="row-even"><td>1</td>
<td>10(AF11)</td>
<td>3</td>
<td>3</td>
</tr>
</tbody>
</table>
<p>Node: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;0&quot;, &quot;in_port&quot;: &quot;2&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;1&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=1&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;10&quot;, &quot;in_port&quot;: &quot;2&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;3&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=2&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;12&quot;, &quot;in_port&quot;: &quot;2&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;2&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=3&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;0&quot;, &quot;in_port&quot;: &quot;3&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;1&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=4&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;10&quot;, &quot;in_port&quot;: &quot;3&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;3&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=5&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;12&quot;, &quot;in_port&quot;: &quot;3&quot;}, &quot;actions&quot;:{&quot;queue&quot;: &quot;2&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=6&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>
</div>
<p>Install the following meter entries to the switches (s2, s3).</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="11%" />
<col width="27%" />
<col width="27%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head" colspan="2">(Priority)</th>
<th class="head">DSCP</th>
<th class="head">Meter ID</th>
<th class="head">(QoS ID)</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td colspan="2">1</td>
<td>10(AF11)</td>
<td>1</td>
<td>1</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="21%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Meter ID</th>
<th class="head">Flags</th>
<th class="head">Bands</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>KBPS</td>
<td>type:DSCP_REMARK,
rate:400000,
prec_level:1</td>
</tr>
</tbody>
</table>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;10&quot;}, &quot;actions&quot;:{&quot;meter&quot;: &quot;1&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000002</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000002&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=1&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;meter_id&quot;: &quot;1&quot;, &quot;flags&quot;: &quot;KBPS&quot;, &quot;bands&quot;:[{&quot;type&quot;:&quot;DSCP_REMARK&quot;, &quot;rate&quot;: &quot;400&quot;, &quot;prec_level&quot;: &quot;1&quot;}]}&#39; http://localhost:8080/qos/meter/0000000000000002</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000002&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;Meter added. : Meter ID=1&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;match&quot;: {&quot;ip_dscp&quot;: &quot;10&quot;}, &quot;actions&quot;:{&quot;meter&quot;: &quot;1&quot;}}&#39; http://localhost:8080/qos/rules/0000000000000003</span>
<span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000003&quot;</span><span class="p">,</span>
    <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
        <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;QoS added. : qos_id=1&quot;</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X POST -d &#39;{&quot;meter_id&quot;: &quot;1&quot;, &quot;flags&quot;: &quot;KBPS&quot;, &quot;bands&quot;:[{&quot;type&quot;:&quot;DSCP_REMARK&quot;, &quot;rate&quot;: &quot;400&quot;, &quot;prec_level&quot;: &quot;1&quot;}]}&#39; http://localhost:8080/qos/meter/0000000000000003</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000003&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span><span class="p">,</span>
          <span class="s2">&quot;details&quot;</span><span class="p">:</span> <span class="s2">&quot;Meter added. : Meter ID=1&quot;</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h3>Verifying the Setting<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>Check the contents of the setting of each switch.</p>
<p>Node: c0 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X GET http://localhost:8080/qos/rules/0000000000000001</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000001&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;qos&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;queue&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span>
                <span class="p">}</span>
              <span class="p">],</span>
              <span class="s2">&quot;in_port&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;queue&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span>
                <span class="p">}</span>
              <span class="p">],</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
              <span class="s2">&quot;in_port&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
              <span class="s2">&quot;ip_dscp&quot;</span><span class="p">:</span> <span class="mi">10</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;queue&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span>
                <span class="p">}</span>
              <span class="p">],</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
              <span class="s2">&quot;in_port&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
              <span class="s2">&quot;ip_dscp&quot;</span><span class="p">:</span> <span class="mi">12</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;queue&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span>
                <span class="p">}</span>
              <span class="p">],</span>
              <span class="s2">&quot;in_port&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">4</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;queue&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span>
                <span class="p">}</span>
              <span class="p">],</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
              <span class="s2">&quot;in_port&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
              <span class="s2">&quot;ip_dscp&quot;</span><span class="p">:</span> <span class="mi">10</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;queue&quot;</span><span class="p">:</span> <span class="s2">&quot;2&quot;</span>
                <span class="p">}</span>
              <span class="p">],</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
              <span class="s2">&quot;in_port&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
              <span class="s2">&quot;ip_dscp&quot;</span><span class="p">:</span> <span class="mi">12</span>
            <span class="p">}</span>
          <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X GET http://localhost:8080/qos/rules/0000000000000002</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000002&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;qos&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;ip_dscp&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;meter&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span>
                <span class="p">}</span>
              <span class="p">],</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">}</span>
          <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>

<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># curl -X GET http://localhost:8080/qos/rules/0000000000000003</span>
  <span class="p">[</span>
    <span class="p">{</span>
      <span class="s2">&quot;switch_id&quot;</span><span class="p">:</span> <span class="s2">&quot;0000000000000003&quot;</span><span class="p">,</span>
      <span class="s2">&quot;command_result&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="s2">&quot;qos&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="s2">&quot;priority&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
              <span class="s2">&quot;dl_type&quot;</span><span class="p">:</span> <span class="s2">&quot;IPv4&quot;</span><span class="p">,</span>
              <span class="s2">&quot;ip_dscp&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
              <span class="s2">&quot;actions&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                  <span class="s2">&quot;meter&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span>
                <span class="p">}</span>
              <span class="p">],</span>
              <span class="s2">&quot;qos_id&quot;</span><span class="p">:</span> <span class="mi">1</span>
            <span class="p">}</span>
          <span class="p">]</span>
        <span class="p">}</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h3>Measuring the bandwidth<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>Try to measure the bandwidth by using iperf.
h1(server) is listening on port 5001 and 5002 and port 5003 in the UDP protocol.
h2, h3 (client) sends the traffic of each class addressed to h1.</p>
<p>First, start 4 xterm as follows.</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">h1</span>
<span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">h2</span>
<span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">h3</span>
<span class="n">mininet</span><span class="o">&gt;</span> <span class="n">xterm</span> <span class="n">h3</span>
<span class="o">...</span>
</pre></div>
</div>
<p>Node: h1(1) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -s -u -p 5001 &amp;</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -s -u -p 5002 &amp;</span>
<span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -s -u -p 5003 &amp;</span>
<span class="o">...</span>
</pre></div>
</div>
<div class="section" id="best-effort-traffic-af11-excess-traffic">
<h4>Best-effort traffic &amp; AF11 excess traffic<a class="headerlink" href="#best-effort-traffic-af11-excess-traffic" title="Permalink to this headline">¶</a></h4>
<p>Node: h2 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -c 10.0.0.1 -p 5001 -u -b 800K</span>
<span class="o">------------------------------------------------------------</span>
<span class="n">Client</span> <span class="n">connecting</span> <span class="n">to</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="n">Sending</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span>  <span class="mi">208</span> <span class="n">KByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">local</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.3</span> <span class="n">port</span> <span class="mi">60324</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">979</span> <span class="n">KBytes</span>   <span class="mi">800</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Sent</span> <span class="mi">682</span> <span class="n">datagrams</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Server</span> <span class="n">Report</span><span class="p">:</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">11.9</span> <span class="n">sec</span>   <span class="mi">650</span> <span class="n">KBytes</span>   <span class="mi">449</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">18.458</span> <span class="n">ms</span>  <span class="mi">229</span><span class="o">/</span>  <span class="mi">682</span> <span class="p">(</span><span class="mi">34</span><span class="o">%</span><span class="p">)</span>
</pre></div>
</div>
<p>Node: h3(1) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -c 10.0.0.1 -p 5002 -u -b 600K --tos 0x28</span>
<span class="o">------------------------------------------------------------</span>
<span class="n">Client</span> <span class="n">connecting</span> <span class="n">to</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5002</span>
<span class="n">Sending</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span>  <span class="mi">208</span> <span class="n">KByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">local</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.2</span> <span class="n">port</span> <span class="mi">53661</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="n">port</span> <span class="mi">5002</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">735</span> <span class="n">KBytes</span>   <span class="mi">600</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Sent</span> <span class="mi">512</span> <span class="n">datagrams</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Server</span> <span class="n">Report</span><span class="p">:</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">735</span> <span class="n">KBytes</span>   <span class="mi">600</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>   <span class="mf">7.497</span> <span class="n">ms</span>    <span class="mi">6</span><span class="o">/</span>  <span class="mi">512</span> <span class="p">(</span><span class="mf">1.2</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>  <span class="mi">6</span> <span class="n">datagrams</span> <span class="n">received</span> <span class="n">out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">order</span>
</pre></div>
</div>
<p>The above result shows, even if the traffic of AF11 exceeds the contracted bandwidth 400Kbps,
AF11 is more preferentially guaranteed bandwidth than traffic of best effort.</p>
</div>
<div class="section" id="af11-excess-traffic-best-effort-traffic-af11-non-excess-traffic">
<h4>AF11 excess traffic &amp; Best-effort traffic &amp; AF11 non-excess traffic<a class="headerlink" href="#af11-excess-traffic-best-effort-traffic-af11-non-excess-traffic" title="Permalink to this headline">¶</a></h4>
<p>Node: h2 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -c 10.0.0.1 -p 5001 -u -b 600K --tos 0x28</span>
<span class="o">------------------------------------------------------------</span>
<span class="n">Client</span> <span class="n">connecting</span> <span class="n">to</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="n">Sending</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span>  <span class="mi">208</span> <span class="n">KByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">local</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.2</span> <span class="n">port</span> <span class="mi">49358</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">735</span> <span class="n">KBytes</span>   <span class="mi">600</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Sent</span> <span class="mi">512</span> <span class="n">datagrams</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Server</span> <span class="n">Report</span><span class="p">:</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">666</span> <span class="n">KBytes</span>   <span class="mi">544</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">500.361</span> <span class="n">ms</span>   <span class="mi">48</span><span class="o">/</span>  <span class="mi">512</span> <span class="p">(</span><span class="mf">9.4</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>  <span class="mi">192</span> <span class="n">datagrams</span> <span class="n">received</span> <span class="n">out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">order</span>
</pre></div>
</div>
<p>Node: h3(1) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -c 10.0.0.1 -p 5002 -u -b 500K</span>
<span class="o">------------------------------------------------------------</span>
<span class="n">Client</span> <span class="n">connecting</span> <span class="n">to</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5002</span>
<span class="n">Sending</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span>  <span class="mi">208</span> <span class="n">KByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">local</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.3</span> <span class="n">port</span> <span class="mi">42759</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="n">port</span> <span class="mi">5002</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">613</span> <span class="n">KBytes</span>   <span class="mi">500</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Sent</span> <span class="mi">427</span> <span class="n">datagrams</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">WARNING</span><span class="p">:</span> <span class="n">did</span> <span class="ow">not</span> <span class="n">receive</span> <span class="n">ack</span> <span class="n">of</span> <span class="n">last</span> <span class="n">datagram</span> <span class="n">after</span> <span class="mi">10</span> <span class="n">tries</span><span class="o">.</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Server</span> <span class="n">Report</span><span class="p">:</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">14.0</span> <span class="n">sec</span>   <span class="mi">359</span> <span class="n">KBytes</span>   <span class="mi">210</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">102.479</span> <span class="n">ms</span>  <span class="mi">177</span><span class="o">/</span>  <span class="mi">427</span> <span class="p">(</span><span class="mi">41</span><span class="o">%</span><span class="p">)</span>
</pre></div>
</div>
<p>Node: h3(2) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -c 10.0.0.1 -p 5003 -u -b 400K --tos 0x28</span>
<span class="o">------------------------------------------------------------</span>
<span class="n">Client</span> <span class="n">connecting</span> <span class="n">to</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5003</span>
<span class="n">Sending</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span>  <span class="mi">208</span> <span class="n">KByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">local</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.3</span> <span class="n">port</span> <span class="mi">35475</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="n">port</span> <span class="mi">5003</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.1</span> <span class="n">sec</span>   <span class="mi">491</span> <span class="n">KBytes</span>   <span class="mi">400</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Sent</span> <span class="mi">342</span> <span class="n">datagrams</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Server</span> <span class="n">Report</span><span class="p">:</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.5</span> <span class="n">sec</span>   <span class="mi">491</span> <span class="n">KBytes</span>   <span class="mi">384</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">15.422</span> <span class="n">ms</span>    <span class="mi">0</span><span class="o">/</span>  <span class="mi">342</span> <span class="p">(</span><span class="mi">0</span><span class="o">%</span><span class="p">)</span>
</pre></div>
</div>
<p>The above result shows, traffic within the contracted bandwidth of 400Kbps are not dropped.</p>
</div>
<div class="section" id="af11-excess-traffic-af11-excess-traffic">
<h4>AF11 excess traffic &amp; AF11 excess traffic<a class="headerlink" href="#af11-excess-traffic-af11-excess-traffic" title="Permalink to this headline">¶</a></h4>
<p>Node: h2 (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -c 10.0.0.1 -p 5001 -u -b 600K --tos 0x28</span>
<span class="o">------------------------------------------------------------</span>
<span class="n">Client</span> <span class="n">connecting</span> <span class="n">to</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="n">Sending</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span>  <span class="mi">208</span> <span class="n">KByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">local</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.3</span> <span class="n">port</span> <span class="mi">50761</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="n">port</span> <span class="mi">5001</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">735</span> <span class="n">KBytes</span>   <span class="mi">600</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Sent</span> <span class="mi">512</span> <span class="n">datagrams</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Server</span> <span class="n">Report</span><span class="p">:</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">11.0</span> <span class="n">sec</span>   <span class="mi">673</span> <span class="n">KBytes</span>   <span class="mi">501</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">964.490</span> <span class="n">ms</span>   <span class="mi">43</span><span class="o">/</span>  <span class="mi">512</span> <span class="p">(</span><span class="mf">8.4</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">11.0</span> <span class="n">sec</span>  <span class="mi">95</span> <span class="n">datagrams</span> <span class="n">received</span> <span class="n">out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">order</span>
</pre></div>
</div>
<p>Node: h3(1) (root):</p>
<div class="console highlight-default"><div class="highlight"><pre><span></span><span class="n">root</span><span class="nd">@ryu</span><span class="o">-</span><span class="n">vm</span><span class="p">:</span><span class="o">~</span><span class="c1"># iperf -c 10.0.0.1 -p 5002 -u -b 600K --tos 0x28</span>
<span class="o">------------------------------------------------------------</span>
<span class="n">Client</span> <span class="n">connecting</span> <span class="n">to</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span><span class="p">,</span> <span class="n">UDP</span> <span class="n">port</span> <span class="mi">5002</span>
<span class="n">Sending</span> <span class="mi">1470</span> <span class="n">byte</span> <span class="n">datagrams</span>
<span class="n">UDP</span> <span class="n">buffer</span> <span class="n">size</span><span class="p">:</span>  <span class="mi">208</span> <span class="n">KByte</span> <span class="p">(</span><span class="n">default</span><span class="p">)</span>
<span class="o">------------------------------------------------------------</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">local</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.2</span> <span class="n">port</span> <span class="mi">53066</span> <span class="n">connected</span> <span class="k">with</span> <span class="mf">10.0</span><span class="o">.</span><span class="mf">0.1</span> <span class="n">port</span> <span class="mi">5002</span>
<span class="p">[</span> <span class="n">ID</span><span class="p">]</span> <span class="n">Interval</span>       <span class="n">Transfer</span>     <span class="n">Bandwidth</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.0</span> <span class="n">sec</span>   <span class="mi">735</span> <span class="n">KBytes</span>   <span class="mi">600</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Sent</span> <span class="mi">512</span> <span class="n">datagrams</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span> <span class="n">Server</span> <span class="n">Report</span><span class="p">:</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.6</span> <span class="n">sec</span>   <span class="mi">665</span> <span class="n">KBytes</span>   <span class="mi">515</span> <span class="n">Kbits</span><span class="o">/</span><span class="n">sec</span>  <span class="mf">897.126</span> <span class="n">ms</span>   <span class="mi">49</span><span class="o">/</span>  <span class="mi">512</span> <span class="p">(</span><span class="mf">9.6</span><span class="o">%</span><span class="p">)</span>
<span class="p">[</span>  <span class="mi">4</span><span class="p">]</span>  <span class="mf">0.0</span><span class="o">-</span><span class="mf">10.6</span> <span class="n">sec</span>  <span class="mi">93</span> <span class="n">datagrams</span> <span class="n">received</span> <span class="n">out</span><span class="o">-</span><span class="n">of</span><span class="o">-</span><span class="n">order</span>
</pre></div>
</div>
<p>The above result shows, two excess traffic are droped in the same rate.</p>
<p>In this section, you learned how to use the QoS REST API with specific examples.</p>
</div>
</div>
</div>
<div class="section" id="rest-api-list">
<h2>REST API List<a class="headerlink" href="#rest-api-list" title="Permalink to this headline">¶</a></h2>
<p>A list of REST API of rest_qos introduced in this section.</p>
<div class="section" id="get-queue-status">
<h3>Get queue status<a class="headerlink" href="#get-queue-status" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>GET</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/queue/status/{<strong>switch</strong>}</p>
<p class="last">&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-queue-configuration">
<h3>Get queue configuration<a class="headerlink" href="#get-queue-configuration" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>GET</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/queue/{<strong>switch</strong>}</p>
<p class="last">&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>Remarks</strong></td>
<td>It is possible to get only queue configuration after start of the QoS REST API.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="set-queue">
<h3>Set queue<a class="headerlink" href="#set-queue" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>POST</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/queue/{<strong>switch</strong>}</p>
<p class="last">&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>Data</strong></td>
<td><p class="first"><strong>port_name</strong>:[Port name]</p>
<p><strong>type</strong>:[linux-htb | linux-hfsc]</p>
<p><strong>max_rate</strong>:[Bandwidth(bps)]</p>
<p><strong>queues</strong>:</p>
<blockquote class="last">
<div><p><strong>max_rate</strong>:[Bandwidth(bps)]</p>
<p><strong>min_rate</strong>:[Bandwidth(bps)]</p>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><strong>Remarks</strong></td>
<td><p class="first">If an action of the given type exists in the current set,
overwrite it.</p>
<p>This command is compatible with only Open vSwitch.</p>
<p>port_name on Data is optional.</p>
<p class="last">If you do not specify a port_name, it is set to OFPP_ANY.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="delete-queue">
<h3>Delete queue<a class="headerlink" href="#delete-queue" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>DELETE</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/queue/{<strong>swtich</strong>}</p>
<p class="last">&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>Remarks</strong></td>
<td>Remove the association with QoS record of OVSDB</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-all-of-qos-rules">
<h3>Get all of QoS rules<a class="headerlink" href="#get-all-of-qos-rules" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>GET</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/rules/{<strong>switch</strong>}[/{<strong>vlan</strong>}]</p>
<p>&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
<p class="last">&#8211;<strong>vlan</strong>: [ &#8220;all&#8221; | <em>VLAN ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>Remarks</strong></td>
<td>VLAN ID on URL is optional.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="set-a-qos-rule">
<h3>Set a QoS rule<a class="headerlink" href="#set-a-qos-rule" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>POST</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/rules/{<strong>switch</strong>}[/{<strong>vlan</strong>}]</p>
<p>&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
<p class="last">&#8211;<strong>vlan</strong>: [ &#8220;all&#8221; | <em>VLAN ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>Data</strong></td>
<td><p class="first"><strong>priority</strong>:[ 0 - 65535 ]</p>
<p><strong>match</strong>:</p>
<blockquote>
<div><p><strong>in_port</strong>:[ 0 - 65535 ]</p>
<p><strong>dl_src</strong>:&#8221;&lt;xx:xx:xx:xx:xx:xx&gt;&#8221;</p>
<p><strong>dl_dst</strong>:&#8221;&lt;xx:xx:xx:xx:xx:xx&gt;&#8221;</p>
<p><strong>dl_type</strong>:[ &#8220;ARP&#8221; | &#8220;IPv4&#8221; ]</p>
<p><strong>nw_src</strong>:&#8221;&lt;xxx.xxx.xxx.xxx/xx&gt;&#8221;</p>
<p><strong>nw_dst</strong>:&#8221;&lt;xxx.xxx.xxx.xxx/xx&gt;&#8221;</p>
<p><strong>nw_proto</strong>&#8221;:[ &#8220;TCP&#8221; | &#8220;UDP&#8221; | &#8220;ICMP&#8221; ]</p>
<p><strong>tp_src</strong>:[ 0 - 65535 ]</p>
<p><strong>tp_dst</strong>:[ 0 - 65535 ]</p>
<p><strong>ip_dscp</strong>:[ 0 - 63 ]</p>
</div></blockquote>
<dl class="last docutils">
<dt><strong>actions</strong>:</dt>
<dd>[ &#8220;mark&#8221;: [ 0 - 63  ] ] |
[ &#8220;meter&#8221;: [ Meter ID ] ] |
[ &#8220;queue&#8221;: [ Queue ID ] ]</dd>
</dl>
</td>
</tr>
<tr class="row-even"><td><strong>Remarks</strong></td>
<td><p class="first">If successful registration, QoS ID is generated, it will be described in the response.</p>
<p class="last">VLAN ID on URL is optional.</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="delete-qos-rules">
<h3>Delete qos rules<a class="headerlink" href="#delete-qos-rules" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="76%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>DELETE</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/rules/{<strong>switch</strong>}[/{<strong>vlan</strong>}]</p>
<p>&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
<p class="last">&#8211;<strong>vlan</strong>: [ &#8220;all&#8221; | <em>VLAN ID</em> ]</p>
</td>
</tr>
<tr class="row-odd"><td><strong>Data</strong></td>
<td><strong>rule_id</strong>:[ &#8220;all&#8221; | 1 - ... ]</td>
</tr>
<tr class="row-even"><td><strong>Remarks</strong></td>
<td>VLAN ID on URL is optional.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="get-meter-statistics">
<h3>Get Meter Statistics<a class="headerlink" href="#get-meter-statistics" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="75%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>GET</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td><p class="first">/qos/meter/{<strong>switch</strong>}</p>
<p class="last">&#8211;<strong>switch</strong>: [ &#8220;all&#8221; | <em>Switch ID</em> ]</p>
</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="set-meter-table">
<h3>Set meter table<a class="headerlink" href="#set-meter-table" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Method</strong></td>
<td>POST</td>
</tr>
<tr class="row-even"><td><strong>URL</strong></td>
<td>/qos/meter/{<strong>switch</strong>}</td>
</tr>
<tr class="row-odd"><td><strong>Data</strong></td>
<td><p class="first"><strong>meter_id</strong>:Meter ID</p>
<p><strong>bands</strong>:</p>
<blockquote class="last">
<div><p><strong>action</strong>:[DROP | DSCP_REMARK]</p>
<p><strong>flags</strong>:[KBPS | PKTPS | BURST | STATS]</p>
<p><strong>burst_size</strong>:[Burst size]</p>
<p><strong>rate</strong>:[Reception rate]</p>
<p><strong>prec_level</strong>:[Number of drop precedence level to add]</p>
</div></blockquote>
</td>
</tr>
<tr class="row-even"><td><strong>Remarks</strong></td>
<td>The parameter specified or enabled in the bands is depends on the action and flags.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">QoS</a><ul>
<li><a class="reference internal" href="#about-qos">About QoS</a></li>
<li><a class="reference internal" href="#example-of-the-operation-of-the-per-flow-qos">Example of the operation of the per-flow QoS</a><ul>
<li><a class="reference internal" href="#building-the-environment">Building the environment</a></li>
<li><a class="reference internal" href="#queue-setting">Queue Setting</a></li>
<li><a class="reference internal" href="#qos-setting">QoS Setting</a></li>
<li><a class="reference internal" href="#verifying-the-setting">Verifying the Setting</a></li>
<li><a class="reference internal" href="#measuring-the-bandwidth">Measuring the bandwidth</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-of-the-operation-of-qos-by-using-diffserv">Example of the operation of QoS by using DiffServ</a><ul>
<li><a class="reference internal" href="#id1">Building the environment</a></li>
<li><a class="reference internal" href="#id2">Queue Setting</a></li>
<li><a class="reference internal" href="#router-setting">Router Setting</a></li>
<li><a class="reference internal" href="#id3">QoS Setting</a></li>
<li><a class="reference internal" href="#id4">Verifying the Setting</a></li>
<li><a class="reference internal" href="#id5">Measuring the bandwidth</a></li>
</ul>
</li>
<li><a class="reference internal" href="#example-of-the-operation-of-qos-by-using-meter-table">Example of the operation of QoS by using Meter Table</a><ul>
<li><a class="reference internal" href="#id6">Building the environment</a></li>
<li><a class="reference internal" href="#setting-qos">Setting QoS</a></li>
<li><a class="reference internal" href="#id7">Verifying the Setting</a></li>
<li><a class="reference internal" href="#id8">Measuring the bandwidth</a><ul>
<li><a class="reference internal" href="#best-effort-traffic-af11-excess-traffic">Best-effort traffic &amp; AF11 excess traffic</a></li>
<li><a class="reference internal" href="#af11-excess-traffic-best-effort-traffic-af11-non-excess-traffic">AF11 excess traffic &amp; Best-effort traffic &amp; AF11 non-excess traffic</a></li>
<li><a class="reference internal" href="#af11-excess-traffic-af11-excess-traffic">AF11 excess traffic &amp; AF11 excess traffic</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#rest-api-list">REST API List</a><ul>
<li><a class="reference internal" href="#get-queue-status">Get queue status</a></li>
<li><a class="reference internal" href="#get-queue-configuration">Get queue configuration</a></li>
<li><a class="reference internal" href="#set-queue">Set queue</a></li>
<li><a class="reference internal" href="#delete-queue">Delete queue</a></li>
<li><a class="reference internal" href="#get-all-of-qos-rules">Get all of QoS rules</a></li>
<li><a class="reference internal" href="#set-a-qos-rule">Set a QoS rule</a></li>
<li><a class="reference internal" href="#delete-qos-rules">Delete qos rules</a></li>
<li><a class="reference internal" href="#get-meter-statistics">Get Meter Statistics</a></li>
<li><a class="reference internal" href="#set-meter-table">Set meter table</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="rest_router.html"
                        title="previous chapter">Router</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="switch_test_tool.html"
                        title="next chapter">OpenFlow Switch Test Tool</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/rest_qos.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="switch_test_tool.html" title="OpenFlow Switch Test Tool"
             >next</a> |</li>
        <li class="right" >
          <a href="rest_router.html" title="Router"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Ryubook 1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014, RYU project team.
    </div>
  </body>
</html>